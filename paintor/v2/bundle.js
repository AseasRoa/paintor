class et{state;onMount(){}css(){return""}template(){}}const Mt=Symbol("Template"),st=[],_=[],nt=[];function Wt(i){nt.push(i)}function It(i,...t){st.push({strings:i,keys:t})}function Yt(){_.length=0}function it(i){Object.defineProperty(i,Mt,{}),_.push(i);const t=st.pop();t&&(i.css=t,st.length=0);const e=nt.pop();return e&&(i.onMount=e,nt.length=0),i}function N(i){return typeof i=="function"&&Mt in i}function zt(){return typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||this}function rt(i,...t){const e=/(%?)(%([ojdsif]))/ug;if(i=i??"",t.length>0){const s=(n,r,o,l)=>{const c=t.shift();let f="";switch(l){case"o":Array.isArray(c)&&(f=JSON.stringify(c));break;case"s":f=String(c);break;case"d":f=String(Number(c));break;case"j":f=JSON.stringify(c);break;case"i":f=String(parseInt(String(c),10));break;case"f":f=String(parseFloat(String(c)));break}return r?(t.unshift(f),n):f};i=i.replace(e,s)}return t.length>0&&(i+=` ${t.join(" ")}`),i=i.replace(/%{2,2}/ug,"%"),String(i)}function D(i){return Array.isArray(i)}function b(i){return typeof i=="object"&&typeof i!="function"&&i!==null}function Et(i){return!(i!==null&&(typeof i=="object"||typeof i=="function"))}function L(i){return i===" "||i==="	"||i==="\r"||i===`
`}function Rt(i){if(i){if(D(i))return i.length;if(i instanceof Map||i instanceof Set)return i.size;if(typeof i=="object")return Object.keys(i).length}return 0}function jt(i){if(i==="true")return!0;if(i==="false")return!1;const t=parseInt(i);return isNaN(t)?!!i:!!t}function O(i){return parseInt(i)}function Y(){if(Y.isIt===void 0){const i=new Function("try {return this===window;}catch(e){ return false;}");Y.isIt=i()}return Y.isIt??!1}Y.isIt=void 0;const vt=Y();function V(i,t){t.add(i)}function yt(i,t){for(const e of i)t.add(e)}function Vt(i,t){for(const e of i)t.add(e)}function Dt(i){return i.toLowerCase().indexOf("on")===0}function Kt(i){return/^[a-z][a-z0-9-]+$/u.test(i)&&i.includes("-")}function Qt(i){return/#[a-z0-9-]+\s*$/u.test(i)}function qt(i,t,e){if(!(i instanceof window.Node)||typeof t!="string"||typeof e!="function"||Dt(t)===!1)return!1;const s=t.toLowerCase().substring(2);return i.addEventListener(s,e),!0}function gt(i,t){for(const e of t)"shadowRoot"in i&&i.shadowRoot?i.shadowRoot.appendChild(e):i.appendChild(e)}function Xt(i,t){if(!t)return;const{nextSibling:e,parentNode:s}=t;s&&s.insertBefore(i,e)}function Jt(i,t){if(b(t))for(const e in t){const s=(t[e]??"").toString();i.setAttribute(`data-${e}`,s)}}function U(i,t,e){t in i?Array.isArray(e)?i[t]=rt.apply(null,e):i[t]=e??"":"setAttribute"in i&&(e==null?i.removeAttribute(t):Array.isArray(e)?i.setAttribute(t,rt.apply(null,e)):i.setAttribute(t,e))}function Zt(i,t){let e=t;return(t===!0||t===!1||t===void 0||t===null)&&(i==="display"?e=t?"":"none":i==="flex"?e=t?1:0:(i==="visibility"||i==="backfaceVisibility")&&(e=t?"visible":"hidden")),e}function _t(i,t,e){i.style[t]=Zt(t,e)}const te=Object.freeze(new Set(["async","autofocus","autoplay","checked","contenteditable","controls","default","defer","disabled","formNoValidate","frameborder","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","readonly","required","reversed","scoped","selected","typemustmatch","draggable","inert","itemscope","spellcheck","translate"])),ee=Object.freeze(new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","command","keygen","menuitem"])),d={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11};class Q extends Error{constructor(t,e){super(t),this.name=e??"DOMException"}}class x{nextSibling=null;previousSibling=null;textContent="";#t=[];#e;#s;#i=null;constructor(t,e){this.#s=t,this.#e=e}get baseURI(){return""}get childNodes(){return this.#t}get firstChild(){return this.#t[0]??null}get nodeName(){return this.#e}get nodeType(){return this.#s}get parentNode(){return this.#i}set parentNode(t){this.#i=t}appendChild(t){if(this.nodeType!==d.DOCUMENT_NODE&&this.nodeType!==d.DOCUMENT_FRAGMENT_NODE&&this.nodeType!==d.ELEMENT_NODE)throw new Q("This node type does not support this method.");if(this.nodeType===d.DOCUMENT_NODE)throw new Q("Failed to execute 'appendChild' on 'Node': Only one element on document allowed.");if(!(t instanceof x)){const s="Failed to execute 'appendChild' on 'Node': parameter 1 is not of type 'Node'.";throw new TypeError(s)}if(this.#t.includes(t))return;if(t===this)throw new Q("Failed to execute 'appendChild' on 'Node': The new child element contains the parent.");this.#t.push(t),t.parentNode=this;const e=this.#t.length-2;e>=0&&(this.#t[e].nextSibling=t,t.previousSibling=this.#t[e]??null)}contains(){return!1}insertBefore(t,e){const s=[];for(const n of this.#t)n===e&&s.push(t),s.push(n);return this.#t=s,t}removeChild(t){if(!t)throw new Error("Failed to execute 'removeChild' on 'HTMLElement': parameter 1 is not of type 'HTMLElement'.");if(!this.#t.includes(t))throw new Error("Failed to execute 'removeChild' on 'HTMLElement': The node to be removed is not a child of this node.");return this.#t=this.#t.filter(e=>e!==t),t}}class at extends x{constructor(){super(d.COMMENT_NODE,"#comment")}}function $t(i){let t=i;const e={"&":"&amp;","<":"&lt;",">":"&gt;"};return t=t.replace(/[&<>"]/ug,s=>{let n=s;return s in e&&(n=e[s]??""),n}),t}class J extends x{#t=[];#e="";constructor(t,e){super(t,e.toUpperCase()),this.#e=e.toUpperCase()}get attributes(){return this.#t}get children(){return this.childNodes.filter(t=>t instanceof J)}get className(){let t="";for(const e of this.#t)if(e.name==="class"){t=e.value;break}return t}set className(t){this.setAttribute("class",t)}get innerHTML(){return this.textContent}set innerHTML(t){this.textContent=t}get tagName(){return this.#e}append(t){t instanceof x?this.appendChild(t):this.textContent=$t(t.toString())}getAttribute(t){let e="";if(e=t.trim().toLowerCase(),!e)return null;const s=this.#t.findIndex(n=>n.name===e);return s===-1?null:this.#t[s]?.value??null}remove(){this.parentNode?.removeChild(this)}setAttribute(t,e){let s="";if(s=t.trim().toLowerCase(),!s)return;const n=e,r=this.#t.findIndex(o=>o.name===s);r===-1?this.#t.push({name:s,value:n}):this.#t[r]={name:s,value:n}}}function se(i){let t=i;const e={"&":"&amp;","<":"&lt;",">":"&gt;"};return t=t.replace(/[&<>"]/ug,s=>{let n=s;return s in e&&(n=e[s]??""),n}),t}function ne(i){const t=i.split("-");if(t.length===1)return t[0];const e=t.slice(1).map(s=>(s[0]??"").toUpperCase()+s.slice(1)).join("");return t[0]+e}function ie(i){const t={};return i.split(";").forEach(e=>{const[s,n]=e.split(":");if(!s)return;const r=ne(s.trim());t[r]=(n??"").trim()}),t}let H=class extends J{#t={};constructor(t){super(d.ELEMENT_NODE,t)}get innerText(){return this.textContent}set innerText(t){this.textContent=se(t.toString())}get style(){return this.#t}set style(t){if(typeof t=="string"){const e=ie(t);for(const s in e)this.#t[s]=(e[s]??"").toString()}}};class ut extends x{constructor(){super(d.TEXT_NODE,"#text")}}function re(i){let t="";for(const e of i){const{name:s}=e;let{value:n}=e;te.has(s)?n!==!1&&n!==0&&n!==void 0&&n!==null&&(t+=` ${s}`):(Array.isArray(n)?n=n.join(","):n===!0?n="true":n===!1?n="false":n===void 0?n="undefined":n===null?n="null":typeof n=="function"?n=`return(${n.toString()}).call(this,window.event)`:n=n.toString(),n=n.replace(/"/ug,'\\"'),n=$t(n),t+=` ${s}="${n}"`)}return t}function oe(i){let t="";return t=i.replace(/([A-Z])/ug,(e,s)=>`-${s.toLowerCase()}`),t}function le(i){let t="";for(const e in i){const s=i[e];t+=`${oe(e)}:${s};`}return t.trim()}function fe(i,t,e,s=!1){let n="",r="",o="";t&&(r=e,o=`
`);const l=ee.has(i.tagName),c=re(i.attributes);let f="";Object.keys(i.style).length>0&&(f=` style="${le(i.style)}"`),s&&(n+=o),n+=r,i.tagName&&(n+=`<${i.tagName.toLowerCase()}${c}${f}`,n+=l?"":">"),n+=i.textContent;let h="";for(const a of i.childNodes)h+=Pt(a,t,e+t,!0);return h&&(n+=h+o+r),i.tagName!==""&&(n+=l?"/>":`</${i.tagName.toLowerCase()}>`),n}function ce(i,t,e){let s="",n="";return t&&(s=e,n=`
`),`${n}${s}<!--${i.textContent}-->`}function he(i,t,e){let s="",n="";return t&&(s=e,n=`
`),`${n}${s}${i.textContent}`}function Pt(i,t,e,s=!1){switch(i.nodeType){case d.ELEMENT_NODE:{if(!(i instanceof H))throw new Error("");return fe(i,t,e,s)}case d.TEXT_NODE:{if(!(i instanceof ut))throw new Error("");return he(i,t,e)}case d.COMMENT_NODE:{if(!(i instanceof at))throw new Error("");return ce(i,t,e)}}return""}function ae(i,{indent:t=""}){let e="",s=0;for(const n of i.childNodes){s+=1;const r=s>1;e+=Pt(n,t,"",r)}return e}class kt extends x{constructor(){super(d.DOCUMENT_FRAGMENT_NODE,"#document-fragment")}}class ue extends x{ELEMENT_NODE=d.ELEMENT_NODE;ATTRIBUTE_NODE=d.ATTRIBUTE_NODE;TEXT_NODE=d.TEXT_NODE;CDATA_SECTION_NODE=d.CDATA_SECTION_NODE;PROCESSING_INSTRUCTION_NODE=d.PROCESSING_INSTRUCTION_NODE;COMMENT_NODE=d.COMMENT_NODE;DOCUMENT_NODE=d.DOCUMENT_NODE;DOCUMENT_TYPE_NODE=d.DOCUMENT_TYPE_NODE;DOCUMENT_FRAGMENT_NODE=d.DOCUMENT_FRAGMENT_NODE;#t;#e=[];constructor(){super(d.DOCUMENT_NODE,"#document");const t=new H("html"),e=new H("head"),s=new H("body");t.appendChild(e),t.appendChild(s),this.#e.push(t),this.#t=s}get body(){return this.#t}get children(){return this.#e}get parentElement(){return null}createDocumentFragment(){return new kt}createComment(t=""){const e=new at;return e.textContent=t,e}createElement(t){return new H(t)}createTextNode(t){const e=new ut;return e.textContent=t,e}}class me{Comment=at;DocumentFragment=kt;Element=J;HTMLElement=H;Node=x;Text=ut;DOMException=Q;Error=Error;TypeError=TypeError;document;constructor(){this.document=new ue}}const ot=new WeakMap,mt=new WeakMap;function Z(i){return mt.get(i)}function Ft(i){return mt.has(i)}function de(i,t){mt.set(i,t);const e=ot.get(t.target);e?e.has(i)||e.add(i):ot.set(t.target,new Set([i]))}function pe(i){return ot.get(i)}function R(i){return b(i)&&Ft(i)}function Ee(i,t){const e=Z(i);if(!e)throw new Error("The first argument in setState() must be a state object");if(!b(t))throw new Error("The new state in setState() must be Object or Array");const{key:s,parent:n}=e;n&&(n[s]=t)}const y={CREATE:1,UPDATE:3,DELETE:4,ARRAY_COPY_WITHIN:5,ARRAY_LENGTH:6,ARRAY_REVERSE:8,ARRAY_SORT:9,ARRAY_SPLICE:10,ARRAY_SWAP:11},I={if:Symbol("prop-if"),for:Symbol("prop-for"),reactive:Symbol("prop-reactive")},Ht=Symbol("Access"),ye=Symbol("ObserverAccessProp"),C=Symbol("EmptyHandlerElements");function ge(i){let t;for(const e of i)t=e;return t}function be(i,t){let e=-1;for(const s of i)if(e+=1,e===t)return s}function Te(i,t){let e=-1;if(!i.has(t))return e;for(const s of i)if(e+=1,s===t)break;return e}function we(i,t,e){if(!i.has(t)||!i.has(e))throw new Error("Cannot move one element after another, because one element is missing");if(t===e)throw new Error("Cannot move an element after itself");const s=new Set;let n=1;for(const r of i)n===1?(r!==t&&s.add(r),r===e&&(n=2)):n===2?(s.add(t),s.add(r),n=3):n===3&&r!==t&&s.add(r);return n===2&&s.add(t),s}function bt(i,t){const e=new Set;let s=-1;for(const n of i)s+=1,s>=t&&e.add(n);return e}const tt=Object.freeze(new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","command","keygen","menuitem"]));class dt{tagName="-";parent=this;children=[];attributes={};newChild(t,e){const s=new dt;return s.parent=t,s.attributes=e,this.children.push(s),s}}class Ae{#t="";#e="";#s="";#i={};#n;#r;#h=[];#l=this.#d;#c="";#a="";#p={};#u="";#E="";#m="";#A=new dt;#o=this.#A;constructor(t,e){this.#h=this.#S(t,e),this.#b()}generate(t){if(this.#u||this.#E)throw new Error("Some HTML tag is not closed");return this.#y(t,this.#A)}#N(t,e){return typeof t=="function"?typeof e=="function"?e:t:typeof t=="string"&&(typeof e=="string"||typeof e=="number"||typeof e=="boolean")?t+e.toString():e}#y(t,e){const s=[];for(const n of e.children){let r=null;n.tagName==="$if"||n.tagName==="if"?r=t.$if(jt(n.attributes.condition??""),()=>{this.#y(t,n)}):n.tagName==="$repeat"||n.tagName==="for"?"iterations"in n.attributes?r=t.$repeat(0,parseInt(n.attributes.iterations??0)-1,()=>{this.#y(t,n)}):("from"in n.attributes||"to"in n.attributes)&&(r=t.$repeat(parseInt(n.attributes.from??0),parseInt(n.attributes.to??0),()=>{this.#y(t,n)})):n.tagName==="$each"||n.tagName==="forEach"?"object"in n.attributes&&(r=t.$each(n.attributes.object??{},()=>{this.#y(t,n)})):(r=t.$element(n.tagName,n.attributes,this.#y(t,n)),s.push(r))}return s}#g(){const t=this.#o,e=this.#i;Object.keys(this.#p).length>0&&(e.style=this.#p);const s=this.#o.newChild(t,e);s.tagName=this.#u,this.#o=s}#S(t,e=[]){const s=[];for(let n=0;n<t.length;n++)t[n]&&s.push(t[n]),e[n]!==void 0&&s.push(e[n]);return s}#b(){for(let t=0;t<this.#h.length;t++)if(typeof this.#h[t]=="string")for(let e=0;e<this.#h[t].length;e++)this.#n=this.#h[t][e],this.#r=this.#h[t][e-1],this.#l();else this.#n=this.#h[t],this.#r=void 0,this.#l()}#T(t,e){t&&(this.#i[t]=typeof e=="string"?e.trim():e)}#f(t){t===this.#w&&(this.#t="",this.#s="",this.#e=""),this.#l=t}#L(t,e){t&&(this.#p[t]=typeof e=="string"?e.trim():e)}#w(){L(this.#n)||(this.#n==="/"?(tt.has(this.#u)&&this.#g(),this.#f(this.#M)):this.#n===">"?(this.#g(),this.#f(this.#d)):this.#n==="="?this.#f(this.#O):this.#t+=this.#n)}#O(){L(this.#n)||(this.#n==="'"||this.#n==='"'?(this.#e=this.#n,this.#f(this.#t==="style"?this.#C:this.#x)):(this.#e=" ",this.#s=this.#N(this.#s,this.#n),this.#f(this.#x)))}#x(){this.#n===">"&&this.#r!=="/"?(this.#e&&this.#t&&this.#s&&this.#T(this.#t,this.#s),this.#t="",this.#s="",this.#e="",this.#f(this.#d),this.#g()):this.#n===this.#e||this.#e===" "&&L(this.#n)?(this.#T(this.#t,this.#s),this.#f(this.#w)):typeof this.#n=="object"||typeof this.#n=="function"?this.#s=this.#n:this.#s+=this.#n}#d(){L(this.#n)||(this.#n==="<"?(this.#u="",this.#i={},this.#f(this.#I)):(this.#r===" "?this.#m=this.#r+this.#n:this.#m=this.#n,this.#u="",this.#i={},this.#g(),this.#f(this.#v)))}#C(){L(this.#n)||(this.#n===">"?this.#f(this.#d):this.#n===this.#e||this.#e===" "&&L(this.#n)?this.#f(this.#w):this.#n===":"?this.#f(this.#R):this.#c+=this.#n)}#R(){this.#n===">"?this.#f(this.#d):this.#n===";"?(this.#L(this.#c,this.#a),this.#c="",this.#a="",this.#f(this.#C)):this.#n===this.#e?(this.#L(this.#c,this.#a),this.#c="",this.#a="",this.#f(this.#w)):this.#a=this.#N(this.#a,this.#n)}#I(){if(L(this.#n))this.#u!==""&&this.#f(this.#w);else if(this.#n==="/"&&tt.has(this.#u))this.#o.tagName||(this.#o=this.#o.parent),this.#g(),this.#f(this.#M);else if(this.#n===">"){if(!this.#u)throw new Error("Expected tag name, found >");this.#o.tagName||(this.#o=this.#o.parent),this.#g(),this.#f(this.#d)}else this.#r==="<"&&this.#n==="/"?(this.#u,this.#E="",this.#f(this.#M)):this.#u+=this.#n}#M(){if(!L(this.#n))if(this.#n===">"){if(this.#o.tagName&&this.#o.tagName!=="-"&&!tt.has(this.#o.tagName)&&this.#o.tagName!==this.#E)throw new Error(`Expected ${this.#o.tagName} tag to be closed, but ${this.#E} found`);this.#u="",this.#E="",this.#o.tagName?this.#o=this.#o.parent:this.#o=this.#o.parent.parent,this.#f(this.#d)}else this.#E+=this.#n}#v(){this.#n==="<"?(this.#i={},this.#o.attributes.textContent=this.#m,this.#f(this.#I)):(this.#m=this.#N(this.#m,this.#n),this.#o.tagName||(this.#o.attributes.textContent=this.#m))}}const p={state:null,bindFn:null,element:null,elementProp:"",elementInnerProp:"",repaintFn:null};function K(i,t,e,s,n,r){p.state=i,p.bindFn=t,p.element=e,p.elementProp=s,p.elementInnerProp=n,p.repaintFn=r}function P(){p.state=null,p.bindFn=null,p.element=null,p.elementProp="",p.elementInnerProp="",p.repaintFn=null}const w=new WeakMap,A=new WeakMap;function Ne(i,t,e,s,n,r,o){n===I.reactive&&(t=n),xe(i,t,e,{element:s,elementProp:n,elementInnerProp:r,repaintFn:o},s)}function lt(i,t,e){const s=A.get(i);if(!s)return;let n=s.length;for(;n>0;){n-=1;const r=s[n];if(!r)continue;const[o,l,c]=r;w.get(o)?.get(l)?.delete(c);const f=w.get(o);if(f){const h=f.get(l);h&&(h.delete(c),h.size===0&&(f.delete(l),f.size===0&&w.delete(o)))}}A.delete(i)}function q(i){if(lt(i),!i.hasChildNodes())return;const t=i.childNodes;let e=t.length;for(;e>0;)e-=1,q(t[e])}function ft(i,t=!0){if(!i||!b(i))return;const e=w.get(i);if(e){for(const[s,n]of e)for(const[r,o]of n)for(const l of o){const c=l.element,f=A.get(c);if(!f)continue;let h=f.length;for(;h>0;){h-=1;const a=f[h];a&&a[0]===i&&f.splice(h,1)}f.length===0&&A.delete(c)}w.delete(i)}if(t)for(const s in i)ft(i[s],!0)}function Se(i,t,e,s,n){const r=A.get(i);let o=A.get(t);if(o||(o=[],A.set(t,o)),!r)return;const l=o.length;let c=r.length;for(;c>0;){c-=1;const f=r[c];if(!f)continue;const[h,a,E]=f;if(s&&E!==s)continue;const u=G(h,a);if(u){const m=u.get(E);if(m){for(const T of m)if(T.element===i&&(T.element=t,n))for(const S in n)T[S]=n[S]}}o.splice(l,0,f),r.splice(c,1)}r.length===0&&A.delete(i)}function Ce(i,t){const e=w.get(i);if(!e)return;let s=w.get(t);s||(s=new Map,w.set(t,s));for(const[n,r]of e){let o=s.get(n);o||(o=new Map,s.set(n,o));for(const[l,c]of r){let f=o.get(l);f||(f=[],o.set(l,f));for(const h of c){const{element:a}=h;f.push(h);const E=A.get(a);if(E)for(const u of E)u[0]===i&&(u[0]=t)}}}w.delete(i)}function G(i,t){const e=w.get(i);if(e)return e.get(t)}function xe(i,t,e,s,n){let r=!1;const o=w.get(i);if(o){const l=o.get(t);if(l){const c=l.get(e);if(!c)l.set(e,[s]),r=!0;else{let f=!1;for(const h of c)if(h.element===s.element&&h.elementProp===s.elementProp&&h.elementInnerProp===s.elementInnerProp&&h.repaintFn===s.repaintFn){f=!0;break}f||(c.push(s),r=!0)}}else{const c=new Map;c.set(e,[s]),o.set(t,c),r=!0}}else{const l=new Map;l.set(e,[s]);const c=new Map;c.set(t,l),w.set(i,c),r=!0}if(r){const l=A.get(n);if(l)l.push([i,t,e]);else{const c=[],f=[i,t,e];c.push(f),A.set(n,c)}}}class Le{#t=[];get translations(){return this.#t}translate(t){if(typeof t=="string"){const e=this.#s(t,this.#t);if(typeof e=="string")return e;const s=zt(),n=this.#s(t,s.paintorTranslations);if(typeof n=="string")return n}return t}translateArray(t){return this.translate(rt.apply(null,this.#e(t)))}useTranslations(...t){for(const e of t)if(Array.isArray(e))for(const s of e)this.#t.includes(s)||(this.#t=[...this.#t,s]);else e instanceof Object&&(this.#t.includes(e)||(this.#t=[...this.#t,e]))}#e(t){if(this.#t.length===0)return t;const e=new Array(t.length);for(let s=0;s<t.length;s++)e[s]=this.translate(t[s]);return e}#s(t,e){if(e){for(const s of e)if(t in s)return s[t]}return!1}}const Bt=Object.freeze(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","slot","small","source","span","strong","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"]);class k{elements=new Set;addElement(t){t&&this.elements.add(t)}addElements(t){for(const e of t)this.elements.add(e)}getElements(){return this.elements}hasElement(t){return this.elements.has(t)}importElements(t){const e=t.getElements();for(const s of e)this.addElement(s)}moveElementAfterAnother(t,e){return we(this.elements,t,e)}removeAllElements(){this.elements.clear()}removeTheseElements(t){for(const e of t)this.elements.delete(e)}replaceElements(t){this.elements=t}}function W(i,t=!1){if(_.length>0){if(i===void 0)return t?_.shift():_.pop();if(N(i))return t?_.shift():_.pop(),i}return i}function Tt(i,t,...e){let s;if(typeof t=="function")return t.css&&i.$css(t.css.strings,t.css.keys),s=N(t)?t(i):t(...e),s}function F(i,t){const e=i._cssClassName;t.css&&i.$css(t.css.strings,t.css.keys);const s=t(i);return i._cssClassName=e,t.onMount&&t.onMount(),s}function X(i,t){for(;;){if(Array.isArray(t)){for(const e of t)X(i,e);break}if(typeof t=="function"&&N(t)){t=F(i,t);continue}if(typeof t=="boolean"||typeof t=="string"||typeof t=="number")return t;break}}function Oe(i,t,e,s){if(Number.isNaN(t)||Number.isNaN(e)||t===1/0||e===1/0||t===-1/0||e===-1/0)return!0;if(typeof t!="number"||typeof e!="number")return new Error('"start" and "end" arguments should be numbers');if(typeof s!="function")return new Error('"handler" argument should be a Function');if(e>=t)for(let n=t;n<=e&&Tt(i,s,n)!==!1;n++);else for(let n=t;n>=e&&Tt(i,s,n)!==!1;n--);return!0}function wt(i,t,e,s,n,r,o,l){if(typeof s!="function")throw new TypeError('"handler" argument should be a Function');const c=Z(e),f=c?c.target:e,h=t===2&&!!c;if(f instanceof Map||f instanceof Set)if(r===void 0){f.size===0&&typeof n=="function"&&(n(),l?.(C));for(const[a,E]of f.entries())if(ct(i,s,a,E,o,l)===!1)break}else{const a=f instanceof Set?r:f.get(r);ct(i,s,r,a,o,l)}else if(b(f))if(h&&e[Ht],r===void 0){Rt(f)===0&&typeof n=="function"&&(n(),l?.(C));for(const a in f)if(At(i,s,a,e,o,l)===!1)break}else At(i,s,r,e,o,l);else throw new TypeError(`The state argument should be an Object or an Array, but instead it is ${f}`);return!0}function ct(i,t,e,s,n,r){let o=s;n&&(o=n?.call(i,o));let l=t(o,e);return l=X(i,l),r?.(e),l}function At(i,t,e,s,n,r){const o=s[e];return ct(i,t,e,o,n,r)}const M=new WeakMap;class Me{mapKeyToElements=M;#t;#e;#s;#i;#n;constructor(t,e,s,n,r){this.#t=t,this.#e=e,this.#s=s,this.#i=n,this.#n=r}create(t,e,s){let n=null;if(Array.isArray(t)){let o=parseInt(s);for(;o--;)if(t[o]!==void 0){n=String(o);break}}else{const o=Object.keys(t),l=o.indexOf(s)-1;l>-1&&(n=o[l])}let r=this.#e;if(n!==null){const o=M.get(this.#s);if(o){const l=o[n];r=l&&l.size>0?ge(l):r}}this.createElements(e,r,s)}delete(t){this.#h(this.#e,this.#s,t)}update(t,e,s){this.delete(s),this.create(t,e,s)}arraySort(t,e){for(let s=0,n=t.length;s<n;s++){const r=s.toString();this.delete(r),this.create(t,e,r)}}arraySplice(t,e,s){const n=M.get(this.#s);if(Array.isArray(n)){let[r,o,...l]=s;if(r=O(r),o=O(o),o===1/0?o=t.length-r:o<0&&(o=0),o>0)for(let f=r,h=r+o;f<h;f++){const a=f.toString();this.delete(a)}const c=Array(l.length);if(n.splice(r,o,...c),l.length>0)for(let f=r;f<r+l.length;f++){const h=f.toString();this.create(t,e,h)}n.length=t.length}}arrayReverse(t,e){for(let s=0,n=t.length;s<n;s++){const r=n-1-s;if(s>=r)break;this.arraySwap([s,r])}}arraySwap(t){let[e,s]=t;e=O(e),s=O(s);const n=M.get(this.#s);if(Array.isArray(n)){const r=n[e],o=n[s];if(r&&o){if(r.size>0){let c=this.#e,f=e;for(;f--;){const h=n[f];if(!h)continue;const a=h.size;if(a>0){c=h[a-1];break}}c.after(...o)}if(o.size>0){let c=this.#s;for(let f=s+1;f<n.length;f++){const h=n[f];if(!h)continue;if(h.size>0){c=h[0];break}}c.before(...r)}const l=n[s];n[s]=n[e],n[e]=l}}}arrayCopyWithin(t,e,s){let[n,r,o]=s;n=O(n),r=O(r),o=O(o);for(let l=r,c=n;l<o;l++,c++){const f=c.toString();this.delete(f),this.create(t,e,f)}}arrayLength(t,e){let s=e?.[0]??0;s=O(s);const n=M.get(this.#s);if(Array.isArray(n)){const r=n.length;if(s<r)if(s===0)this.#h(this.#e,this.#s,"*",!0);else{let o=r;for(;o>0&&(o-=1,!(o<s));){if(n[o]===void 0)continue;const l=o.toString();this.#h(this.#e,this.#s,l,!0)}}n.length=s}}createElements(t,e,s){if(this.#n!==void 0&&this.#n!==s)return;let n=!1;this.#e.parentElement&&(this.#t.push(new k),n=!0);const r=this.#t.length-1,o=this.#i(t,this.#t[r],s,!1),l=M.get(this.#s);if(o[C])this.#r(o[C],l,s,e);else for(const c in o){const f=o[c];this.#r(f,l,s,e)}n&&this.#t.pop()}#r(t,e,s,n){s!==C&&s!==void 0&&(e[s]=t);const r=this.#t.length-1;for(const o of t)r===0&&this.#t.length>r&&this.#t[r].moveElementAfterAnother(o,n),n.after(o),n=o}#h(t,e,s,n=!0){const r=M.get(e);if(r)if(s==="*"){if(t!==e&&t.previousElementSibling===null&&e.nextElementSibling===null){for(const l in r)this.#l(r,l,n,!1);const o=t.parentElement;o&&(o.textContent="",o.appendChild(t),o.appendChild(e))}else for(const o in r)this.#l(r,o,n,!0);Array.isArray(r)&&(r.length=0)}else this.#l(r,s,n,!0)}#l(t,e,s=!0,n=!0){const r=t[e];if(r){for(const o of r)M.has(o)&&this.#h(o,o,"*"),s&&q(o),n&&o.remove();delete t[e]}}}class Ie{mapKeyToElements;#t;#e;#s;#i;constructor(t,e,s,n,r,o,l){this.#e=t,this.#s=s,this.#i=l,this.#t=new Me(e,s,n,r,o),this.mapKeyToElements=this.#t.mapKeyToElements}repaint(t,e,s,n,r){if(!(this.#e||!b(e))){switch(t){case y.CREATE:{this.#t.create(e,s,n);break}case y.DELETE:{this.#t.delete(n);break}case y.UPDATE:{this.#t.update(e,s,n);break}case y.ARRAY_SPLICE:{this.#t.arraySplice(e,s,r);break}case y.ARRAY_REVERSE:{this.#t.arrayReverse(e,s);break}case y.ARRAY_SWAP:{this.#t.arraySwap(r);break}case y.ARRAY_COPY_WITHIN:{this.#t.arrayCopyWithin(e,s,r);break}case y.ARRAY_SORT:{this.#t.arraySort(e,s);break}case y.ARRAY_LENGTH:{this.#t.arrayLength(e,r);break}}this.#i&&(!Array.isArray(e)||n==="")&&Rt(e)===0&&this.#t.createElements(s,this.#s,void 0)}}}let Nt=0;class z{#t=[new k];#e=null;#s;#i=!0;#n=null;#r=this;#h=[];#l;#c;#a=[];#p=new Map;_cssClassName=null;constructor(t,e,s,n){this.#c=t,this.#s=t.document,this.#i=this.#s.baseURI==="",this.#e=e,this.#h=s,this.#l=n;for(const r of[...Bt,"$css","$html","$if","$repeat","$each","$state","style"])this[r]=this[r].bind(this)}static lastTemplateTreeToRender=null;$element(t,...e){const s=t?this.#s.createElement(t):this.#s.createTextNode("");let n=new Set,r=0;for(let l of e)if(r+=1,l=W(l,!0),l!==void 0)if(typeof l=="string"){const c=this.#s.createTextNode(this.#l.translate(l));V(c,n)}else if(typeof l=="number"){const c=this.#s.createTextNode(l.toString());V(c,n)}else if(typeof l=="function")if(N(l)){const c=l;this.#L(c,n)}else if(this.#i)s.innerHTML=`(${l.toString()})()`;else if(s instanceof HTMLScriptElement){const c=this.#s.createTextNode(`(${l.toString()})()`);s.appendChild(c)}else"value"in s&&!(s instanceof HTMLLIElement)?this.#m(s,{value:l}):this.#m(s,{textNode:l});else if(l instanceof this.#c.Node)V(l,n);else if(Array.isArray(l)){const c=l;if(c.length===0)continue;let f=!1;for(const h of c)if(h instanceof this.#c.Node){f=!0;break}if(f)yt(l,n);else{const h=this.#s.createTextNode(this.#l.translateArray(l));V(h,n)}}else if(l instanceof Set){if(l.size===0)continue;yt(l,n)}else l instanceof Error?s.textContent=this.#l.translate(l.message):r===1&&b(l)&&this.#m(s,l);const o=this.#t.length-1;if(n.size>0){const l=this.#t[o].getElements(),c=be(n,0),f=Te(l,c);f>-1&&n.size<l.size-f&&(n=bt(l,f))}return gt(s,n),this.#t[o].removeTheseElements(n),this.#t[o].addElement(s),this._cssClassName&&(s.className=s.className?this._cssClassName+" "+s.className:this._cssClassName),s}$css(t,...e){if(typeof t=="string")this.#E(t);else if(Array.isArray(t)&&"raw"in t&&Array.isArray(e)){let s="";const n=t.length;for(let r=0;r<n;r++)s+=(t[r]??"")+(e[r]??"");this.#E(s)}else t instanceof CSSStyleSheet&&(this.#a.includes(t)||(this.#a.push(t),document.adoptedStyleSheets.push(t)))}$html(t,...e){const s=e.length===0&&this.#l.translations.length===0?this.#o(Array.isArray(t)?t[0]??"":t):this.#N(Array.isArray(t)?t:[t],...e);for(const n of s)n.tagName===""&&(n.textContent=this.#l.translate(n.textContent));return s}$if(t,e,s){const n=arguments.length>2?W(s):void 0,r=W(e),o=l=>{!!l[0]?r&&this.#x(r):n&&this.#x(n)};return typeof t=="function"?this.#w("if",[t],!0,o):this.#f(t,o)}$each(t,e,s){return R(t)?this.#S(t,e,s):this.#g(t,e,s)}$repeat(t,e,s){const n=W(s),r=o=>{const l=parseInt(o[0]),c=parseInt(o[1]),f=Oe(this.#r,l,c,n);f instanceof Error&&console.error(f)};return this.#w("for",[t,e],!0,r)}$state(t,e,s){const n=Z(t);if(n){const r=n.parent;if(!r||!R(r))throw new Error("The state must be a part of a state");const o=n.key,l=(c,f)=>{if(f===o)return N(e)?X(this.#r,e):X(this.#r,e(c))};return this.#S(r,l,s,o)}return this.#S(t,e,s)}getCreatedElements(){if(!this.#t[0])throw new Error("Missing data");return this.#t[0].getElements()}getHtmlCode(t){let e="";if(this.#i){const s=this.#e;s&&(e=ae(s,t))}return e}style(t,...e){if(Array.isArray(t)&&"raw"in t&&Array.isArray(e)){let s="";const n=t.length;for(let r=0;r<n;r++)s+=(t[r]??"")+(e[r]??"");return this.$element("style",s)}return this.$element("style",t)}async render(){z.lastTemplateTreeToRender=this.#r,this.#t=[new k];for(const t of this.#h)if(typeof t=="function"){let e=F(this.#r,t);if(e instanceof Promise&&(e=await e),e&&typeof e=="string")this.$html(e);else if(typeof e=="function"&&N(e))F(this.#r,e);else if(Array.isArray(e))for(const s of e)typeof s=="function"&&N(s)&&F(this.#r,s)}this.#u(),Yt()}#u(){const t=this.#e;if(t){const e=this.getCreatedElements();gt(t,e)}}#E(t){if(!t)return;let e=this.#p.get(t);if(!e){const s=document.createElement("style");s.textContent=t,document.head.appendChild(s);const n=s.sheet;if(!n)return;Nt+=1,e="--"+Nt.toString(),s.className=e;for(const r of n.cssRules){if(!(r instanceof CSSStyleRule))continue;const o=r.selectorText,l=o.split(",");for(let c=0;c<l.length;c++)(l[c]??"").startsWith(":")||(l[c]=o+"."+e);r.selectorText=l.join(",")}this.#p.set(t,e)}this._cssClassName=e}#m(t,e,s){for(const n in e){let r=e[n];if(this.#i){if(Dt(n)&&typeof r=="function"){U(t,n,r);continue}}else if(typeof r=="function"&&qt(t,n,r))continue;if(typeof r=="function"){const o=r;K(null,o,t,n,"",null);let l=o(t);if(N(l)){P(),s&&s();continue}else if(typeof l=="function")l=l();else if(n==="textNode"){P();const c=this.#s.createTextNode(l);t.appendChild(c),Se(t,c,void 0,o,{elementProp:"textContent"});continue}P(),l=Et(l)?this.#l.translate(l):this.#l.translateArray(l),n&&U(t,n,l)}else n==="style"&&b(r)&&t instanceof this.#c.HTMLElement?this.#A(t,r):n==="data"&&b(r)&&t instanceof this.#c.HTMLElement?Jt(t,r):n==="textContent"?t[n]=Et(r)?this.#l.translate(r):this.#l.translateArray(r):((n==="innerText"||n==="value"&&t.tagName==="INPUT"&&(t.getAttribute("type")??"").toLowerCase()==="button")&&(r=this.#l.translate(r)),U(t,n,r))}}#A(t,e){if(e.constructor&&e.constructor.name!=="Object")throw new Error(`style() doesn't support ${e.constructor.name} as input`);for(const s in e){const n=e[s];let r="";if(typeof n=="function"){const o="style",l=n;K(null,l,t,o,s,null),r=l(t),P()}else r=n;typeof s=="string"&&_t(t,s,r)}}#o(t){let e=[];if(this.#i){const n=this.#s.createElement("");n.innerHTML=t??"",e=[n]}else{this.#n||(this.#n=this.#s.createElement("template"));const n=this.#n;n.innerHTML=t.trim()??"",e=Array.from(n.content.childNodes),n.innerHTML=""}const s=this.#t.length-1;return this.#t[s].addElements(e),e}#N(t,...e){return new Ae(t,e).generate(this)}#y(t){return this.#l.translate(t)}#g(t,e,s){const n=r=>{wt(this.#r,1,r[0],e,s,void 0,this.#y)};return this.#f(t,n)}#S(t,e,s,n){let r=null;if(!R(t))return new Error("The input object must be a state");const o=(l,c,f,h=!1)=>{const a=h?[]:{};let E=c.getElements().size;const u=m=>{const T=c.getElements(),S=E===0?T:bt(T,E);if(m===C){if(r)return;r=S}else if(r){for(const j of r)q(j),j.remove();r=null}m===C?Object.defineProperty(a,m,{value:S,configurable:!0,enumerable:!1,writable:!1}):a[m]=S,E=T.size};return wt(this.#r,2,l,e,s,f,this.#y,u),a};return this.#O(t,o,typeof s=="function",n)}#b(t,e){if(!this.#e?.contains(t))return!1;let s=t;for(const n of e)Xt(n,s),s=n;return!0}#T(t,e){let s=t.nextSibling;for(;s&&s!==e;){q(s);const n=s;s=s.nextSibling,n.remove()}}#f(t,e){const{thisLevel:s,upperLevel:n}=this.#d();return e([t]),this.#C({thisLevel:s,upperLevel:n})}#L(t,e){const{thisLevel:s,upperLevel:n}=this.#d();F(this.#r,t);const r=this.#t[s]?.getElements()??new Set;Vt(r,e),this.#C({thisLevel:s,upperLevel:n})}#w(t,e,s,n){const{thisLevel:r,upperLevel:o}=this.#d(),l=new Array(e.length);let c=!1;for(const f of e)if(typeof f=="function"){c=!0;break}if(c){const f=this.#s.createComment(`${t}-begin`),h=this.#s.createComment(`${t}-end`);s&&this.#t[r].addElement(f);const a=()=>{if(this.#i)return;const m=this.#t.length-1;this.#t[m].removeAllElements(),this.#T(f,h),n(l,!1,null,null),this.#b(f,this.#t[m].getElements())||console.error("Element ",f," does not exist anymore")},E=f,u=I[t]??"";for(let m=0;m<l.length;m++){const T=e[m];typeof T=="function"?(K(null,T,E,u,"",j=>{l[m]=j,a()}),l[m]=T(),P()):l[m]=e[m]}n(l,!0,f,h),s&&this.#t[r].addElement(h)}else n(e,!1,null,null);return this.#C({thisLevel:r,upperLevel:o})}#O(t,e,s,n){const{thisLevel:r,upperLevel:o}=this.#d(),l=this.#s.createComment("reactive-begin"),c=this.#s.createComment("reactive-end"),f=this.#t[r];if(!f)throw new Error(`There are no collected elements at level ${r}`);f.addElement(l);const h=new Ie(this.#i,this.#t,l,c,e,n,s),a=(...S)=>{h.repaint(...S)},E=I.reactive;K(t,()=>t,c,E,"",a);const m=Array.isArray(t),T=e(t,f,void 0,m);return Object.hasOwn(T,C)&&delete T[C],h.mapKeyToElements.set(c,T),P(),f.addElement(c),this.#C({thisLevel:r,upperLevel:o})}#x(t){if(typeof t=="function"){if(N(t)){F(this.#r,t);return}const e=t(this.#r);typeof e=="function"&&this.#x(e)}}#d(){this.#t.push(new k);const t=this.#t.length-1,e=t-1;return{thisLevel:t,upperLevel:e}}#C({thisLevel:t,upperLevel:e}){const s=this.#t[t],n=this.#t[e];if(!(s instanceof k)||!(n instanceof k))throw new Error("Missing data");const r=s.getElements()??new Set;return n.importElements(s),s.replaceElements(new Set),delete this.#t[t],this.#t.pop(),r}}function Re(...i){const t=this;return function(...s){return t.call(this,...i,...s)}}const{prototype:ht}=z;Object.assign(ht.$element,{bindArgs:Re});Bt.forEach(i=>{ht[i]=ht.$element.bindArgs(i)});class ve{#t;#e;#s;constructor(t,e,s){this.#t=t,this.#e=e,this.#s=s}getArrayFunction(t){return t in this?this[t]:this.#t[t]}copyWithin=(...t)=>{const e=this.#t,s=this.#e;let[n,r,o]=t;const{length:l}=e;if(n<0)n+=l;else if(n<-l)n=0;else{if(n>=l)return;n>r&&(o=l-1)}if(r<0)r+=l;else if(r<-l||r===void 0)r=0;else if(r>=l)return;if(o<0)o+=l;else if(o<-l)o=0;else if(o>=l||o===void 0)o=l;else if(o<=r)return;const c=e.copyWithin.apply(e,[n,r,o]);return this.#s(y.ARRAY_COPY_WITHIN,e,s,[n,r,o]),c};fill=(...t)=>{const e=this.#t,s=this.#e,n=e.fill.apply(e,t);let r=t[0];for(let o=0;o<e.length;o++)s[o]=r,o===0&&(r=s[o]);return n};forEach=(t,e)=>{const s=this.#t,n=this.#e;z.lastTemplateTreeToRender?.$each(n,(o,l)=>{t.apply(e,[o,l,s])})};push=(...t)=>{const e=this.#t,s=this.#e;let r=e.length-1;for(const o of t)r+=1,s[r]=o;return r};reverse=()=>{const t=this.#t,e=this.#e,s=t.reverse.apply(t);return this.#s(y.ARRAY_REVERSE,t,e),s};shift=()=>{const t=this.#t,e=this.#e,s=t.length,n=t.shift.apply(t);return this.#s(y.ARRAY_SPLICE,t,e,[0,1]),this.#i(e,s),n};sort=(...t)=>{const e=this.#t,s=this.#e,n=e.sort.apply(e,t);return this.#s(y.ARRAY_SORT,e,s,t),n};splice=(...t)=>{const e=this.#t,s=this.#e,n=e.length,r=e.splice.apply(e,t);return this.#s(y.ARRAY_SPLICE,e,s,t),this.#i(s,n),r};unshift=(...t)=>{const e=this.#t,s=this.#e,n=e.length,r=e.unshift.apply(e,t);return this.#s(y.ARRAY_SPLICE,e,s,[0,0,...t]),this.#i(s,n),r};#i(t,e){const s=t.length;e!==s&&Object.assign(t,{length:s})}}const St=new WeakMap;function De(i,t,e,s){let n=St.get(t);return n||(n=new ve(t,e,s),St.set(t,n)),n.getArrayFunction(i)}const g={CREATE:0,CHANGE:1,DELETE:2,SET:3},v=new Map;v.set(g.CREATE,new WeakMap);v.set(g.CHANGE,new WeakMap);v.set(g.DELETE,new WeakMap);v.set(g.SET,new WeakMap);const $={prop:void 0,receiver:void 0};function _e(i,t){$.receiver=i,$.prop=t}function $e(){return $}function Ct(i,t,e){const s=v.get(i);if(!s)throw new Error(`Wrong observer type ${i}`);const n=s.get(t);if(n)return n.get(e)}function B(i,t,e,s,n){if(s==="length"&&Array.isArray(t))return;const r=Ct(i,e,s);if(r){const l=t[s];for(const c of r)c({key:s,value:l,oldValue:n,state:e,target:t})}const o=Ct(i,e,void 0);if(o){const l=t[s];for(const c of o)c({key:s,value:l,oldValue:n,state:e,target:t})}}function xt(i,t,e,s){Ut(i);const n=v.get(t);if(!n)throw new Error(`Wrong observer type ${t}`);const r=n.get(i);if(r){const o=r.get(e);o?o.has(s)||o.add(s):r.set(e,new Set([s]))}else{const o=new Map;o.set(e,new Set([s])),n.set(i,o)}}function Pe(i,t,e){if(t&&!v.has(t))throw new Error(`Invalid observer type "${t}"`);Ut(i);const s=$.receiver??i;if(!R(s))throw new Error("Invalid observer receiver");if(t)Lt(t,s,$.prop,e);else for(const n in g)Lt(g[n],s,$.prop,e)}function Ut(i){R(i)&&(i[ye],$.prop=void 0)}function Lt(i,t,e,s){const n=v.get(i);if(!n)throw new Error(`Wrong observer type ${i}`);const r=n.get(t);if(r){const o=r.get(e);o&&(s?o.delete(s):o.clear())}}const Ot=Symbol("isProxy");class ke{createProxy(t,e,s=null){if(!b(t))throw new Error("Cannot create a Proxy on non-object");if(R(t)||t instanceof Date)return t;const n=this.#t,r=new Proxy(t,n);return b(t)&&(Ft(r)||de(r,{key:e,parent:s,target:t})),r}#t={get:(t,e,s)=>e===Ot?!0:b(t[e])&&!t[e][Ot]?(t[e]=this.createProxy(t[e],e,s),t[e]):(_e(s,e),Object.hasOwn(t,e)||e===Ht?(p.element&&(!p.state||p.state===s)&&Ne(s,e,p.bindFn,p.element,p.elementProp,p.elementInnerProp,p.repaintFn),t[e]):typeof e=="string"&&D(t)&&typeof t[e]=="function"?De(e,t,s,this.#e):t[e]),set:(t,e,s,n)=>{if(e==="length"&&D(t)){const r=t[e];if(s<r)for(let o=t.length-1;o>=s;o--)ft(t[o],!0);t[e]=s,this.#e(y.ARRAY_LENGTH,t,n,[s]),this.#c(e,t,n,r)}else if(Object.hasOwn(t,e))if(b(s)&&t[e]!==s&&!(s instanceof Date)){if(t[e]!==s){if(b(t[e])&&b(s)){for(const o in s)D(s[o])&&D(t[e][o])&&t[e][o].length!==s[o].length?t[e][o].length=s[o].length:b(s[o])&&b(t[e][o])&&this.#i(e,t,n);for(const o in t[e])o in s||this.#i(o,t,n[e])}const r=t[e];t[e]=s,Ce(r,n[e]);for(const o in t[e])this.#r(o,t[e],n[e]),this.#c(o,t[e],n[e],r);this.#r(e,t,n)}}else if(t[e]!==s){const r=t[e];t[e]=s,this.#i(e,t,n),this.#s(e,t,n),this.#c(e,t,n,r)}else this.#r(e,t,n);else{const r=D(t)?t.length:-1;t[e]=s,this.#h(e,t,n),this.#s(e,t,n),D(t)&&t.length!==r&&(n.length=t.length)}return!0},deleteProperty:(t,e)=>{const s=t[e];ft(s,!0),delete t[e];const n=pe(t);if(n)for(const r of n)this.#l(e,t,r,s),this.#i(e,t,r);return!0}};#e=(t,e,s,n)=>{const r=G(s,I.reactive);if(r)for(const[o,l]of r)for(const c of l){const{repaintFn:f}=c;f&&f(t,e,s,"",n)}};#s(t,e,s){this.#n(y.CREATE,t,e,s)}#i(t,e,s){this.#n(y.DELETE,t,e,s)}#n(t,e,s,n){const r=G(n,I.reactive);if(r)for(const[o,l]of r)for(const c of l){const{repaintFn:f}=c;f&&f(t,s,n,e)}}#r(t,e,s){const n=G(s,I.reactive);if(n)for(const[r,o]of n)for(const l of o){const{repaintFn:c}=l;c&&c(y.UPDATE,e,s,t)}}#h(t,e,s){B(g.CREATE,e,s,t),B(g.SET,e,s,t)}#l(t,e,s,n){B(g.DELETE,e,s,t,n)}#c(t,e,s,n){B(g.CHANGE,e,s,t,n),B(g.SET,e,s,t,n);const r=G(s,t);if(r)for(const[o,l]of r)for(const c of l){const{element:f,elementProp:h,elementInnerProp:a,repaintFn:E}=c;let u=o.call(f,f);if(h==="style"&&a)_t(f,a,u);else if(h===I.if||h===I.for)E&&E(u);else{if(typeof u=="function"&&(u=u()),(h==="className"||h==="class")&&f.className.startsWith("--")){const m=f.className.split(" ");typeof u=="string"?u=m[0]+" "+u:Array.isArray(u)&&(u=[m[0],...u])}U(f,h,u)}}}}function Gt(i){if(!(i instanceof Object)&&!Array.isArray(i))throw new Error("state() only accepts Object or Array");const t=Z(i);t&&(i=t.target);const e=new ke,s="",n={"":i};return e.createProxy(n,"",null)[s]}const Fe=new me;class pt{#t=[];#e=[];#s="";#i=!1;#n=!1;#r="";#h="";#l=new Map;#c=new Map;#a=[];#p=new Le;#u=!1;clear(){for(const t of this.#e)for(const e of t)lt(e),e.remove();this.#e.length=0,this.#s="",this.#l.clear(),this.#c.clear()}getElements(){return this.#i?this.#A(null):(this.#b(null,window,!0),this.#e)}getElementsSr(){if(this.#i)return this.#A("");const t=this.#o();return this.#b("",t,!0),this.#e}html(t){if(this.#i)return this.staticHtml(t);const e=this.#o();return this.#b("",e,!0,t),this.#s}paint(t){if(!vt)throw new Error("You can only use this function in browser environment");if(!t)throw new Error("No container selected.");if(typeof t!="string"&&!(t instanceof HTMLElement)&&!(t instanceof NodeList)&&!Array.isArray(t)&&!(t instanceof HTMLCollection))throw new Error(`Wrong type for the container element. Expected <string> or <Node>, got <${typeof t}>`);this.#b(t,window,!0)}static(t=!0){return this.#i=!!t,!t&&this.#c.size>0&&this.#c.clear(),this}staticHtml(t){const e=this.#p.translations[0]??null;if(!this.#c.has(e)){const s=this.#o();this.#b("",s,!0,t),this.#c.set(e,this.#s)}return this.#c.get(e)??""}useComposables(...t){if(Array.isArray(t))for(const e of t)if(Array.isArray(e))for(const s of e)this.#a.push(s);else this.#a.push(e)}useTranslations(...t){return this.#p.useTranslations(...t),this}#E(){if(this.#t)for(const t of this.#t)for(;t?.firstChild;)t.removeChild(t.firstChild)}#m(t){let e=-1,s=-1;for(const n of this.#t)s+=1,t===n&&(e=s);if(e!==-1){delete this.#t[e];for(const n of this.#e[e]??[])lt(n),n.remove();delete this.#e[e],this.#s="";for(const[n,r]of this.#l)delete r[e];this.#c.clear()}}#A(t){const e=this.#p.translations[0]??null;if(!this.#l.has(e)){const s=this.#o();this.#b(t,s,!0),this.#l.set(e,this.#e)}return this.#l.get(e)??[]}#o(){return Fe}#N(t,e){this.#u||(this.#u=!0,this.#e.length=0,this.#s="",this.#y(t,e),this.#g())}#y(t,e){const s=e.document.baseURI==="";if(typeof t=="string")if(this.#r=t,this.#n=!1,Kt(t))this.#n=!0;else{Qt(t)||(this.#h=t);const n=s?[e.document.createElement("#container")]:e.document.querySelectorAll(t);if(this.#t=Array.from(n),!this.#t)throw new Error(`Could not find an element by the following query: ${t}`)}else if(t instanceof HTMLElement)this.#t=[t];else if(t instanceof NodeList||t instanceof HTMLCollection)this.#t=Array.from(t);else if(Array.isArray(t)){for(const n of t)if(!(n instanceof HTMLElement))throw new Error("All elements in the input array must be DOM elements");this.#t=t}return!0}#g(){for(let t=this.#a.length-1;t>=0;t--){const e=this.#a[t];if(e instanceof et&&(this.#a[t]=this.#S(e)),this.#a[t]=W(this.#a[t]),typeof this.#a[t]!="function")throw new Error("The component must have a template")}return!0}#S(t){if(t instanceof et){if(typeof t.template!="function")throw new TypeError(`Class component ${t.constructor.name} must have a template that is a method`);const e=t.template.bind(t);if(t.state=t.state?Gt(t.state):t.state,t.css){let s=t.css.apply(t)??"";if(typeof s!="string")throw new TypeError(`Class component ${t.constructor.name} must return string in its css() method`);s=s.trim(),s&&It(s)}return t.onMount&&(e.onMount=t.onMount.bind(t)),it(e)}return it(()=>{})}#b(t,e,s=!0,n={}){this.#N(t,e),s&&this.#E();const r=this.#a;if(!e)throw new Error("Missing window element");if(this.#n){if(customElements.get(this.#r)){const l=document.getElementsByTagName(this.#r);for(const c of l)this.#T(e,c.shadowRoot,r,n);return}const o=l=>class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){if(!this.shadowRoot)throw new Error("Missing shadow root");l.#T(e,this.shadowRoot,r,n)}disconnectedCallback(){l.clear()}};customElements.define(this.#r,o(this))}else if(this.#h&&new MutationObserver(l=>{for(const c of l){const{addedNodes:f,removedNodes:h}=c;for(const a of f)a instanceof HTMLElement&&a.matches(this.#h)&&this.#T(e,a,r,n);for(const a of h)this.#m(a)}}).observe(document.body,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),this.#t.length===0)this.#T(e,null,r,n);else for(const o of this.#t)this.#T(e,o,r,n)}#T(t,e,s,n={}){const r=new z(t,e,s,this.#p);r.render().then(()=>{}),this.#s=r.getHtmlCode(n),this.#e.push(r.getCreatedElements())}}function He(...i){const t=new pt;return t.useComposables(...i),t}function Be(i){return i instanceof pt}const Ue=function(){let i="en";return vt&&(i=document.getElementById("html")?.getAttribute("lang")??i),i},Ge=async function(i,t){if(typeof i!="string")throw new Error("Translation path must be a string");let e=null;const s=i.match(/^(.*?)([^.\/\\]+)(.\w+)$/um);if(s===null)throw new TypeError(`Incorrect path: ${i}`);const n=s[1]+t+s[3];try{e=(await import(n)).default}catch{n!==i&&(e=(await import(i)).default)}if(!(e instanceof Object))throw new TypeError(`Translation at ${n} must export an object`);return e},We=async function(...i){const t=Ue(),e=[];for(const s of i)e.push(Ge(s,t));return Promise.all(e)};class Ye{#t;constructor(t){this.#t=t}create(t){return this.#e(g.CREATE,t)}change(t){return this.#e(g.CHANGE,t)}delete(t){return this.#e(g.DELETE,t)}set(t){return this.#e(g.SET,t)}#e(t,e){if(this.#s(e),R(this.#t))xt(this.#t,t,void 0,e);else{const s=$e();if(!s.receiver)throw new Error("Cannot observe a non-state");xt(s.receiver,t,s.prop,e)}}#s(t){if(!t)throw new Error("You must provide a listener function")}}function ze(i){switch(i){case"create":return g.CREATE;case"change":return g.CHANGE;case"delete":return g.DELETE;case"set":return g.SET;default:return}}function je(i){return new Ye(i)}function Ve(i,t,e){return Pe(i,ze(t),e)}function Ke(i){return i}const qe={Component:et,compose:He,Composition:pt,css:It,fetchTranslations:We,isComposition:Be,isState:R,isTemplate:N,on:je,onMount:Wt,off:Ve,setState:Ee,state:Gt,style:Ke,template:it};export{et as Component,pt as Composition,He as compose,It as css,qe as default,We as fetchTranslations,Be as isComposition,R as isState,N as isTemplate,Ve as off,je as on,Wt as onMount,qe as paintor,Ee as setState,Gt as state,Ke as style,it as template};
//# sourceMappingURL=bundle.js.map
