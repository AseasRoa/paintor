class st{state;template(){}}const Ot=Symbol("Template"),nt=[],P=[];function Gt(i,...t){nt.push({strings:i,keys:t})}function Wt(){P.length=0}function it(i){Object.defineProperty(i,Ot,{}),P.push(i);const t=nt.pop();return t&&(i.css=t,nt.length=0),i}function N(i){return typeof i=="function"&&Ot in i}function Yt(){return typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||this}function rt(i,...t){const e=/(%?)(%([ojdsif]))/ug;if(i=i??"",t.length>0){const s=(n,r,o,l)=>{const h=t.shift();let f="";switch(l){case"o":Array.isArray(h)&&(f=JSON.stringify(h));break;case"s":f=String(h);break;case"d":f=String(Number(h));break;case"j":f=JSON.stringify(h);break;case"i":f=String(parseInt(String(h),10));break;case"f":f=String(parseFloat(String(h)));break}return r?(t.unshift(f),n):f};i=i.replace(e,s)}return t.length>0&&(i+=` ${t.join(" ")}`),i=i.replace(/%{2,2}/ug,"%"),String(i)}function D(i){return Array.isArray(i)}function b(i){return typeof i=="object"&&typeof i!="function"&&i!==null}function pt(i){return!(i!==null&&(typeof i=="object"||typeof i=="function"))}function O(i){return i===" "||i==="	"||i==="\r"||i===`
`}function It(i){if(i){if(D(i))return i.length;if(i instanceof Map||i instanceof Set)return i.size;if(typeof i=="object")return Object.keys(i).length}return 0}function zt(i){if(i==="true")return!0;if(i==="false")return!1;const t=parseInt(i);return isNaN(t)?!!i:!!t}function I(i){return parseInt(i)}function z(){if(z.isIt===void 0){const i=new Function("try {return this===window;}catch(e){ return false;}");z.isIt=i()}return z.isIt??!1}z.isIt=void 0;const Mt=z();function K(i,t){t.add(i)}function Et(i,t){for(const e of i)t.add(e)}function jt(i,t){for(const e of i)t.add(e)}function Rt(i){return i.toLowerCase().indexOf("on")===0}function Vt(i){return/^[a-z][a-z0-9-]+$/u.test(i)&&i.includes("-")}function Kt(i){return/#[a-z0-9-]+\s*$/u.test(i)}function Qt(i,t,e){if(!(i instanceof window.Node)||typeof t!="string"||typeof e!="function"||Rt(t)===!1)return!1;const s=t.toLowerCase().substring(2);return i.addEventListener(s,e),!0}function yt(i,t){for(const e of t)"shadowRoot"in i&&i.shadowRoot?i.shadowRoot.appendChild(e):i.appendChild(e)}function qt(i,t){if(!t)return;const{nextSibling:e,parentNode:s}=t;s&&s.insertBefore(i,e)}function Xt(i,t){if(b(t))for(const e in t){const s=(t[e]??"").toString();i.setAttribute(`data-${e}`,s)}}function G(i,t,e){t in i?Array.isArray(e)?i[t]=rt.apply(null,e):i[t]=e??"":"setAttribute"in i&&(Array.isArray(e)?i.setAttribute(t,rt.apply(null,e)):i.setAttribute(t,e))}function Jt(i,t){let e=t;return(t===!0||t===!1||t===void 0||t===null)&&(i==="display"?e=t?"":"none":i==="flex"?e=t?1:0:(i==="visibility"||i==="backfaceVisibility")&&(e=t?"visible":"hidden")),e}function vt(i,t,e){i.style[t]=Jt(t,e)}const Zt=Object.freeze(new Set(["async","autofocus","autoplay","checked","contenteditable","controls","default","defer","disabled","formNoValidate","frameborder","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","readonly","required","reversed","scoped","selected","typemustmatch","draggable","inert","itemscope","spellcheck","translate"])),te=Object.freeze(new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","command","keygen","menuitem"])),d={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11};class q extends Error{constructor(t,e){super(t),this.name=e??"DOMException"}}class L{nextSibling=null;previousSibling=null;textContent="";#t=[];#e;#s;#i=null;constructor(t,e){this.#s=t,this.#e=e}get baseURI(){return""}get childNodes(){return this.#t}get firstChild(){return this.#t[0]??null}get nodeName(){return this.#e}get nodeType(){return this.#s}get parentNode(){return this.#i}set parentNode(t){this.#i=t}appendChild(t){if(this.nodeType!==d.DOCUMENT_NODE&&this.nodeType!==d.DOCUMENT_FRAGMENT_NODE&&this.nodeType!==d.ELEMENT_NODE)throw new q("This node type does not support this method.");if(this.nodeType===d.DOCUMENT_NODE)throw new q("Failed to execute 'appendChild' on 'Node': Only one element on document allowed.");if(!(t instanceof L)){const s="Failed to execute 'appendChild' on 'Node': parameter 1 is not of type 'Node'.";throw new TypeError(s)}if(this.#t.includes(t))return;if(t===this)throw new q("Failed to execute 'appendChild' on 'Node': The new child element contains the parent.");this.#t.push(t),t.parentNode=this;const e=this.#t.length-2;e>=0&&(this.#t[e].nextSibling=t,t.previousSibling=this.#t[e]??null)}contains(){return!1}insertBefore(t,e){const s=[];for(const n of this.#t)n===e&&s.push(t),s.push(n);return this.#t=s,t}removeChild(t){if(!t)throw new Error("Failed to execute 'removeChild' on 'HTMLElement': parameter 1 is not of type 'HTMLElement'.");if(!this.#t.includes(t))throw new Error("Failed to execute 'removeChild' on 'HTMLElement': The node to be removed is not a child of this node.");return this.#t=this.#t.filter(e=>e!==t),t}}class ct extends L{constructor(){super(d.COMMENT_NODE,"#comment")}}function $t(i){let t=i;const e={"&":"&amp;","<":"&lt;",">":"&gt;"};return t=t.replace(/[&<>"]/ug,s=>{let n=s;return s in e&&(n=e[s]??""),n}),t}class Z extends L{#t=[];#e="";constructor(t,e){super(t,e.toUpperCase()),this.#e=e.toUpperCase()}get attributes(){return this.#t}get children(){return this.childNodes.filter(t=>t instanceof Z)}get className(){let t="";for(const e of this.#t)if(e.name==="class"){t=e.value;break}return t}set className(t){this.setAttribute("class",t)}get innerHTML(){return this.textContent}set innerHTML(t){this.textContent=t}get tagName(){return this.#e}append(t){t instanceof L?this.appendChild(t):this.textContent=$t(t.toString())}getAttribute(t){let e="";if(e=t.trim().toLowerCase(),!e)return null;const s=this.#t.findIndex(n=>n.name===e);return s===-1?null:this.#t[s]?.value??null}remove(){this.parentNode?.removeChild(this)}setAttribute(t,e){let s="";if(s=t.trim().toLowerCase(),!s)return;const n=e,r=this.#t.findIndex(o=>o.name===s);r===-1?this.#t.push({name:s,value:n}):this.#t[r]={name:s,value:n}}}function ee(i){let t=i;const e={"&":"&amp;","<":"&lt;",">":"&gt;"};return t=t.replace(/[&<>"]/ug,s=>{let n=s;return s in e&&(n=e[s]??""),n}),t}function se(i){const t=i.split("-");if(t.length===1)return t[0];const e=t.slice(1).map(s=>(s[0]??"").toUpperCase()+s.slice(1)).join("");return t[0]+e}function ne(i){const t={};return i.split(";").forEach(e=>{const[s,n]=e.split(":");if(!s)return;const r=se(s.trim());t[r]=(n??"").trim()}),t}let B=class extends Z{#t={};constructor(t){super(d.ELEMENT_NODE,t)}get innerText(){return this.textContent}set innerText(t){this.textContent=ee(t.toString())}get style(){return this.#t}set style(t){if(typeof t=="string"){const e=ne(t);for(const s in e)this.#t[s]=(e[s]??"").toString()}}};class at extends L{constructor(){super(d.TEXT_NODE,"#text")}}function ie(i){let t="";for(const e of i){const{name:s}=e;let{value:n}=e;Zt.has(s)?n!==!1&&n!==0&&n!==void 0&&n!==null&&(t+=` ${s}`):(Array.isArray(n)?n=n.join(","):n===!0?n="true":n===!1?n="false":n===void 0?n="undefined":n===null?n="null":typeof n=="function"?n=`return(${n.toString()}).call(this,window.event)`:n=n.toString(),n=n.replace(/"/ug,'\\"'),n=$t(n),t+=` ${s}="${n}"`)}return t}function re(i){let t="";return t=i.replace(/([A-Z])/ug,(e,s)=>`-${s.toLowerCase()}`),t}function oe(i){let t="";for(const e in i){const s=i[e];t+=`${re(e)}:${s};`}return t.trim()}function le(i,t,e,s=!1){let n="",r="",o="";t&&(r=e,o=`
`);const l=te.has(i.tagName),h=ie(i.attributes);let f="";Object.keys(i.style).length>0&&(f=` style="${oe(i.style)}"`),s&&(n+=o),n+=r,i.tagName&&(n+=`<${i.tagName.toLowerCase()}${h}${f}`,n+=l?"":">"),n+=i.textContent;let c="";for(const a of i.childNodes)c+=Dt(a,t,e+t,!0);return c&&(n+=c+o+r),i.tagName!==""&&(n+=l?"/>":`</${i.tagName.toLowerCase()}>`),n}function fe(i,t,e){let s="",n="";return t&&(s=e,n=`
`),`${n}${s}<!--${i.textContent}-->`}function he(i,t,e){let s="",n="";return t&&(s=e,n=`
`),`${n}${s}${i.textContent}`}function Dt(i,t,e,s=!1){switch(i.nodeType){case d.ELEMENT_NODE:{if(!(i instanceof B))throw new Error("");return le(i,t,e,s)}case d.TEXT_NODE:{if(!(i instanceof at))throw new Error("");return he(i,t,e)}case d.COMMENT_NODE:{if(!(i instanceof ct))throw new Error("");return fe(i,t,e)}}return""}function ce(i,{indent:t=""}){let e="",s=0;for(const n of i.childNodes){s+=1;const r=s>1;e+=Dt(n,t,"",r)}return e}class Pt extends L{constructor(){super(d.DOCUMENT_FRAGMENT_NODE,"#document-fragment")}}class ae extends L{ELEMENT_NODE=d.ELEMENT_NODE;ATTRIBUTE_NODE=d.ATTRIBUTE_NODE;TEXT_NODE=d.TEXT_NODE;CDATA_SECTION_NODE=d.CDATA_SECTION_NODE;PROCESSING_INSTRUCTION_NODE=d.PROCESSING_INSTRUCTION_NODE;COMMENT_NODE=d.COMMENT_NODE;DOCUMENT_NODE=d.DOCUMENT_NODE;DOCUMENT_TYPE_NODE=d.DOCUMENT_TYPE_NODE;DOCUMENT_FRAGMENT_NODE=d.DOCUMENT_FRAGMENT_NODE;#t;#e=[];constructor(){super(d.DOCUMENT_NODE,"#document");const t=new B("html"),e=new B("head"),s=new B("body");t.appendChild(e),t.appendChild(s),this.#e.push(t),this.#t=s}get body(){return this.#t}get children(){return this.#e}get parentElement(){return null}createDocumentFragment(){return new Pt}createComment(t=""){const e=new ct;return e.textContent=t,e}createElement(t){return new B(t)}createTextNode(t){const e=new at;return e.textContent=t,e}}class ue{Comment=ct;DocumentFragment=Pt;Element=Z;HTMLElement=B;Node=L;Text=at;DOMException=q;Error=Error;TypeError=TypeError;document;constructor(){this.document=new ae}}const ot=new WeakMap,ut=new WeakMap;function tt(i){return ut.get(i)}function kt(i){return ut.has(i)}function me(i,t){ut.set(i,t);const e=ot.get(t.target);e?e.has(i)||e.add(i):ot.set(t.target,new Set([i]))}function de(i){return ot.get(i)}function v(i){return b(i)&&kt(i)}function pe(i,t){const e=tt(i);if(!e)throw new Error("The first argument in setState() must be a state object");if(!b(t))throw new Error("The new state in setState() must be Object or Array");const{key:s,parent:n}=e;n&&(n[s]=t)}const y={CREATE:1,UPDATE:3,DELETE:4,ARRAY_COPY_WITHIN:5,ARRAY_LENGTH:6,ARRAY_REVERSE:8,ARRAY_SORT:9,ARRAY_SPLICE:10,ARRAY_SWAP:11},R={if:Symbol("prop-if"),for:Symbol("prop-for"),reactive:Symbol("prop-reactive")},_t=Symbol("Access"),Ee=Symbol("ObserverAccessProp"),x=Symbol("EmptyHandlerElements");function ye(i){let t;for(const e of i)t=e;return t}function ge(i,t){let e=-1;for(const s of i)if(e+=1,e===t)return s}function be(i,t){let e=-1;if(!i.has(t))return e;for(const s of i)if(e+=1,s===t)break;return e}function Te(i,t,e){if(!i.has(t)||!i.has(e))throw new Error("Cannot move one element after another, because one element is missing");if(t===e)throw new Error("Cannot move an element after itself");const s=new Set;let n=1;for(const r of i)n===1?(r!==t&&s.add(r),r===e&&(n=2)):n===2?(s.add(t),s.add(r),n=3):n===3&&r!==t&&s.add(r);return n===2&&s.add(t),s}function gt(i,t){const e=new Set;let s=-1;for(const n of i)s+=1,s>=t&&e.add(n);return e}const et=Object.freeze(new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","command","keygen","menuitem"]));class mt{tagName="-";parent=this;children=[];attributes={};newChild(t,e){const s=new mt;return s.parent=t,s.attributes=e,this.children.push(s),s}}class we{#t="";#e="";#s="";#i={};#n;#r;#a=[];#l=this.#T;#h="";#f="";#p={};#u="";#E="";#m="";#w=new mt;#o=this.#w;constructor(t,e){this.#a=this.#C(t,e),this.#b()}generate(t){if(this.#u||this.#E)throw new Error("Some HTML tag is not closed");return this.#y(t,this.#w)}#S(t,e){return typeof t=="function"?typeof e=="function"?e:t:typeof t=="string"&&(typeof e=="string"||typeof e=="number"||typeof e=="boolean")?t+e.toString():e}#y(t,e){const s=[];for(const n of e.children){let r=null;n.tagName==="$if"||n.tagName==="if"?r=t.$if(zt(n.attributes.condition??""),()=>{this.#y(t,n)}):n.tagName==="$repeat"||n.tagName==="for"?"iterations"in n.attributes?r=t.$repeat(0,parseInt(n.attributes.iterations??0)-1,()=>{this.#y(t,n)}):("from"in n.attributes||"to"in n.attributes)&&(r=t.$repeat(parseInt(n.attributes.from??0),parseInt(n.attributes.to??0),()=>{this.#y(t,n)})):n.tagName==="$each"||n.tagName==="forEach"?"object"in n.attributes&&(r=t.$each(n.attributes.object??{},()=>{this.#y(t,n)})):(r=t.$element(n.tagName,n.attributes,this.#y(t,n)),s.push(r))}return s}#g(){const t=this.#o,e=this.#i;Object.keys(this.#p).length>0&&(e.style=this.#p);const s=this.#o.newChild(t,e);s.tagName=this.#u,this.#o=s}#C(t,e=[]){const s=[];for(let n=0;n<t.length;n++)t[n]&&s.push(t[n]),e[n]!==void 0&&s.push(e[n]);return s}#b(){for(let t=0;t<this.#a.length;t++)if(typeof this.#a[t]=="string")for(let e=0;e<this.#a[t].length;e++)this.#n=this.#a[t][e],this.#r=this.#a[t][e-1],this.#l();else this.#n=this.#a[t],this.#r=void 0,this.#l()}#d(t,e){t&&(this.#i[t]=typeof e=="string"?e.trim():e)}#c(t){t===this.#A&&(this.#t="",this.#s="",this.#e=""),this.#l=t}#I(t,e){t&&(this.#p[t]=typeof e=="string"?e.trim():e)}#A(){O(this.#n)||(this.#n==="/"?(et.has(this.#u)&&this.#g(),this.#c(this.#R)):this.#n===">"?(this.#g(),this.#c(this.#T)):this.#n==="="?this.#c(this.#M):this.#t+=this.#n)}#M(){O(this.#n)||(this.#n==="'"||this.#n==='"'?(this.#e=this.#n,this.#c(this.#t==="style"?this.#x:this.#O)):(this.#e=" ",this.#s=this.#S(this.#s,this.#n),this.#c(this.#O)))}#O(){this.#n===">"&&this.#r!=="/"?(this.#e&&this.#t&&this.#s&&this.#d(this.#t,this.#s),this.#t="",this.#s="",this.#e="",this.#c(this.#T),this.#g()):this.#n===this.#e||this.#e===" "&&O(this.#n)?(this.#d(this.#t,this.#s),this.#c(this.#A)):typeof this.#n=="object"||typeof this.#n=="function"?this.#s=this.#n:this.#s+=this.#n}#T(){O(this.#n)||(this.#n==="<"?(this.#u="",this.#i={},this.#c(this.#N)):(this.#r===" "?this.#m=this.#r+this.#n:this.#m=this.#n,this.#u="",this.#i={},this.#g(),this.#c(this.#v)))}#x(){O(this.#n)||(this.#n===">"?this.#c(this.#T):this.#n===this.#e||this.#e===" "&&O(this.#n)?this.#c(this.#A):this.#n===":"?this.#c(this.#L):this.#h+=this.#n)}#L(){this.#n===">"?this.#c(this.#T):this.#n===";"?(this.#I(this.#h,this.#f),this.#h="",this.#f="",this.#c(this.#x)):this.#n===this.#e?(this.#I(this.#h,this.#f),this.#h="",this.#f="",this.#c(this.#A)):this.#f=this.#S(this.#f,this.#n)}#N(){if(O(this.#n))this.#u!==""&&this.#c(this.#A);else if(this.#n==="/"&&et.has(this.#u))this.#o.tagName||(this.#o=this.#o.parent),this.#g(),this.#c(this.#R);else if(this.#n===">"){if(!this.#u)throw new Error("Expected tag name, found >");this.#o.tagName||(this.#o=this.#o.parent),this.#g(),this.#c(this.#T)}else this.#r==="<"&&this.#n==="/"?(this.#u,this.#E="",this.#c(this.#R)):this.#u+=this.#n}#R(){if(!O(this.#n))if(this.#n===">"){if(this.#o.tagName&&this.#o.tagName!=="-"&&!et.has(this.#o.tagName)&&this.#o.tagName!==this.#E)throw new Error(`Expected ${this.#o.tagName} tag to be closed, but ${this.#E} found`);this.#u="",this.#E="",this.#o.tagName?this.#o=this.#o.parent:this.#o=this.#o.parent.parent,this.#c(this.#T)}else this.#E+=this.#n}#v(){this.#n==="<"?(this.#i={},this.#o.attributes.textContent=this.#m,this.#c(this.#N)):(this.#m=this.#S(this.#m,this.#n),this.#o.tagName||(this.#o.attributes.textContent=this.#m))}}const p={state:null,bindFn:null,element:null,elementProp:"",elementInnerProp:"",repaintFn:null};function Q(i,t,e,s,n,r){p.state=i,p.bindFn=t,p.element=e,p.elementProp=s,p.elementInnerProp=n,p.repaintFn=r}function _(){p.state=null,p.bindFn=null,p.element=null,p.elementProp="",p.elementInnerProp="",p.repaintFn=null}const A=new WeakMap,S=new WeakMap;function Ae(i,t,e,s,n,r,o){n===R.reactive&&(t=n),Ce(i,t,e,{element:s,elementProp:n,elementInnerProp:r,repaintFn:o},s)}function lt(i,t,e){const s=S.get(i);if(!s)return;let n=s.length;for(;n>0;){n-=1;const r=s[n];if(!r)continue;const[o,l,h]=r;A.get(o)?.get(l)?.delete(h);const f=A.get(o);if(f){const c=f.get(l);c&&(c.delete(h),c.size===0&&(f.delete(l),f.size===0&&A.delete(o)))}}S.delete(i)}function X(i){if(lt(i),!i.hasChildNodes())return;const t=i.childNodes;let e=t.length;for(;e>0;)e-=1,X(t[e])}function ft(i,t=!0){if(!i||!b(i))return;const e=A.get(i);if(e){for(const[s,n]of e)for(const[r,o]of n)for(const l of o){const h=l.element,f=S.get(h);if(!f)continue;let c=f.length;for(;c>0;){c-=1;const a=f[c];a&&a[0]===i&&f.splice(c,1)}f.length===0&&S.delete(h)}A.delete(i)}if(t)for(const s in i)ft(i[s],!0)}function Se(i,t,e,s,n){const r=S.get(i);let o=S.get(t);if(o||(o=[],S.set(t,o)),!r)return;const l=o.length;let h=r.length;for(;h>0;){h-=1;const f=r[h];if(!f)continue;const[c,a,E]=f;if(s&&E!==s)continue;const u=W(c,a);if(u){const m=u.get(E);if(m){for(const T of m)if(T.element===i&&(T.element=t,n))for(const C in n)T[C]=n[C]}}o.splice(l,0,f),r.splice(h,1)}r.length===0&&S.delete(i)}function Ne(i,t){const e=A.get(i);if(!e)return;let s=A.get(t);s||(s=new Map,A.set(t,s));for(const[n,r]of e){let o=s.get(n);o||(o=new Map,s.set(n,o));for(const[l,h]of r){let f=o.get(l);f||(f=[],o.set(l,f));for(const c of h){const{element:a}=c;f.push(c);const E=S.get(a);if(E)for(const u of E)u[0]===i&&(u[0]=t)}}}A.delete(i)}function W(i,t){const e=A.get(i);if(e)return e.get(t)}function Ce(i,t,e,s,n){let r=!1;const o=A.get(i);if(o){const l=o.get(t);if(l){const h=l.get(e);if(!h)l.set(e,[s]),r=!0;else{let f=!1;for(const c of h)if(c.element===s.element&&c.elementProp===s.elementProp&&c.elementInnerProp===s.elementInnerProp&&c.repaintFn===s.repaintFn){f=!0;break}f||(h.push(s),r=!0)}}else{const h=new Map;h.set(e,[s]),o.set(t,h),r=!0}}else{const l=new Map;l.set(e,[s]);const h=new Map;h.set(t,l),A.set(i,h),r=!0}if(r){const l=S.get(n);if(l)l.push([i,t,e]);else{const h=[],f=[i,t,e];h.push(f),S.set(n,h)}}}class xe{#t=[];get translations(){return this.#t}translate(t){if(typeof t=="string"){const e=this.#s(t,this.#t);if(typeof e=="string")return e;const s=Yt(),n=this.#s(t,s.paintorTranslations);if(typeof n=="string")return n}return t}translateArray(t){return this.translate(rt.apply(null,this.#e(t)))}useTranslations(...t){for(const e of t)if(Array.isArray(e))for(const s of e)this.#t.includes(s)||(this.#t=[...this.#t,s]);else e instanceof Object&&(this.#t.includes(e)||(this.#t=[...this.#t,e]))}#e(t){if(this.#t.length===0)return t;const e=new Array(t.length);for(let s=0;s<t.length;s++)e[s]=this.translate(t[s]);return e}#s(t,e){if(e){for(const s of e)if(t in s)return s[t]}return!1}}const Ft=Object.freeze(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","slot","small","source","span","strong","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"]);class H{elements=new Set;addElement(t){t&&this.elements.add(t)}addElements(t){for(const e of t)this.elements.add(e)}getElements(){return this.elements}hasElement(t){return this.elements.has(t)}importElements(t){const e=t.getElements();for(const s of e)this.addElement(s)}moveElementAfterAnother(t,e){return Te(this.elements,t,e)}removeAllElements(){this.elements.clear()}removeTheseElements(t){for(const e of t)this.elements.delete(e)}replaceElements(t){this.elements=t}}function Y(i,t=!1){if(P.length>0){if(i===void 0)return t?P.shift():P.pop();if(N(i))return t?P.shift():P.pop(),i}return i}function bt(i,t,...e){let s;if(typeof t=="function")return t.css&&i.$css(t.css.strings,t.css.keys),s=N(t)?t(i):t(...e),s}function F(i,t){return t.css&&i.$css(t.css.strings,t.css.keys),t(i)}function J(i,t){for(;;){if(Array.isArray(t)){for(const e of t)J(i,e);break}if(typeof t=="function"&&N(t)){t=t(i);continue}if(typeof t=="boolean"||typeof t=="string"||typeof t=="number")return t;break}}function Le(i,t,e,s){if(Number.isNaN(t)||Number.isNaN(e)||t===1/0||e===1/0||t===-1/0||e===-1/0)return!0;if(typeof t!="number"||typeof e!="number")return new Error('"start" and "end" arguments should be numbers');if(typeof s!="function")return new Error('"handler" argument should be a Function');if(e>=t)for(let n=t;n<=e&&bt(i,s,n)!==!1;n++);else for(let n=t;n>=e&&bt(i,s,n)!==!1;n--);return!0}function Tt(i,t,e,s,n,r,o,l){if(typeof s!="function")throw new TypeError('"handler" argument should be a Function');const h=tt(e),f=h?h.target:e,c=t===2&&!!h;if(f instanceof Map||f instanceof Set)if(r===void 0){f.size===0&&typeof n=="function"&&(n(),l?.(x));for(const[a,E]of f.entries())if(ht(i,s,a,E,o,l)===!1)break}else{const a=f instanceof Set?r:f.get(r);ht(i,s,r,a,o,l)}else if(b(f))if(c&&e[_t],r===void 0){It(f)===0&&typeof n=="function"&&(n(),l?.(x));for(const a in f)if(wt(i,s,a,e,o,l)===!1)break}else wt(i,s,r,e,o,l);else throw new TypeError(`The state argument should be an Object or an Array, but instead it is ${f}`);return!0}function ht(i,t,e,s,n,r){let o=s;n&&(o=n?.call(i,o));let l=t(o,e);return l=J(i,l),r?.(e),l}function wt(i,t,e,s,n,r){const o=s[e];return ht(i,t,e,o,n,r)}const M=new WeakMap;class Oe{mapKeyToElements=M;#t;#e;#s;#i;#n;constructor(t,e,s,n,r){this.#t=t,this.#e=e,this.#s=s,this.#i=n,this.#n=r}create(t,e,s){let n=null;if(Array.isArray(t)){let o=parseInt(s);for(;o--;)if(t[o]!==void 0){n=String(o);break}}else{const o=Object.keys(t),l=o.indexOf(s)-1;l>-1&&(n=o[l])}let r=this.#e;if(n!==null){const o=M.get(this.#s);if(o){const l=o[n];r=l&&l.size>0?ye(l):r}}this.createElements(e,r,s)}delete(t){this.#a(this.#e,this.#s,t)}update(t,e,s){this.delete(s),this.create(t,e,s)}arraySort(t,e){for(let s=0,n=t.length;s<n;s++){const r=s.toString();this.delete(r),this.create(t,e,r)}}arraySplice(t,e,s){const n=M.get(this.#s);if(Array.isArray(n)){let[r,o,...l]=s;if(r=I(r),o=I(o),o===1/0?o=t.length-r:o<0&&(o=0),o>0)for(let f=r,c=r+o;f<c;f++){const a=f.toString();this.delete(a)}const h=Array(l.length);if(n.splice(r,o,...h),l.length>0)for(let f=r;f<r+l.length;f++){const c=f.toString();this.create(t,e,c)}n.length=t.length}}arrayReverse(t,e){for(let s=0,n=t.length;s<n;s++){const r=n-1-s;if(s>=r)break;this.arraySwap([s,r])}}arraySwap(t){let[e,s]=t;e=I(e),s=I(s);const n=M.get(this.#s);if(Array.isArray(n)){const r=n[e],o=n[s];if(r&&o){if(r.size>0){let h=this.#e,f=e;for(;f--;){const c=n[f];if(!c)continue;const a=c.size;if(a>0){h=c[a-1];break}}h.after(...o)}if(o.size>0){let h=this.#s;for(let f=s+1;f<n.length;f++){const c=n[f];if(!c)continue;if(c.size>0){h=c[0];break}}h.before(...r)}const l=n[s];n[s]=n[e],n[e]=l}}}arrayCopyWithin(t,e,s){let[n,r,o]=s;n=I(n),r=I(r),o=I(o);for(let l=r,h=n;l<o;l++,h++){const f=h.toString();this.delete(f),this.create(t,e,f)}}arrayLength(t,e){let s=e?.[0]??0;s=I(s);const n=M.get(this.#s);if(Array.isArray(n)){const r=n.length;if(s<r)if(s===0)this.#a(this.#e,this.#s,"*",!0);else{let o=r;for(;o>0&&(o-=1,!(o<s));){if(n[o]===void 0)continue;const l=o.toString();this.#a(this.#e,this.#s,l,!0)}}n.length=s}}createElements(t,e,s){if(this.#n!==void 0&&this.#n!==s)return;let n=!1;this.#e.parentElement&&(this.#t.push(new H),n=!0);const r=this.#t.length-1,o=this.#i(t,this.#t[r],s,!1),l=M.get(this.#s);if(o[x])this.#r(o[x],l,s,e);else for(const h in o){const f=o[h];this.#r(f,l,s,e)}n&&this.#t.pop()}#r(t,e,s,n){s!==x&&s!==void 0&&(e[s]=t);const r=this.#t.length-1;for(const o of t)r===0&&this.#t.length>r&&this.#t[r].moveElementAfterAnother(o,n),n.after(o),n=o}#a(t,e,s,n=!0){const r=M.get(e);if(r)if(s==="*"){if(t!==e&&t.previousElementSibling===null&&e.nextElementSibling===null){for(const l in r)this.#l(r,l,n,!1);const o=t.parentElement;o&&(o.textContent="",o.appendChild(t),o.appendChild(e))}else for(const o in r)this.#l(r,o,n,!0);Array.isArray(r)&&(r.length=0)}else this.#l(r,s,n,!0)}#l(t,e,s=!0,n=!0){const r=t[e];if(r){for(const o of r)M.has(o)&&this.#a(o,o,"*"),s&&X(o),n&&o.remove();delete t[e]}}}class Ie{mapKeyToElements;#t;#e;#s;#i;constructor(t,e,s,n,r,o,l){this.#e=t,this.#s=s,this.#i=l,this.#t=new Oe(e,s,n,r,o),this.mapKeyToElements=this.#t.mapKeyToElements}repaint(t,e,s,n,r){if(!(this.#e||!b(e))){switch(t){case y.CREATE:{this.#t.create(e,s,n);break}case y.DELETE:{this.#t.delete(n);break}case y.UPDATE:{this.#t.update(e,s,n);break}case y.ARRAY_SPLICE:{this.#t.arraySplice(e,s,r);break}case y.ARRAY_REVERSE:{this.#t.arrayReverse(e,s);break}case y.ARRAY_SWAP:{this.#t.arraySwap(r);break}case y.ARRAY_COPY_WITHIN:{this.#t.arrayCopyWithin(e,s,r);break}case y.ARRAY_SORT:{this.#t.arraySort(e,s);break}case y.ARRAY_LENGTH:{this.#t.arrayLength(e,r);break}}this.#i&&(!Array.isArray(e)||n==="")&&It(e)===0&&this.#t.createElements(s,this.#s,void 0)}}}let At=0;class j{#t=[new H];#e=null;#s;#i=!0;#n=null;#r=this;#a=[];#l;#h;#f=[];#p=new Map;#u=null;constructor(t,e,s,n){this.#h=t,this.#s=t.document,this.#i=this.#s.baseURI==="",this.#e=e,this.#a=s,this.#l=n;for(const r of[...Ft,"$css","$html","$if","$repeat","$each","$state","html","if","for","forEach","forState","style"])this[r]=this[r].bind(this)}static lastTemplateTreeToRender=null;$element(t,...e){const s=t?this.#s.createElement(t):this.#s.createTextNode("");let n=new Set,r=0;for(let l of e)if(r+=1,l=Y(l,!0),l!==void 0)if(typeof l=="string"){const h=this.#s.createTextNode(this.#l.translate(l));K(h,n)}else if(typeof l=="number"){const h=this.#s.createTextNode(l.toString());K(h,n)}else if(typeof l=="function")if(N(l)){const h=l;this.#M(h,n),this.#m(!1)}else if(this.#i)s.innerHTML=`(${l.toString()})()`;else if(s instanceof HTMLScriptElement){const h=this.#s.createTextNode(`(${l.toString()})()`);s.appendChild(h)}else"value"in s&&!(s instanceof HTMLLIElement)?this.#o(s,{value:l}):this.#o(s,{textNode:l});else if(l instanceof this.#h.Node)K(l,n);else if(Array.isArray(l)){const h=l;if(h.length===0)continue;let f=!1;for(const c of h)if(c instanceof this.#h.Node){f=!0;break}if(f)Et(l,n);else{const c=this.#s.createTextNode(this.#l.translateArray(l));K(c,n)}}else if(l instanceof Set){if(l.size===0)continue;Et(l,n),this.#m(!1)}else l instanceof Error?s.textContent=this.#l.translate(l.message):r===1&&b(l)&&this.#o(s,l);const o=this.#t.length-1;if(n.size>0){const l=this.#t[o].getElements(),h=ge(n,0),f=be(l,h);f>-1&&n.size<l.size-f&&(n=gt(l,f))}if(yt(s,n),this.#t[o].removeTheseElements(n),this.#t[o].addElement(s),this.#u){const h=(o===0?this.#f.at(0):this.#u)?.paintorClassName;if(h&&(s.className=s.className?h+" "+s.className:h,o!==0))for(const f of n)f.classList&&f.classList.remove(h)}return s}$css(t,...e){if(typeof t=="string")this.#w(t);else if(Array.isArray(t)&&"raw"in t&&Array.isArray(e)){let s="";const n=t.length;for(let r=0;r<n;r++)s+=(t[r]??"")+(e[r]??"");this.#w(s)}else t instanceof CSSStyleSheet&&(this.#f.includes(t)||this.#f.push(t))}$html(t,...e){const s=e.length===0&&this.#l.translations.length===0?this.#y(Array.isArray(t)?t[0]??"":t):this.#g(Array.isArray(t)?t:[t],...e);for(const n of s)n.tagName===""&&(n.textContent=this.#l.translate(n.textContent));return s}$if(t,e,s){const n=arguments.length>2?Y(s):void 0,r=Y(e),o=l=>{!!l[0]?r&&this.#x(r):n&&this.#x(n)};return typeof t=="function"?this.#O("if",[t],!0,o):this.#A(t,o)}$each(t,e,s){return v(t)?this.#d(t,e,s):this.#b(t,e,s)}$repeat(t,e,s){const n=Y(s),r=o=>{const l=parseInt(o[0]),h=parseInt(o[1]),f=Le(this.#r,l,h,n);f instanceof Error&&console.error(f)};return this.#O("for",[t,e],!0,r)}$state(t,e,s){const n=tt(t);if(n){const r=n.parent;if(!r||!v(r))throw new Error("The state must be a part of a state");const o=n.key,l=(h,f)=>{if(f===o)return N(e)?J(this.#r,e):J(this.#r,e(h))};return this.#d(r,l,s,o)}return this.#d(t,e,s)}getCreatedElements(){if(!this.#t[0])throw new Error("Missing data");return this.#t[0].getElements()}getHtmlCode(t){let e="";if(this.#i){const s=this.#e;s&&(e=ce(s,t))}return e}style(t,...e){if(Array.isArray(t)&&"raw"in t&&Array.isArray(e)){let s="";const n=t.length;for(let r=0;r<n;r++)s+=(t[r]??"")+(e[r]??"");return this.$element("style",s)}return this.$element("style",t)}async render(){j.lastTemplateTreeToRender=this.#r,this.#t=[new H];for(const t of this.#a)if(typeof t=="function"){let e=F(this.#r,t);if(e instanceof Promise&&(e=await e),e&&typeof e=="string")this.$html(e);else if(typeof e=="function"&&N(e))F(this.#r,e);else if(Array.isArray(e))for(const s of e)typeof s=="function"&&N(s)&&F(this.#r,s);this.#m(!0)}this.#E(),Wt()}#E(){const t=this.#e;if(t){const e=this.getCreatedElements();yt(t,e)}}#m(t=!1){if(this.#f.length!==0){if(t)for(const e of this.#f)document.adoptedStyleSheets.push(e);t&&(this.#f=[])}}#w(t){if(!t)return;let e=this.#p.get(t);if(!e){e=new CSSStyleSheet,e.replaceSync(t),At+=1;for(const s of e.cssRules){const n=s.selectorText,r=n.split(","),o="--"+At;for(let l=0;l<r.length;l++)(r[l]??"").startsWith(":")||(r[l]=n+"."+o);e.paintorClassName=o,s.selectorText=r.join(",")}this.#p.set(t,e)}this.#f.includes(e)||this.#f.push(e),this.#u=e}#o(t,e,s){for(const n in e){let r=e[n];if(this.#i){if(Rt(n)&&typeof r=="function"){G(t,n,r);continue}}else if(typeof r=="function"&&Qt(t,n,r))continue;if(typeof r=="function"){const o=r;Q(null,o,t,n,"",null);let l=o(t);if(N(l)){_(),s&&s();continue}else if(typeof l=="function")l=l();else if(n==="textNode"){_();const h=this.#s.createTextNode(l);t.appendChild(h),Se(t,h,void 0,o,{elementProp:"textContent"});continue}_(),l=pt(l)?this.#l.translate(l):this.#l.translateArray(l),n&&G(t,n,l)}else n==="style"&&b(r)&&t instanceof this.#h.HTMLElement?this.#S(t,r):n==="data"&&b(r)&&t instanceof this.#h.HTMLElement?Xt(t,r):n==="textContent"?t[n]=pt(r)?this.#l.translate(r):this.#l.translateArray(r):((n==="innerText"||n==="value"&&t.tagName==="INPUT"&&(t.getAttribute("type")??"").toLowerCase()==="button")&&(r=this.#l.translate(r)),G(t,n,r))}}#S(t,e){if(e.constructor&&e.constructor.name!=="Object")throw new Error(`style() doesn't support ${e.constructor.name} as input`);for(const s in e){const n=e[s];let r="";if(typeof n=="function"){const o="style",l=n;Q(null,l,t,o,s,null),r=l(t),_()}else r=n;typeof s=="string"&&vt(t,s,r)}}#y(t){let e=[];if(this.#i){const n=this.#s.createElement("");n.innerHTML=t??"",e=[n]}else{this.#n||(this.#n=this.#s.createElement("template"));const n=this.#n;n.innerHTML=t.trim()??"",e=Array.from(n.content.childNodes),n.innerHTML=""}const s=this.#t.length-1;return this.#t[s].addElements(e),e}#g(t,...e){return new we(t,e).generate(this)}#C(t){return this.#l.translate(t)}#b(t,e,s){const n=r=>{Tt(this.#r,1,r[0],e,s,void 0,this.#C)};return this.#A(t,n)}#d(t,e,s,n){let r=null;if(!v(t))return new Error("The input object must be a state");const o=(l,h,f,c=!1)=>{const a=c?[]:{};let E=h.getElements().size;const u=m=>{const T=h.getElements(),C=E===0?T:gt(T,E);if(m===x){if(r)return;r=C}else if(r){for(const V of r)X(V),V.remove();r=null}m===x?Object.defineProperty(a,m,{value:C,configurable:!0,enumerable:!1,writable:!1}):a[m]=C,E=T.size};return Tt(this.#r,2,l,e,s,f,this.#C,u),a};return this.#T(t,o,typeof s=="function",n)}#c(t,e){if(!this.#e?.contains(t))return!1;let s=t;for(const n of e)qt(n,s),s=n;return!0}#I(t,e){let s=t.nextSibling;for(;s&&s!==e;){X(s);const n=s;s=s.nextSibling,n.remove()}}#A(t,e){const{thisLevel:s,upperLevel:n}=this.#L();return e([t]),this.#N({thisLevel:s,upperLevel:n})}#M(t,e){const{thisLevel:s,upperLevel:n}=this.#L();F(this.#r,t);const r=this.#t[s]?.getElements()??new Set;jt(r,e),this.#N({thisLevel:s,upperLevel:n})}#O(t,e,s,n){const{thisLevel:r,upperLevel:o}=this.#L(),l=new Array(e.length);let h=!1;for(const f of e)if(typeof f=="function"){h=!0;break}if(h){const f=this.#s.createComment(`${t}-begin`),c=this.#s.createComment(`${t}-end`);s&&this.#t[r].addElement(f);const a=()=>{if(this.#i)return;const m=this.#t.length-1;this.#t[m].removeAllElements(),this.#I(f,c),n(l,!1,null,null),this.#c(f,this.#t[m].getElements())||console.error("Element ",f," does not exist anymore")},E=f,u=R[t]??"";for(let m=0;m<l.length;m++){const T=e[m];typeof T=="function"?(Q(null,T,E,u,"",V=>{l[m]=V,a()}),l[m]=T(),_()):l[m]=e[m]}n(l,!0,f,c),s&&this.#t[r].addElement(c)}else n(e,!1,null,null);return this.#N({thisLevel:r,upperLevel:o})}#T(t,e,s,n){const{thisLevel:r,upperLevel:o}=this.#L(),l=this.#s.createComment("reactive-begin"),h=this.#s.createComment("reactive-end"),f=this.#t[r];if(!f)throw new Error(`There are no collected elements at level ${r}`);f.addElement(l);const c=new Ie(this.#i,this.#t,l,h,e,n,s),a=(...C)=>{c.repaint(...C)},E=R.reactive;Q(t,()=>t,h,E,"",a);const m=Array.isArray(t),T=e(t,f,void 0,m);return Object.hasOwn(T,x)&&delete T[x],c.mapKeyToElements.set(h,T),_(),f.addElement(h),this.#N({thisLevel:r,upperLevel:o})}#x(t){if(typeof t=="function"){if(N(t)){F(this.#r,t);return}const e=F(this.#r,t);this.#x(e)}}#L(){this.#t.push(new H);const t=this.#t.length-1,e=t-1;return{thisLevel:t,upperLevel:e}}#N({thisLevel:t,upperLevel:e}){const s=this.#t[t],n=this.#t[e];if(!(s instanceof H)||!(n instanceof H))throw new Error("Missing data");const r=s.getElements()??new Set;return n.importElements(s),s.replaceElements(new Set),delete this.#t[t],this.#t.pop(),r}}function Me(...i){const t=this;return function(...s){return t.call(this,...i,...s)}}const{prototype:w}=j;w.createElement=w.$element;w.if=w.$if;w.for=w.$repeat;w.forEach=w.$each;w.forState=w.$state;w.html=w.$html;Object.assign(w.$element,{bindArgs:Me});Ft.forEach(i=>{w[i]=w.$element.bindArgs(i)});class Re{#t;#e;#s;constructor(t,e,s){this.#t=t,this.#e=e,this.#s=s}getArrayFunction(t){return t in this?this[t]:this.#t[t]}copyWithin=(...t)=>{const e=this.#t,s=this.#e;let[n,r,o]=t;const{length:l}=e;if(n<0)n+=l;else if(n<-l)n=0;else{if(n>=l)return;n>r&&(o=l-1)}if(r<0)r+=l;else if(r<-l||r===void 0)r=0;else if(r>=l)return;if(o<0)o+=l;else if(o<-l)o=0;else if(o>=l||o===void 0)o=l;else if(o<=r)return;const h=e.copyWithin.apply(e,[n,r,o]);return this.#s(y.ARRAY_COPY_WITHIN,e,s,[n,r,o]),h};fill=(...t)=>{const e=this.#t,s=this.#e,n=e.fill.apply(e,t);let r=t[0];for(let o=0;o<e.length;o++)s[o]=r,o===0&&(r=s[o]);return n};forEach=(t,e)=>{const s=this.#t,n=this.#e;j.lastTemplateTreeToRender?.$each(n,(o,l)=>{t.apply(e,[o,l,s])})};push=(...t)=>{const e=this.#t,s=this.#e;let r=e.length-1;for(const o of t)r+=1,s[r]=o;return r};reverse=()=>{const t=this.#t,e=this.#e,s=t.reverse.apply(t);return this.#s(y.ARRAY_REVERSE,t,e),s};shift=()=>{const t=this.#t,e=this.#e,s=t.length,n=t.shift.apply(t);return this.#s(y.ARRAY_SPLICE,t,e,[0,1]),this.#i(e,s),n};sort=(...t)=>{const e=this.#t,s=this.#e,n=e.sort.apply(e,t);return this.#s(y.ARRAY_SORT,e,s,t),n};splice=(...t)=>{const e=this.#t,s=this.#e,n=e.length,r=e.splice.apply(e,t);return this.#s(y.ARRAY_SPLICE,e,s,t),this.#i(s,n),r};unshift=(...t)=>{const e=this.#t,s=this.#e,n=e.length,r=e.unshift.apply(e,t);return this.#s(y.ARRAY_SPLICE,e,s,[0,0,...t]),this.#i(s,n),r};#i(t,e){const s=t.length;e!==s&&Object.assign(t,{length:s})}}const St=new WeakMap;function ve(i,t,e,s){let n=St.get(t);return n||(n=new Re(t,e,s),St.set(t,n)),n.getArrayFunction(i)}const g={CREATE:0,CHANGE:1,DELETE:2,SET:3},$=new Map;$.set(g.CREATE,new WeakMap);$.set(g.CHANGE,new WeakMap);$.set(g.DELETE,new WeakMap);$.set(g.SET,new WeakMap);const k={prop:void 0,receiver:void 0};function $e(i,t){k.receiver=i,k.prop=t}function De(){return k}function Nt(i,t,e){const s=$.get(i);if(!s)throw new Error(`Wrong observer type ${i}`);const n=s.get(t);if(n)return n.get(e)}function U(i,t,e,s,n){if(s==="length"&&Array.isArray(t))return;const r=Nt(i,e,s);if(r){const l=t[s];for(const h of r)h({key:s,value:l,oldValue:n,state:e,target:t})}const o=Nt(i,e,void 0);if(o){const l=t[s];for(const h of o)h({key:s,value:l,oldValue:n,state:e,target:t})}}function Ct(i,t,e,s){Ht(i);const n=$.get(t);if(!n)throw new Error(`Wrong observer type ${t}`);const r=n.get(i);if(r){const o=r.get(e);o?o.has(s)||o.add(s):r.set(e,new Set([s]))}else{const o=new Map;o.set(e,new Set([s])),n.set(i,o)}}function Pe(i,t,e){if(t&&!$.has(t))throw new Error(`Invalid observer type "${t}"`);Ht(i);const s=k.receiver??i;if(!v(s))throw new Error("Invalid observer receiver");if(t)xt(t,s,k.prop,e);else for(const n in g)xt(g[n],s,k.prop,e)}function Ht(i){v(i)&&(i[Ee],k.prop=void 0)}function xt(i,t,e,s){const n=$.get(i);if(!n)throw new Error(`Wrong observer type ${i}`);const r=n.get(t);if(r){const o=r.get(e);o&&(s?o.delete(s):o.clear())}}const Lt=Symbol("isProxy");class ke{createProxy(t,e,s=null){if(!b(t))throw new Error("Cannot create a Proxy on non-object");if(v(t)||t instanceof Date)return t;const n=this.#t,r=new Proxy(t,n);return b(t)&&(kt(r)||me(r,{key:e,parent:s,target:t})),r}#t={get:(t,e,s)=>e===Lt?!0:b(t[e])&&!t[e][Lt]?(t[e]=this.createProxy(t[e],e,s),t[e]):($e(s,e),Object.hasOwn(t,e)||e===_t?(p.element&&(!p.state||p.state===s)&&Ae(s,e,p.bindFn,p.element,p.elementProp,p.elementInnerProp,p.repaintFn),t[e]):typeof e=="string"&&D(t)&&typeof t[e]=="function"?ve(e,t,s,this.#e):t[e]),set:(t,e,s,n)=>{if(e==="length"&&D(t)){const r=t[e];if(s<r)for(let o=t.length-1;o>=s;o--)ft(t[o],!0);t[e]=s,this.#e(y.ARRAY_LENGTH,t,n,[s]),this.#h(e,t,n,r)}else if(Object.hasOwn(t,e))if(b(s)&&t[e]!==s&&!(s instanceof Date)){if(t[e]!==s){if(b(t[e])&&b(s)){for(const o in s)D(s[o])&&D(t[e][o])&&t[e][o].length!==s[o].length?t[e][o].length=s[o].length:b(s[o])&&b(t[e][o])&&this.#i(e,t,n);for(const o in t[e])o in s||this.#i(o,t,n[e])}const r=t[e];t[e]=s,Ne(r,n[e]);for(const o in t[e])this.#r(o,t[e],n[e]),this.#h(o,t[e],n[e],r);this.#r(e,t,n)}}else if(t[e]!==s){const r=t[e];t[e]=s,this.#i(e,t,n),this.#s(e,t,n),this.#h(e,t,n,r)}else this.#r(e,t,n);else{const r=D(t)?t.length:-1;t[e]=s,this.#a(e,t,n),this.#s(e,t,n),D(t)&&t.length!==r&&(n.length=t.length)}return!0},deleteProperty:(t,e)=>{const s=t[e];ft(s,!0),delete t[e];const n=de(t);if(n)for(const r of n)this.#l(e,t,r,s),this.#i(e,t,r);return!0}};#e=(t,e,s,n)=>{const r=W(s,R.reactive);if(r)for(const[o,l]of r)for(const h of l){const{repaintFn:f}=h;f&&f(t,e,s,"",n)}};#s(t,e,s){this.#n(y.CREATE,t,e,s)}#i(t,e,s){this.#n(y.DELETE,t,e,s)}#n(t,e,s,n){const r=W(n,R.reactive);if(r)for(const[o,l]of r)for(const h of l){const{repaintFn:f}=h;f&&f(t,s,n,e)}}#r(t,e,s){const n=W(s,R.reactive);if(n)for(const[r,o]of n)for(const l of o){const{repaintFn:h}=l;h&&h(y.UPDATE,e,s,t)}}#a(t,e,s){U(g.CREATE,e,s,t),U(g.SET,e,s,t)}#l(t,e,s,n){U(g.DELETE,e,s,t,n)}#h(t,e,s,n){U(g.CHANGE,e,s,t,n),U(g.SET,e,s,t,n);const r=W(s,t);if(r)for(const[o,l]of r)for(const h of l){const{element:f,elementProp:c,elementInnerProp:a,repaintFn:E}=h;let u=o.call(f,f);if(c==="style"&&a)vt(f,a,u);else if(c===R.if||c===R.for)E&&E(u);else{if(typeof u=="function"&&(u=u()),(c==="className"||c==="class")&&f.className.startsWith("--")){const m=f.className.split(" ");typeof u=="string"?u=m[0]+" "+u:Array.isArray(u)&&(u=[m[0],...u])}G(f,c,u)}}}}function Bt(i){if(!(i instanceof Object)&&!Array.isArray(i))throw new Error("state() only accepts Object or Array");const t=tt(i);t&&(i=t.target);const e=new ke,s="",n={"":i};return e.createProxy(n,"",null)[s]}const _e=new ue;class dt{#t=[];#e=[];#s="";#i=!1;#n=!1;#r="";#a="";#l=new Map;#h=new Map;#f=[];#p=new xe;#u=!1;clear(){for(const t of this.#e)for(const e of t)lt(e),e.remove();this.#e.length=0,this.#s="",this.#l.clear(),this.#h.clear()}getElements(){return this.#i?this.#w(null):(this.#b(null,window,!0),this.#e)}getElementsSr(){if(this.#i)return this.#w("");const t=this.#o();return this.#b("",t,!0),this.#e}html(t){if(this.#i)return this.staticHtml(t);const e=this.#o();return this.#b("",e,!0,t),this.#s}paint(t){if(!Mt)throw new Error("You can only use this function in browser environment");if(!t)throw new Error("No container selected.");if(typeof t!="string"&&!(t instanceof HTMLElement)&&!(t instanceof NodeList)&&!Array.isArray(t)&&!(t instanceof HTMLCollection))throw new Error(`Wrong type for the container element. Expected <string> or <Node>, got <${typeof t}>`);this.#b(t,window,!0)}static(t=!0){return this.#i=!!t,!t&&this.#h.size>0&&this.#h.clear(),this}staticHtml(t){const e=this.#p.translations[0]??null;if(!this.#h.has(e)){const s=this.#o();this.#b("",s,!0,t),this.#h.set(e,this.#s)}return this.#h.get(e)??""}useComposables(...t){if(Array.isArray(t))for(const e of t)if(Array.isArray(e))for(const s of e)this.#f.push(s);else this.#f.push(e)}useTranslations(...t){return this.#p.useTranslations(...t),this}#E(){if(this.#t)for(const t of this.#t)for(;t?.firstChild;)t.removeChild(t.firstChild)}#m(t){let e=-1,s=-1;for(const n of this.#t)s+=1,t===n&&(e=s);if(e!==-1){delete this.#t[e];for(const n of this.#e[e]??[])lt(n),n.remove();delete this.#e[e],this.#s="";for(const[n,r]of this.#l)delete r[e];this.#h.clear()}}#w(t){const e=this.#p.translations[0]??null;if(!this.#l.has(e)){const s=this.#o();this.#b(t,s,!0),this.#l.set(e,this.#e)}return this.#l.get(e)??[]}#o(){return _e}#S(t,e){this.#u||(this.#u=!0,this.#e.length=0,this.#s="",this.#y(t,e),this.#g())}#y(t,e){const s=e.document.baseURI==="";if(typeof t=="string")if(this.#r=t,this.#n=!1,Vt(t))this.#n=!0;else{Kt(t)||(this.#a=t);const n=s?[e.document.createElement("#container")]:e.document.querySelectorAll(t);if(this.#t=Array.from(n),!this.#t)throw new Error(`Could not find an element by the following query: ${t}`)}else if(t instanceof HTMLElement)this.#t=[t];else if(t instanceof NodeList||t instanceof HTMLCollection)this.#t=Array.from(t);else if(Array.isArray(t)){for(const n of t)if(!(n instanceof HTMLElement))throw new Error("All elements in the input array must be DOM elements");this.#t=t}return!0}#g(){for(let t=this.#f.length-1;t>=0;t--){const e=this.#f[t];if(e instanceof st&&(this.#f[t]=this.#C(e)),this.#f[t]=Y(this.#f[t]),typeof this.#f[t]!="function")throw new Error("The component must have a template")}return!0}#C(t){if(t instanceof st){if(typeof t.template!="function")throw new TypeError(`Class component ${t.constructor.name} must have a template that is a method`);return t.state=t.state?Bt(t.state):t.state,it(t.template.bind(t))}return it(()=>{})}#b(t,e,s=!0,n={}){this.#S(t,e),s&&this.#E();const r=this.#f;if(!e)throw new Error("Missing window element");if(this.#n){if(customElements.get(this.#r)){const l=document.getElementsByTagName(this.#r);for(const h of l)this.#d(e,h.shadowRoot,r,n);return}const o=l=>class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){if(!this.shadowRoot)throw new Error("Missing shadow root");l.#d(e,this.shadowRoot,r,n)}disconnectedCallback(){l.clear()}};customElements.define(this.#r,o(this))}else if(this.#a&&new MutationObserver(l=>{for(const h of l){const{addedNodes:f,removedNodes:c}=h;for(const a of f)a instanceof HTMLElement&&a.matches(this.#a)&&this.#d(e,a,r,n);for(const a of c)this.#m(a)}}).observe(document.body,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),this.#t.length===0)this.#d(e,null,r,n);else for(const o of this.#t)this.#d(e,o,r,n)}#d(t,e,s,n={}){const r=new j(t,e,s,this.#p);r.render().then(()=>{}),this.#s=r.getHtmlCode(n),this.#e.push(r.getCreatedElements())}}function Ut(...i){const t=new dt;return t.useComposables(...i),t}function Fe(...i){return Ut(...i)}function He(i){return i instanceof dt}const Be=function(){let i="en";return Mt&&(i=document.getElementById("html")?.getAttribute("lang")??i),i},Ue=async function(i,t){if(typeof i!="string")throw new Error("Translation path must be a string");let e=null;const s=i.match(/^(.*?)([^.\/\\]+)(.\w+)$/um);if(s===null)throw new TypeError(`Incorrect path: ${i}`);const n=s[1]+t+s[3];try{e=(await import(n)).default}catch{n!==i&&(e=(await import(i)).default)}if(!(e instanceof Object))throw new TypeError(`Translation at ${n} must export an object`);return e},Ge=async function(...i){const t=Be(),e=[];for(const s of i)e.push(Ue(s,t));return Promise.all(e)};class We{#t;constructor(t){this.#t=t}create(t){return this.#e(g.CREATE,t)}change(t){return this.#e(g.CHANGE,t)}delete(t){return this.#e(g.DELETE,t)}set(t){return this.#e(g.SET,t)}#e(t,e){if(this.#s(e),v(this.#t))Ct(this.#t,t,void 0,e);else{const s=De();if(!s.receiver)throw new Error("Cannot observe a non-state");Ct(s.receiver,t,s.prop,e)}}#s(t){if(!t)throw new Error("You must provide a listener function")}}function Ye(i){switch(i){case"create":return g.CREATE;case"change":return g.CHANGE;case"delete":return g.DELETE;case"set":return g.SET;default:return}}function ze(i){return new We(i)}function je(i,t,e){return Pe(i,Ye(t),e)}function Ve(i){return i}const Qe={ClassComponent:st,component:Fe,compose:Ut,Composition:dt,css:Gt,fetchTranslations:Ge,isComponent:He,isState:v,isTemplate:N,on:ze,off:je,setState:pe,state:Bt,style:Ve,template:it};export{st as ClassComponent,dt as Composition,Fe as component,Ut as compose,Gt as css,Qe as default,Ge as fetchTranslations,He as isComponent,v as isState,N as isTemplate,je as off,ze as on,Qe as paintor,pe as setState,Bt as state,Ve as style,it as template};
//# sourceMappingURL=bundle.js.map
