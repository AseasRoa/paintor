function kt(){return typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||this}function wt(i,...t){const e=/(%?)(%([ojdsif]))/ug;if(i=i??"",t.length>0){const n=(s,r,o,l)=>{const h=t.shift();let f="";switch(l){case"o":Array.isArray(h)&&(f=JSON.stringify(h));break;case"s":f=String(h);break;case"d":f=String(Number(h));break;case"j":f=JSON.stringify(h);break;case"i":f=String(parseInt(String(h),10));break;case"f":f=String(parseFloat(String(h)));break}return r?(t.unshift(f),s):f};i=i.replace(e,n)}return t.length>0&&(i+=` ${t.join(" ")}`),i=i.replace(/%{2,2}/ug,"%"),String(i)}function P(i){return Array.isArray(i)}function b(i){return typeof i=="object"&&typeof i!="function"&&i!==null}function ct(i){return!(i!==null&&(typeof i=="object"||typeof i=="function"))}function I(i){return i===" "||i==="	"||i==="\r"||i===`
`}function At(i){if(i){if(P(i))return i.length;if(i instanceof Map||i instanceof Set)return i.size;if(typeof i=="object")return Object.keys(i).length}return 0}function _t(i){if(i==="true")return!0;if(i==="false")return!1;const t=parseInt(i);return isNaN(t)?!!i:!!t}function v(i){return parseInt(i)}function W(){if(W.isIt===void 0){const i=new Function("try {return this===window;}catch(e){ return false;}");W.isIt=i()}return W.isIt??!1}W.isIt=void 0;const St=W();function C(i,t){t.add(i)}function at(i,t){for(const e of i)t.add(e)}function J(i,t){for(const e of i)t.add(e)}function Nt(i){return i.toLowerCase().indexOf("on")===0}function Ft(i){return/^[a-z][a-z0-9-]+$/u.test(i)&&i.includes("-")}function Ht(i){return/#[a-z0-9-]+\s*$/u.test(i)}function $t(i,t,e){if(!(i instanceof window.Node)||typeof t!="string"||typeof e!="function"||Nt(t)===!1)return!1;const n=t.toLowerCase().substring(2);return i.addEventListener(n,e),!0}function ut(i,t){for(const e of t)i.appendChild(e)}function Bt(i,t){if(!t)return;const{nextSibling:e,parentNode:n}=t;n&&n.insertBefore(i,e)}function Ut(i,t){if(b(t))for(const e in t){const n=(t[e]??"").toString();i.setAttribute(`data-${e}`,n)}}function G(i,t,e){t in i?Array.isArray(e)?i[t]=wt.apply(null,e):i[t]=e??"":"setAttribute"in i&&i.setAttribute(t,e)}function Gt(i,t){let e=t;return(t===!0||t===!1||t===void 0||t===null)&&(i==="display"?e=t?"":"none":i==="flex"?e=t?1:0:(i==="visibility"||i==="backfaceVisibility")&&(e=t?"visible":"hidden")),e}function Ct(i,t,e){i.style[t]=Gt(t,e)}const Yt=Object.freeze(new Set(["async","autofocus","autoplay","checked","contenteditable","controls","default","defer","disabled","formNoValidate","frameborder","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","readonly","required","reversed","scoped","selected","typemustmatch"])),Wt=Object.freeze(new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","command","keygen","menuitem"])),u={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11};class K extends Error{constructor(t,e){super(t),this.name=e??"DOMException"}}class L{nextSibling=null;previousSibling=null;textContent="";#t=[];#e;#n;#i=null;constructor(t,e){this.#n=t,this.#e=e}get baseURI(){return""}get childNodes(){return this.#t}get firstChild(){return this.#t[0]??null}get nodeName(){return this.#e}get nodeType(){return this.#n}get parentNode(){return this.#i}set parentNode(t){this.#i=t}appendChild(t){if(this.nodeType!==u.DOCUMENT_NODE&&this.nodeType!==u.DOCUMENT_FRAGMENT_NODE&&this.nodeType!==u.ELEMENT_NODE)throw new K("This node type does not support this method.");if(this.nodeType===u.DOCUMENT_NODE)throw new K("Failed to execute 'appendChild' on 'Node': Only one element on document allowed.");if(!(t instanceof L)){const n="Failed to execute 'appendChild' on 'Node': parameter 1 is not of type 'Node'.";throw new TypeError(n)}if(this.#t.includes(t))return;if(t===this)throw new K("Failed to execute 'appendChild' on 'Node': The new child element contains the parent.");this.#t.push(t),t.parentNode=this;const e=this.#t.length-2;e>=0&&(this.#t[e].nextSibling=t,t.previousSibling=this.#t[e]??null)}contains(){return!1}insertBefore(t,e){const n=[];for(const s of this.#t)s===e&&n.push(t),n.push(s);return this.#t=n,t}removeChild(t){if(!t)throw new Error("Failed to execute 'removeChild' on 'HTMLElement': parameter 1 is not of type 'HTMLElement'.");if(!this.#t.includes(t))throw new Error("Failed to execute 'removeChild' on 'HTMLElement': The node to be removed is not a child of this node.");return this.#t=this.#t.filter(e=>e!==t),t}}class it extends L{constructor(){super(u.COMMENT_NODE,"#comment")}}function xt(i){let t=i;const e={"&":"&amp;","<":"&lt;",">":"&gt;"};return t=t.replace(/[&<>"]/ug,n=>{let s=n;return n in e&&(s=e[n]??""),s}),t}class q extends L{#t=[];#e="";constructor(t,e){super(t,e.toUpperCase()),this.#e=e.toUpperCase()}get attributes(){return this.#t}get children(){return this.childNodes.filter(t=>t instanceof q)}get className(){let t="";for(const e of this.#t)if(e.name==="class"){t=e.value;break}return t}set className(t){this.setAttribute("class",t)}get innerHTML(){return this.textContent}set innerHTML(t){this.textContent=t}get tagName(){return this.#e}append(t){t instanceof L?this.appendChild(t):this.textContent=xt(t.toString())}getAttribute(t){let e="";if(e=t.trim().toLowerCase(),!e)return null;const n=this.#t.findIndex(s=>s.name===e);return n===-1?null:this.#t[n]?.value??null}remove(){this.parentNode?.removeChild(this)}setAttribute(t,e){let n="";if(n=t.trim().toLowerCase(),!n)return;const s=e,r=this.#t.findIndex(o=>o.name===n);r===-1?this.#t.push({name:n,value:s}):this.#t[r]={name:n,value:s}}}function zt(i){let t=i;const e={"&":"&amp;","<":"&lt;",">":"&gt;"};return t=t.replace(/[&<>"]/ug,n=>{let s=n;return n in e&&(s=e[n]??""),s}),t}function jt(i){const t=i.split("-");if(t.length===1)return t[0];const e=t.slice(1).map(n=>(n[0]??"").toUpperCase()+n.slice(1)).join("");return t[0]+e}function Vt(i){const t={};return i.split(";").forEach(e=>{const[n,s]=e.split(":");if(!n)return;const r=jt(n.trim());t[r]=(s??"").trim()}),t}let $=class extends q{#t={};constructor(t){super(u.ELEMENT_NODE,t)}get innerText(){return this.textContent}set innerText(t){this.textContent=zt(t.toString())}get style(){return this.#t}set style(t){if(typeof t=="string"){const e=Vt(t);for(const n in e)this.#t[n]=(e[n]??"").toString()}}};class rt extends L{constructor(){super(u.TEXT_NODE,"#text")}}function Kt(i){let t="";for(const e of i){const{name:n}=e;let{value:s}=e;Yt.has(n)?s!==!1&&s!==0&&s!==void 0&&s!==null&&(t+=` ${n}`):(Array.isArray(s)?s=s.join(","):s===!0?s="true":s===!1?s="false":s===void 0?s="undefined":s===null?s="null":typeof s=="function"?s=`return(${s.toString()}).call(this,window.event)`:s=s.toString(),s=s.replace(/"/ug,'\\"'),s=xt(s),t+=` ${n}="${s}"`)}return t}function qt(i){let t="";return t=i.replace(/([A-Z])/ug,(e,n)=>`-${n.toLowerCase()}`),t}function Xt(i){let t="";for(const e in i){const n=i[e];t+=`${qt(e)}:${n};`}return t.trim()}function Jt(i,t,e,n=!1){let s="",r="",o="";t&&(r=e,o=`
`);const l=Wt.has(i.tagName),h=Kt(i.attributes);let f="";Object.keys(i.style).length>0&&(f=` style="${Xt(i.style)}"`),n&&(s+=o),s+=r,i.tagName&&(s+=`<${i.tagName.toLowerCase()}${h}${f}`,s+=l?"":">"),s+=i.textContent;let c="";for(const a of i.childNodes)c+=Ot(a,t,e+t,!0);return c&&(s+=c+o+r),i.tagName!==""&&(s+=l?"/>":`</${i.tagName.toLowerCase()}>`),s}function Qt(i,t,e){let n="",s="";return t&&(n=e,s=`
`),`${s}${n}<!--${i.textContent}-->`}function Zt(i,t,e){let n="",s="";return t&&(n=e,s=`
`),`${s}${n}${i.textContent}`}function Ot(i,t,e,n=!1){switch(i.nodeType){case u.ELEMENT_NODE:{if(!(i instanceof $))throw new Error("");return Jt(i,t,e,n)}case u.TEXT_NODE:{if(!(i instanceof rt))throw new Error("");return Zt(i,t,e)}case u.COMMENT_NODE:{if(!(i instanceof it))throw new Error("");return Qt(i,t,e)}}return""}function te(i,{indent:t=""}){let e="",n=0;for(const s of i.childNodes){n+=1;const r=n>1;e+=Ot(s,t,"",r)}return e}class Lt extends L{constructor(){super(u.DOCUMENT_FRAGMENT_NODE,"#document-fragment")}}class ee extends L{ELEMENT_NODE=u.ELEMENT_NODE;ATTRIBUTE_NODE=u.ATTRIBUTE_NODE;TEXT_NODE=u.TEXT_NODE;CDATA_SECTION_NODE=u.CDATA_SECTION_NODE;PROCESSING_INSTRUCTION_NODE=u.PROCESSING_INSTRUCTION_NODE;COMMENT_NODE=u.COMMENT_NODE;DOCUMENT_NODE=u.DOCUMENT_NODE;DOCUMENT_TYPE_NODE=u.DOCUMENT_TYPE_NODE;DOCUMENT_FRAGMENT_NODE=u.DOCUMENT_FRAGMENT_NODE;#t;#e=[];constructor(){super(u.DOCUMENT_NODE,"#document");const t=new $("html"),e=new $("head"),n=new $("body");t.appendChild(e),t.appendChild(n),this.#e.push(t),this.#t=n}get body(){return this.#t}get children(){return this.#e}get parentElement(){return null}createDocumentFragment(){return new Lt}createComment(t=""){const e=new it;return e.textContent=t,e}createElement(t){return new $(t)}createTextNode(t){const e=new rt;return e.textContent=t,e}}class ne{Comment=it;DocumentFragment=Lt;Element=q;HTMLElement=$;Node=L;Text=rt;DOMException=K;Error=Error;TypeError=TypeError;document;constructor(){this.document=new ee}}const Z=new WeakMap,ot=new WeakMap;function X(i){return ot.get(i)}function It(i){return ot.has(i)}function se(i,t){ot.set(i,t);const e=Z.get(t.target);e?e.has(i)||e.add(i):Z.set(t.target,new Set([i]))}function ie(i){return Z.get(i)}function D(i){return b(i)&&It(i)}function re(i,t){const e=X(i);if(!e)throw new Error("The first argument in setState() must be a state object");if(!b(t))throw new Error("The new state in setState() must be Object or Array");const{key:n,parent:s}=e;s&&(s[n]=t)}const E={CREATE:1,READ:2,UPDATE:3,DELETE:4,ARRAY_COPY_WITHIN:5,ARRAY_LENGTH:6,ARRAY_PUSH:7,ARRAY_REVERSE:8,ARRAY_SORT:9,ARRAY_SPLICE:10,ARRAY_SWAP:11},x={if:Symbol("prop-if"),for:Symbol("prop-for"),nest:Symbol("prop-nest"),reactive:Symbol("prop-reactive")},vt=Symbol("Access"),oe=Symbol("ObserverAccessProp"),O=Symbol("EmptyHandlerElements");function le(i){let t;for(const e of i)t=e;return t}function fe(i,t){let e=-1;for(const n of i)if(e+=1,e===t)return n}function he(i,t){let e=-1;if(!i.has(t))return e;for(const n of i)if(e+=1,n===t)break;return e}function ce(i,t,e){if(!i.has(t)||!i.has(e))throw new Error("Cannot move one element after another, because one element is missing");if(t===e)throw new Error("Cannot move an element after itself");const n=new Set;let s=1;for(const r of i)s===1?(r!==t&&n.add(r),r===e&&(s=2)):s===2?(n.add(t),n.add(r),s=3):s===3&&r!==t&&n.add(r);return s===2&&n.add(t),n}function mt(i,t){const e=new Set;let n=-1;for(const s of i)n+=1,n>=t&&e.add(s);return e}class A{state=null;template=()=>{console.assert(!1,"Should never be here")};clear(){}html(t){return""}paint(t){}static(t=!0){return this}staticHtml(t){return""}useTranslations(...t){return this}}const Mt=Symbol("Template");function ae(i){return Object.defineProperty(i,Mt,{}),i}function k(i){return typeof i=="function"&&Mt in i}const Q=Object.freeze(new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","command","keygen","menuitem"]));class lt{tagName="-";parent=this;children=[];attributes={};newChild(t,e){const n=new lt;return n.parent=t,n.attributes=e,this.children.push(n),n}}class ue{#t="";#e="";#n="";#i={};#s;#r;#c=[];#l=this.#p;#h="";#u="";#g={};#a="";#m="";#E="";#A=new lt;#o=this.#A;constructor(t,e){this.#c=this.#T(t,e),this.#d()}generate(t){if(this.#a||this.#m)throw new Error("Some HTML tag is not closed");return this.#y(t,this.#A)}#S(t,e){return typeof t=="function"?typeof e=="function"?e:t:typeof t=="string"&&(typeof e=="string"||typeof e=="number"||typeof e=="boolean")?t+e.toString():e}#y(t,e){const n=[];for(const s of e.children){let r=null;s.tagName==="if"?r=t.if(_t(s.attributes.condition??""),()=>{this.#y(t,s)}):s.tagName==="for"?"iterations"in s.attributes?r=t.for(0,parseInt(s.attributes.iterations??0)-1,()=>{this.#y(t,s)}):("from"in s.attributes||"to"in s.attributes)&&(r=t.for(parseInt(s.attributes.from??0),parseInt(s.attributes.to??0),()=>{this.#y(t,s)})):s.tagName==="forEach"?"object"in s.attributes&&(r=t.forEach(s.attributes.object??{},()=>{this.#y(t,s)})):(r=t.createElement(s.tagName,s.attributes,this.#y(t,s)),n.push(r))}return n}#b(){const t=this.#o,e=this.#i;Object.keys(this.#g).length>0&&(e.style=this.#g);const n=this.#o.newChild(t,e);n.tagName=this.#a,this.#o=n}#T(t,e=[]){const n=[];for(let s=0;s<t.length;s++)t[s]&&n.push(t[s]),e[s]!==void 0&&n.push(e[s]);return n}#d(){for(let t=0;t<this.#c.length;t++)if(typeof this.#c[t]=="string")for(let e=0;e<this.#c[t].length;e++)this.#s=this.#c[t][e],this.#r=this.#c[t][e-1],this.#l();else this.#s=this.#c[t],this.#r=void 0,this.#l()}#x(t,e){t&&(this.#i[t]=typeof e=="string"?e.trim():e)}#f(t){t===this.#w&&(this.#t="",this.#n="",this.#e=""),this.#l=t}#O(t,e){t&&(this.#g[t]=typeof e=="string"?e.trim():e)}#w(){I(this.#s)||(this.#s==="/"?(Q.has(this.#a)&&this.#b(),this.#f(this.#I)):this.#s===">"?(this.#b(),this.#f(this.#p)):this.#s==="="?this.#f(this.#L):this.#t+=this.#s)}#L(){I(this.#s)||(this.#s==="'"||this.#s==='"'?(this.#e=this.#s,this.#f(this.#t==="style"?this.#C:this.#N)):(this.#e=" ",this.#n=this.#S(this.#n,this.#s),this.#f(this.#N)))}#N(){this.#s===">"&&this.#r!=="/"?(this.#e&&this.#t&&this.#n&&this.#x(this.#t,this.#n),this.#t="",this.#n="",this.#e="",this.#f(this.#p),this.#b()):this.#s===this.#e||this.#e===" "&&I(this.#s)?(this.#x(this.#t,this.#n),this.#f(this.#w)):typeof this.#s=="object"||typeof this.#s=="function"?this.#n=this.#s:this.#n+=this.#s}#p(){I(this.#s)||(this.#s==="<"?(this.#a="",this.#i={},this.#f(this.#v)):(this.#r===" "?this.#E=this.#r+this.#s:this.#E=this.#s,this.#a="",this.#i={},this.#b(),this.#f(this.#D)))}#C(){I(this.#s)||(this.#s===">"?this.#f(this.#p):this.#s===this.#e||this.#e===" "&&I(this.#s)?this.#f(this.#w):this.#s===":"?this.#f(this.#M):this.#h+=this.#s)}#M(){this.#s===">"?this.#f(this.#p):this.#s===";"?(this.#O(this.#h,this.#u),this.#h="",this.#u="",this.#f(this.#C)):this.#s===this.#e?(this.#O(this.#h,this.#u),this.#h="",this.#u="",this.#f(this.#w)):this.#u=this.#S(this.#u,this.#s)}#v(){if(I(this.#s))this.#a!==""&&this.#f(this.#w);else if(this.#s==="/"&&Q.has(this.#a))this.#o.tagName||(this.#o=this.#o.parent),this.#b(),this.#f(this.#I);else if(this.#s===">"){if(!this.#a)throw new Error("Expected tag name, found >");this.#o.tagName||(this.#o=this.#o.parent),this.#b(),this.#f(this.#p)}else this.#r==="<"&&this.#s==="/"?(this.#a,this.#m="",this.#f(this.#I)):this.#a+=this.#s}#I(){if(!I(this.#s))if(this.#s===">"){if(this.#o.tagName&&this.#o.tagName!=="-"&&!Q.has(this.#o.tagName)&&this.#o.tagName!==this.#m)throw new Error(`Expected ${this.#o.tagName} tag to be closed, but ${this.#m} found`);this.#a="",this.#m="",this.#o.tagName?this.#o=this.#o.parent:this.#o=this.#o.parent.parent,this.#f(this.#p)}else this.#m+=this.#s}#D(){this.#s==="<"?(this.#i={},this.#o.attributes.textContent=this.#E,this.#f(this.#v)):(this.#E=this.#S(this.#E,this.#s),this.#o.tagName||(this.#o.attributes.textContent=this.#E))}}const d={state:null,bindFn:null,element:null,elementProp:"",elementInnerProp:"",repaintFn:null};function V(i,t,e,n,s,r){d.state=i,d.bindFn=t,d.element=e,d.elementProp=n,d.elementInnerProp=s,d.repaintFn=r}function F(){d.state=null,d.bindFn=null,d.element=null,d.elementProp="",d.elementInnerProp="",d.repaintFn=null}const w=new WeakMap,S=new WeakMap;function me(i,t,e,n,s,r,o){s===x.reactive&&(t=s),Ee(i,t,e,{element:n,elementProp:s,elementInnerProp:r,repaintFn:o},n)}function tt(i,t,e){const n=S.get(i);if(!n)return;let s=n.length;for(;s>0;){s-=1;const r=n[s];if(!r)continue;const[o,l,h]=r;w.get(o)?.get(l)?.delete(h);const f=w.get(o);if(f){const c=f.get(l);c&&(c.delete(h),c.size===0&&(f.delete(l),f.size===0&&w.delete(o)))}}S.delete(i)}function z(i){if(tt(i),!i.hasChildNodes())return;const t=i.childNodes;let e=t.length;for(;e>0;)e-=1,z(t[e])}function et(i,t=!0){if(!i||!b(i))return;const e=w.get(i);if(e){for(const[n,s]of e)for(const[r,o]of s)for(const l of o){const h=l.element,f=S.get(h);if(!f)continue;let c=f.length;for(;c>0;){c-=1;const a=f[c];a&&a[0]===i&&f.splice(c,1)}f.length===0&&S.delete(h)}w.delete(i)}if(t)for(const n in i)et(i[n],!0)}function de(i,t,e,n,s){const r=S.get(i);let o=S.get(t);if(o||(o=[],S.set(t,o)),!r)return;const l=o.length;let h=r.length;for(;h>0;){h-=1;const f=r[h];if(!f)continue;const[c,a,p]=f;if(n&&p!==n)continue;const y=Y(c,a);if(y){const m=y.get(p);if(m){for(const T of m)if(T.element===i){T.element=t;for(const N in s)T[N]=s[N]}}}o.splice(l,0,f),r.splice(h,1)}r.length===0&&S.delete(i)}function pe(i,t){const e=w.get(i);if(!e)return;let n=w.get(t);n||(n=new Map,w.set(t,n));for(const[s,r]of e){let o=n.get(s);o||(o=new Map,n.set(s,o));for(const[l,h]of r){let f=o.get(l);f||(f=[],o.set(l,f));for(const c of h){const{element:a}=c;f.push(c);const p=S.get(a);if(p)for(const y of p)y[0]===i&&(y[0]=t)}}}w.delete(i)}function Y(i,t){const e=w.get(i);if(e)return e.get(t)}function Ee(i,t,e,n,s){let r=!1;const o=w.get(i);if(o){const l=o.get(t);if(l){const h=l.get(e);if(!h)l.set(e,[n]),r=!0;else{let f=!1;for(const c of h)if(c.element===n.element&&c.elementProp===n.elementProp&&c.elementInnerProp===n.elementInnerProp&&c.repaintFn===n.repaintFn){f=!0;break}f||(h.push(n),r=!0)}}else{const h=new Map;h.set(e,[n]),o.set(t,h),r=!0}}else{const l=new Map;l.set(e,[n]);const h=new Map;h.set(t,l),w.set(i,h),r=!0}if(r){const l=S.get(s);if(l)l.push([i,t,e]);else{const h=[],f=[i,t,e];h.push(f),S.set(s,h)}}}class ge{#t=[];get translations(){return this.#t}translate(t){if(typeof t=="string"){const e=this.#n(t,this.#t);if(typeof e=="string")return e;const n=kt(),s=this.#n(t,n.paintorTranslations);if(typeof s=="string")return s}return t}translateArray(t){return this.translate(wt.apply(null,this.#e(t)))}useTranslations(...t){for(const e of t)if(Array.isArray(e))for(const n of e)this.#t.includes(n)||(this.#t=[...this.#t,n]);else e instanceof Object&&(this.#t.includes(e)||(this.#t=[...this.#t,e]))}#e(t){if(this.#t.length===0)return t;const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=this.translate(t[n]);return e}#n(t,e){if(e){for(const n of e)if(t in n)return n[t]}return!1}}const Dt=Object.freeze(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"]);class H{elements=new Set;addElement(t){t&&this.elements.add(t)}addElements(t){for(const e of t)this.elements.add(e)}getElements(){return this.elements}hasElement(t){return this.elements.has(t)}importElements(t){const e=t.getElements();for(const n of e)this.addElement(n)}moveElementAfterAnother(t,e){return ce(this.elements,t,e)}removeAllElements(){this.elements.clear()}removeTheseElements(t){for(const e of t)this.elements.delete(e)}replaceElements(t){this.elements=t}}function ye(i,t,e){if(Number.isNaN(i)||Number.isNaN(t)||i===1/0||t===1/0||i===-1/0||t===-1/0)return!0;if(typeof i!="number"||typeof t!="number")return new Error('"start" and "end" arguments should be numbers');if(typeof e!="function")return new Error('"handler" argument should be a Function');if(t>=i)for(let n=i;n<=t&&e(n)!==!1;n++);else for(let n=i;n>=t&&e(n)!==!1;n--);return!0}function dt(i,t,e,n,s,r,o,l){if(typeof n!="function")throw new TypeError('"handler" argument should be a Function');const h=X(e),f=h?h.target:e,c=t===2&&!!h;if(f instanceof Map||f instanceof Set)if(r===void 0){f.size===0&&typeof s=="function"&&(s(),l?.(O));for(const[a,p]of f.entries())if(nt(i,n,a,p,o,l)===!1)break}else{const a=f instanceof Set?r:f.get(r);nt(i,n,r,a,o,l)}else if(b(f))if(c&&e[vt],r===void 0){At(f)===0&&typeof s=="function"&&(s(),l?.(O));for(const a in f)if(pt(i,n,a,e,o,l)===!1)break}else pt(i,n,r,e,o,l);else throw new TypeError(`The state argument should be an Object or an Array, but instead it is ${f}`);return!0}function nt(i,t,e,n,s,r){let o=n;s&&(o=s?.call(i,o));let l=t(o,e),h=null;return k(l)?l=l(i):l instanceof A&&(h=l),r?.(e,h),l}function pt(i,t,e,n,s,r){const o=n[e];return nt(i,t,e,o,s,r)}const M=new WeakMap;class be{mapKeyToElements=M;#t;#e;#n;#i;#s;constructor(t,e,n,s,r){this.#t=t,this.#e=e,this.#n=n,this.#i=s,this.#s=r}create(t,e,n){let s=null;if(Array.isArray(t)){let o=parseInt(n);for(;o--;)if(t[o]!==void 0){s=String(o);break}}else{const o=Object.keys(t),l=o.indexOf(n)-1;l>-1&&(s=o[l])}let r=this.#e;if(s!==null){const o=M.get(this.#n);if(o){const l=o[s];r=l&&l.size>0?le(l):r}}this.createElements(e,r,n)}delete(t){this.#c(this.#e,this.#n,t)}update(t,e,n){this.delete(n),this.create(t,e,n)}arraySort(t,e){for(let n=0,s=t.length;n<s;n++){const r=n.toString();this.delete(r),this.create(t,e,r)}}arraySplice(t,e,n){const s=M.get(this.#n);if(Array.isArray(s)){let[r,o,...l]=n;if(r=v(r),o=v(o),o===1/0?o=t.length-r:o<0&&(o=0),o>0)for(let f=r,c=r+o;f<c;f++){const a=f.toString();this.delete(a)}const h=Array(l.length);if(s.splice(r,o,...h),l.length>0)for(let f=r;f<r+l.length;f++){const c=f.toString();this.create(t,e,c)}s.length=t.length}}arrayReverse(t,e){for(let n=0,s=t.length;n<s;n++){const r=s-1-n;if(n>=r)break;this.arraySwap([n,r])}}arraySwap(t){let[e,n]=t;e=v(e),n=v(n);const s=M.get(this.#n);if(Array.isArray(s)){const r=s[e],o=s[n];if(r&&o){if(r.size>0){let h=this.#e,f=e;for(;f--;){const c=s[f];if(!c)continue;const a=c.size;if(a>0){h=c[a-1];break}}h.after(...o)}if(o.size>0){let h=this.#n;for(let f=n+1;f<s.length;f++){const c=s[f];if(!c)continue;if(c.size>0){h=c[0];break}}h.before(...r)}const l=s[n];s[n]=s[e],s[e]=l}}}arrayCopyWithin(t,e,n){let[s,r,o]=n;s=v(s),r=v(r),o=v(o);for(let l=r,h=s;l<o;l++,h++){const f=h.toString();this.delete(f),this.create(t,e,f)}}arrayLength(t,e){let n=e?.[0]??0;n=v(n);const s=M.get(this.#n);if(Array.isArray(s)){const r=s.length;if(n<r)if(n===0)this.#c(this.#e,this.#n,"*",!0);else{let o=r;for(;o>0&&(o-=1,!(o<n));){if(s[o]===void 0)continue;const l=o.toString();this.#c(this.#e,this.#n,l,!0)}}s.length=n}}createElements(t,e,n){if(this.#s!==void 0&&this.#s!==n)return;let s=!1;this.#e.parentElement&&(this.#t.push(new H),s=!0);const r=this.#t.length-1,o=this.#i(t,this.#t[r],n,!1),l=M.get(this.#n);if(o[O])this.#r(o[O],l,n,e);else for(const h in o){const f=o[h];this.#r(f,l,n,e)}s&&this.#t.pop()}#r(t,e,n,s){n!==O&&n!==void 0&&(e[n]=t);const r=this.#t.length-1;for(const o of t)r===0&&this.#t.length>r&&this.#t[r].moveElementAfterAnother(o,s),s.after(o),s=o}#c(t,e,n,s=!0){const r=M.get(e);if(r)if(n==="*"){if(t!==e&&t.previousElementSibling===null&&e.nextElementSibling===null){for(const l in r)this.#l(r,l,s,!1);const o=t.parentElement;o&&(o.textContent="",o.appendChild(t),o.appendChild(e))}else for(const o in r)this.#l(r,o,s,!0);Array.isArray(r)&&(r.length=0)}else this.#l(r,n,s,!0)}#l(t,e,n=!0,s=!0){const r=t[e];if(r){for(const o of r)M.has(o)&&this.#c(o,o,"*"),n&&z(o),s&&o.remove();delete t[e]}}}class Te{mapKeyToElements;#t;#e;#n;#i;constructor(t,e,n,s,r,o,l){this.#e=t,this.#n=n,this.#i=l,this.#t=new be(e,n,s,r,o),this.mapKeyToElements=this.#t.mapKeyToElements}repaint(t,e,n,s,r){if(!(this.#e||!b(e))){switch(t){case E.CREATE:{this.#t.create(e,n,s);break}case E.DELETE:{this.#t.delete(s);break}case E.UPDATE:{this.#t.update(e,n,s);break}case E.ARRAY_SPLICE:{this.#t.arraySplice(e,n,r);break}case E.ARRAY_REVERSE:{this.#t.arrayReverse(e,n);break}case E.ARRAY_SWAP:{this.#t.arraySwap(r);break}case E.ARRAY_COPY_WITHIN:{this.#t.arrayCopyWithin(e,n,r);break}case E.ARRAY_SORT:{this.#t.arraySort(e,n);break}case E.ARRAY_LENGTH:{this.#t.arrayLength(e,r);break}}this.#i&&(!Array.isArray(e)||s==="")&&At(e)===0&&this.#t.createElements(n,this.#n,void 0)}}}class j{#t=[new H];#e=null;#n;#i=!0;#s=null;#r=this;#c=[];#l;#h;constructor(t,e,n,s){this.#h=t,this.#n=t.document,this.#i=this.#n.baseURI==="",this.#e=e,this.#c=n,this.#l=s;for(const r of[...Dt,"for","forEach","forState","html","if"])this[r]=this[r].bind(this)}static lastTemplateTreeToRender=null;createElement(t,...e){const n=t?this.#n.createElement(t):this.#n.createTextNode("");let s=new Set,r=0;for(const l of e)if(r+=1,l!==void 0)if(typeof l=="string"){const h=this.#n.createTextNode(this.#l.translate(l));C(h,s)}else if(typeof l=="number"){const h=this.#n.createTextNode(l.toString());C(h,s)}else if(typeof l=="function")if(k(l)){const h=l;this.#O(h,s)}else if(this.#i)n.innerHTML=`(${l.toString()})()`;else if(n instanceof HTMLScriptElement){const h=this.#n.createTextNode(`(${l.toString()})()`);n.appendChild(h)}else"value"in n&&!(n instanceof HTMLLIElement)?this.#d(n,{value:l}):this.#d(n,{textNode:l},this.#u(n,s,l));else if(l instanceof this.#h.Node)C(l,s);else if(Array.isArray(l)){const h=l;if(h.length===0)continue;let f=!1;for(const c of h)if(c instanceof this.#h.Node){f=!0;break}if(f)at(l,s);else{const c=this.#n.createTextNode(this.#l.translateArray(l));C(c,s)}}else if(l instanceof Set){if(l.size===0)continue;at(l,s)}else if(l instanceof A){const h=l,f=this.#a(h),{length:c}=f;if(c>0)for(const a of f[c-1]??[])C(a,s)}else l instanceof Error?n.textContent=this.#l.translate(l.message):r===1&&b(l)&&this.#d(n,l);const o=this.#t.length-1;if(s.size>0){const l=this.#t[o].getElements(),h=fe(s,0),f=he(l,h);f>-1&&s.size<l.size-f&&(s=mt(l,f))}return ut(n,s),this.#t[o].removeTheseElements(s),this.#t[o].addElement(n),n}for(t,e,n){const s=r=>{const o=parseInt(r[0]),l=parseInt(r[1]),h=ye(o,l,n);h instanceof Error&&console.error(h)};return this.#w("for",[t,e],!0,s)}forEach(t,e,n){return D(t)?this.#o(t,e,n):this.#A(t,e,n)}forState(t,e,n){const s=X(t);if(s){const r=s.parent;if(!D(r))throw new Error("The state must be a part of a state");const o=s.key,l=(h,f)=>{if(f!==o)return;if(k(e))return e(this.#r);const c=e(h);return typeof c=="function"?c(this.#r):c};return this.#o(r,l,n,o)}return this.#o(t,e,n)}getCreatedElements(){if(!this.#t[0])throw new Error("Missing data");return this.#t[0].getElements()}getHtmlCode(t){let e="";if(this.#i){const n=this.#e;n&&(e=te(n,t))}return e}html(t,...e){const n=e.length===0&&this.#l.translations.length===0?this.#S(Array.isArray(t)?t[0]??"":t):this.#y(Array.isArray(t)?t:[t],...e);for(const s of n)s.tagName===""&&(s.textContent=this.#l.translate(s.textContent));return n}if(t,e,n){const s=r=>{!!r[0]?e&&this.#N(e):n&&this.#N(n)};return typeof t=="function"?this.#w("if",[t],!0,s):this.#f(t,s)}async render(){j.lastTemplateTreeToRender=this.#r,this.#t=[new H];for(const t of this.#c)if(typeof t=="function"){let e=t(this.#r);if(e instanceof Promise&&(e=await e),e&&typeof e=="string")this.html(e);else if(typeof e=="function")e(this.#r);else if(Array.isArray(e)){let n=!0,s=!0;for(const r of e){if(!(r instanceof A)){n=!1;break}if(typeof r!="function"){s=!1;break}}if(n)for(const r of e){if(!(r instanceof A))break;this.#m(r,0)}else if(s)for(const r of e){if(typeof r!="function")break;r(this.#r)}}else e instanceof A&&this.#m(e,0)}else t instanceof A&&this.#m(t,0);this.#g()}#u(t,e,n){return()=>{const s=(r,o,l,h)=>{const f=r[0];if(typeof f=="function"||f instanceof A)if(k(f))if(f(this.#r),o){const c=this.#t.length-1,a=this.#t[c].getElements();C(l,e),J(a,e),C(h,e)}else e.clear();else{const c=f,a=this.#a(c);o?(C(l,e),J(a[0]??new Set,e),C(h,e)):this.#t[0]?.addElements(a[0]??new Set)}else o&&l&&(z(l),this.#d(t,{textContent:f}))};this.#w("nest",[n],!0,s)}}#g(){const t=this.#e;t&&ut(t,this.getCreatedElements())}#a(t){const e=this.#l.translations,n=t.useTranslations(e);return this.#i?n.getElementsSr():n.getElements()}#m(t,e=-1){const n=this.#a(t),s=e<0?this.#t.length-1:e;for(const r of n)this.#t[s].addElements(r)}#E(t){return this.#l.translate(t)}#A(t,e,n){const s=r=>{dt(this.#r,1,r[0],e,n,void 0,this.#E)};return this.#f(t,s)}#o(t,e,n,s){let r=null;if(!D(t))return new Error("The input object must be a state");const o=(l,h,f,c=!1)=>{const a=c?[]:{};let p=h.getElements().size;const y=(m,T=null)=>{T&&this.#N(T);const N=h.getElements(),B=p===0?N:mt(N,p);if(m===O){if(r)return;r=B}else if(r){for(const ht of r)z(ht),ht.remove();r=null}m===O?Object.defineProperty(a,m,{value:B,configurable:!0,enumerable:!1,writable:!1}):a[m]=B,p=N.size};return dt(this.#r,2,l,e,n,f,this.#E,y),a};return this.#L(t,o,typeof n=="function",s)}#S(t){let e=[];if(this.#i){const s=this.#n.createElement("");s.innerHTML=t??"",e=[s]}else{this.#s||(this.#s=this.#n.createElement("template"));const s=this.#s;s.innerHTML=t.trim()??"",e=Array.from(s.content.childNodes),s.innerHTML=""}const n=this.#t.length-1;return this.#t[n].addElements(e),e}#y(t,...e){return new ue(t,e).generate(this)}#b(t,e){let n=t.nextSibling;for(;n&&n!==e;){z(n);const s=n;n=n.nextSibling,s.remove()}}#T(t,e){if(!this.#e?.contains(t))return!1;let n=t;for(const s of e)Bt(s,n),n=s;return!0}#d(t,e,n){for(const s in e){let r=e[s];if(this.#i){if(Nt(s)&&typeof r=="function"){G(t,s,r);continue}}else if(typeof r=="function"&&$t(t,s,r))continue;if(typeof r=="function"){const o=r;V(null,o,t,s,"",null);let l=o(t);if(k(l)||l instanceof A){F(),n&&n();continue}else if(typeof l=="function")l=l();else if(s==="textNode"){F();const h=this.#n.createTextNode(l);t.appendChild(h),de(t,h,void 0,o,{elementProp:"textContent"});continue}F(),l=ct(l)?this.#l.translate(l):this.#l.translateArray(l),s&&G(t,s,l)}else s==="style"&&b(r)&&t instanceof this.#h.HTMLElement?this.#x(t,r):s==="data"&&b(r)&&t instanceof this.#h.HTMLElement?Ut(t,r):s==="textContent"?t[s]=ct(r)?this.#l.translate(r):this.#l.translateArray(r):((s==="innerText"||s==="value"&&t.tagName==="INPUT"&&(t.getAttribute("type")??"").toLowerCase()==="button")&&(r=this.#l.translate(r)),G(t,s,r))}}#x(t,e){for(const n in e){const s=e[n];let r="";if(typeof s=="function"){const o="style",l=s;V(null,l,t,o,n,null),r=l(t),F()}else r=s;typeof n=="string"&&Ct(t,n,r)}}#f(t,e){const{thisLevel:n,upperLevel:s}=this.#p();return e([t]),this.#C({thisLevel:n,upperLevel:s})}#O(t,e){const{thisLevel:n,upperLevel:s}=this.#p();t(this.#r);const r=this.#t[n]?.getElements()??new Set;J(r,e),this.#C({thisLevel:n,upperLevel:s})}#w(t,e,n,s){const{thisLevel:r,upperLevel:o}=this.#p(),l=new Array(e.length);let h=!1;for(const f of e)if(typeof f=="function"){h=!0;break}if(h){const f=this.#n.createComment(`${t}-begin`),c=this.#n.createComment(`${t}-end`);n&&this.#t[r].addElement(f);const a=()=>{if(this.#i)return;const m=this.#t.length-1;this.#t[m].removeAllElements(),this.#b(f,c),s(l,!1,null,null),this.#T(f,this.#t[m].getElements())||console.error("Element ",f," does not exist anymore")},p=f,y=x[t]??"";for(let m=0;m<l.length;m++){const T=e[m];typeof T=="function"?(V(null,T,p,y,"",B=>{l[m]=B,a()}),l[m]=T(),F()):l[m]=e[m]}s(l,!0,f,c),n&&this.#t[r].addElement(c)}else s(e,!1,null,null);return this.#C({thisLevel:r,upperLevel:o})}#L(t,e,n,s){const{thisLevel:r,upperLevel:o}=this.#p(),l=this.#n.createComment("reactive-begin"),h=this.#n.createComment("reactive-end"),f=this.#t[r];if(!f)throw new Error(`There are no collected elements at level ${r}`);f.addElement(l);const c=new Te(this.#i,this.#t,l,h,e,s,n),a=(...N)=>{c.repaint(...N)},p=x.reactive;V(t,()=>t,h,p,"",a);const m=Array.isArray(t),T=e(t,f,void 0,m);return Object.hasOwn(T,O)&&delete T[O],c.mapKeyToElements.set(h,T),F(),f.addElement(h),this.#C({thisLevel:r,upperLevel:o})}#N(t){if(typeof t=="function"){if(k(t)){t(this.#r);return}const e=t(this.#r);this.#N(e);return}t instanceof A&&this.#m(t)}#p(){this.#t.push(new H);const t=this.#t.length-1,e=t-1;return{thisLevel:t,upperLevel:e}}#C({thisLevel:t,upperLevel:e}){const n=this.#t[t],s=this.#t[e];if(!(n instanceof H)||!(s instanceof H))throw new Error("Missing data");const r=n.getElements()??new Set;return s.importElements(n),n.replaceElements(new Set),delete this.#t[t],this.#t.pop(),r}}function we(...i){const t=this;return function(...n){return t.call(this,...i,...n)}}const{prototype:st}=j;Object.assign(st.createElement,{bindArgs:we});Dt.forEach(i=>{st[i]=st.createElement.bindArgs(i)});class Ae{#t;#e;#n;constructor(t,e,n){this.#t=t,this.#e=e,this.#n=n}getArrayFunction(t){return t in this?this[t]:this.#t[t]}copyWithin=(...t)=>{const e=this.#t,n=this.#e;let[s,r,o]=t;const{length:l}=e;if(s<0)s+=l;else if(s<-l)s=0;else{if(s>=l)return;s>r&&(o=l-1)}if(r<0)r+=l;else if(r<-l||r===void 0)r=0;else if(r>=l)return;if(o<0)o+=l;else if(o<-l)o=0;else if(o>=l||o===void 0)o=l;else if(o<=r)return;const h=e.copyWithin.apply(e,[s,r,o]);return this.#n(E.ARRAY_COPY_WITHIN,e,n,[s,r,o]),h};fill=(...t)=>{const e=this.#t,n=this.#e,s=e.fill.apply(e,t);let r=t[0];for(let o=0;o<e.length;o++)n[o]=r,o===0&&(r=n[o]);return s};forEach=(t,e)=>{const n=this.#t,s=this.#e;j.lastTemplateTreeToRender?.forEach(s,(o,l)=>{t.apply(e,[o,l,n])})};push=(...t)=>{const e=this.#t,n=this.#e;let r=e.length-1;for(const o of t)r+=1,n[r]=o;return r};reverse=()=>{const t=this.#t,e=this.#e,n=t.reverse.apply(t);return this.#n(E.ARRAY_REVERSE,t,e),n};shift=()=>{const t=this.#t,e=this.#e,n=t.length,s=t.shift.apply(t);return this.#n(E.ARRAY_SPLICE,t,e,[0,1]),this.#i(e,n),s};sort=(...t)=>{const e=this.#t,n=this.#e,s=e.sort.apply(e,t);return this.#n(E.ARRAY_SORT,e,n,t),s};splice=(...t)=>{const e=this.#t,n=this.#e,s=e.length,r=e.splice.apply(e,t);return this.#n(E.ARRAY_SPLICE,e,n,t),this.#i(n,s),r};unshift=(...t)=>{const e=this.#t,n=this.#e,s=e.length,r=e.unshift.apply(e,t);return this.#n(E.ARRAY_SPLICE,e,n,[0,0,...t]),this.#i(n,s),r};#i(t,e){const n=t.length;e!==n&&Object.assign(t,{length:n})}}const Et=new WeakMap;function Se(i,t,e,n){let s=Et.get(t);return s||(s=new Ae(t,e,n),Et.set(t,s)),s.getArrayFunction(i)}const g={CREATE:0,CHANGE:1,DELETE:2,SET:3},R=new Map;R.set(g.CREATE,new WeakMap);R.set(g.CHANGE,new WeakMap);R.set(g.DELETE,new WeakMap);R.set(g.SET,new WeakMap);const _={prop:void 0,receiver:void 0};function Ne(i,t){_.receiver=i,_.prop=t}function Ce(){return _}function gt(i,t,e){const n=R.get(i);if(!n)throw new Error(`Wrong observer type ${i}`);const s=n.get(t);if(s)return s.get(e)}function U(i,t,e,n,s){if(n==="length"&&Array.isArray(t))return;const r=gt(i,e,n);if(r){const l=t[n];for(const h of r)h({key:n,value:l,oldValue:s,state:e,target:t})}const o=gt(i,e,void 0);if(o){const l=t[n];for(const h of o)h({key:n,value:l,oldValue:s,state:e,target:t})}}function yt(i,t,e,n){Rt(i);const s=R.get(t);if(!s)throw new Error(`Wrong observer type ${t}`);const r=s.get(i);if(r){const o=r.get(e);o?o.has(n)||o.add(n):r.set(e,new Set([n]))}else{const o=new Map;o.set(e,new Set([n])),s.set(i,o)}}function xe(i,t,e){if(t&&!R.has(t))throw new Error(`Invalid observer type "${t}"`);Rt(i);const n=_.receiver??i;if(!D(n))throw new Error("Invalid observer receiver");if(t)bt(t,n,_.prop,e);else for(const s in g)bt(g[s],n,_.prop,e)}function Rt(i){D(i)&&(i[oe],_.prop=void 0)}function bt(i,t,e,n){const s=R.get(i);if(!s)throw new Error(`Wrong observer type ${i}`);const r=s.get(t);if(r){const o=r.get(e);o&&(n?o.delete(n):o.clear())}}const Tt=Symbol("isProxy");class Oe{createProxy(t,e,n=null){if(!b(t))throw new Error("Cannot create a Proxy on non-object");if(D(t)||t instanceof Date)return t;const s=this.#t,r=new Proxy(t,s);return b(t)&&(It(r)||se(r,{key:e,parent:n,target:t})),r}#t={get:(t,e,n)=>e===Tt?!0:b(t[e])&&!t[e][Tt]?(t[e]=this.createProxy(t[e],e,n),t[e]):(Ne(n,e),Object.hasOwn(t,e)||e===vt?(d.element&&(!d.state||d.state===n)&&me(n,e,d.bindFn,d.element,d.elementProp,d.elementInnerProp,d.repaintFn),t[e]):typeof e=="string"&&P(t)&&typeof t[e]=="function"?Se(e,t,n,this.#e):t[e]),set:(t,e,n,s)=>{if(e==="length"&&P(t)){const r=t[e];if(n<r)for(let o=t.length-1;o>=n;o--)et(t[o],!0);t[e]=n,this.#e(E.ARRAY_LENGTH,t,s,[n]),this.#h(e,t,s,r)}else if(Object.hasOwn(t,e))if(b(n)&&t[e]!==n&&!(n instanceof Date)){if(t[e]!==n){if(b(t[e])&&b(n)){for(const o in n)P(n[o])&&P(t[e][o])&&t[e][o].length!==n[o].length?t[e][o].length=n[o].length:b(n[o])&&b(t[e][o])&&this.#i(e,t,s);for(const o in t[e])o in n||this.#i(o,t,s[e])}const r=t[e];t[e]=n,pe(r,s[e]);for(const o in t[e])this.#r(o,t[e],s[e]),this.#h(o,t[e],s[e],r);this.#r(e,t,s)}}else if(t[e]!==n){const r=t[e];t[e]=n,this.#i(e,t,s),this.#n(e,t,s),this.#h(e,t,s,r)}else this.#r(e,t,s);else{const r=P(t)?t.length:-1;t[e]=n,this.#c(e,t,s),this.#n(e,t,s),P(t)&&t.length!==r&&(s.length=t.length)}return!0},deleteProperty:(t,e)=>{const n=t[e];et(n,!0),delete t[e];const s=ie(t);if(s)for(const r of s)this.#l(e,t,r,n),this.#i(e,t,r);return!0}};#e=(t,e,n,s)=>{const r=Y(n,x.reactive);if(r)for(const[o,l]of r)for(const h of l){const{repaintFn:f}=h;f&&f(t,e,n,"",s)}};#n(t,e,n){this.#s(E.CREATE,t,e,n)}#i(t,e,n){this.#s(E.DELETE,t,e,n)}#s(t,e,n,s){const r=Y(s,x.reactive);if(r)for(const[o,l]of r)for(const h of l){const{repaintFn:f}=h;f&&f(t,n,s,e)}}#r(t,e,n){const s=Y(n,x.reactive);if(s)for(const[r,o]of s)for(const l of o){const{repaintFn:h}=l;h&&h(E.UPDATE,e,n,t)}}#c(t,e,n){U(g.CREATE,e,n,t),U(g.SET,e,n,t)}#l(t,e,n,s){U(g.DELETE,e,n,t,s)}#h(t,e,n,s){U(g.CHANGE,e,n,t,s),U(g.SET,e,n,t,s);const r=Y(n,t);if(r)for(const[o,l]of r)for(const h of l){const{element:f,elementProp:c,elementInnerProp:a,repaintFn:p}=h;let y=o.call(f,f);c==="style"&&a?Ct(f,a,y):c===x.if||c===x.for||c===x.nest?p&&p(y):(typeof y=="function"&&(y=y()),G(f,c,y))}}}function Pt(i){if(!(i instanceof Object)&&!Array.isArray(i))throw new Error("state() only accepts Object or Array");const t=X(i);t&&(i=t.target);const e=new Oe,n="",s={"":i};return e.createProxy(s,"",null)[n]}const Le=new ne;class ft extends A{#t=[];#e=[];#n="";#i=!1;#s=!1;#r="";#c="";#l=new Map;#h=new Map;#u=[];#g=new ge;#a=!1;clear(){for(const t of this.#e)for(const e of t)tt(e),e.remove();this.#e.length=0,this.#n="",this.#l.clear(),this.#h.clear()}getElements(){return this.#i?this.#A(null):(this.#T(null,window,!0),this.#e)}getElementsSr(){if(this.#i)return this.#A("");const t=this.#o();return this.#T("",t,!0),this.#e}html(t){if(this.#i)return this.staticHtml(t);const e=this.#o();return this.#T("",e,!0,t),this.#n}paint(t){if(!St)throw new Error("You can only use this function in browser environment");if(!t)throw new Error("No container selected.");if(typeof t!="string"&&!(t instanceof HTMLElement)&&!(t instanceof NodeList)&&!Array.isArray(t)&&!(t instanceof HTMLCollection))throw new Error(`Wrong type for the container element. Expected <string> or <Node>, got <${typeof t}>`);this.#T(t,window,!0)}static(t=!0){return this.#i=!!t,!t&&this.#h.size>0&&this.#h.clear(),this}staticHtml(t){const e=this.#g.translations[0]??null;if(!this.#h.has(e)){const n=this.#o();this.#T("",n,!0,t),this.#h.set(e,this.#n)}return this.#h.get(e)??""}useTemplates(...t){if(Array.isArray(t))for(const e of t)if(Array.isArray(e))for(const n of e)this.#u.push(n);else this.#u.push(e)}useTranslations(...t){return this.#g.useTranslations(...t),this}#m(){if(this.#t)for(const t of this.#t)for(;t?.firstChild;)t.removeChild(t.firstChild)}#E(t){let e=-1,n=-1;for(const s of this.#t)n+=1,t===s&&(e=n);if(e!==-1){delete this.#t[e];for(const s of this.#e[e]??[])tt(s),s.remove();delete this.#e[e],this.#n="";for(const[s,r]of this.#l)delete r[e];this.#h.clear()}}#A(t){const e=this.#g.translations[0]??null;if(!this.#l.has(e)){const n=this.#o();this.#T(t,n,!0),this.#l.set(e,this.#e)}return this.#l.get(e)??[]}#o(){return Le}#S(t,e){this.#a||(this.#a=!0,this.#e.length=0,this.#n="",this.#y(t,e),this.#b(this.#u))}#y(t,e){const n=e.document.baseURI==="";if(typeof t=="string")if(this.#r=t,this.#s=!1,Ft(t))this.#s=!0;else{Ht(t)||(this.#c=t);const s=n?[e.document.createElement("#container")]:e.document.querySelectorAll(t);if(this.#t=Array.from(s),!this.#t)throw new Error(`Could not find an element by the following query: ${t}`)}else if(t instanceof HTMLElement)this.#t=[t];else if(t instanceof NodeList||t instanceof HTMLCollection)this.#t=Array.from(t);else if(Array.isArray(t)){for(const s of t)if(!(s instanceof HTMLElement))throw new Error("All elements in the input array must be DOM elements");this.#t=t}return!0}#b(t){typeof this.template=="function"&&(this.state=this.state?Pt(this.state):this.state,this.#u.push(this.template.bind(this)));for(const e of t)if(typeof e!="function"&&!(e instanceof A))throw new Error("The template must be a function");return!0}#T(t,e,n=!0,s={}){this.#S(t,e),n&&this.#m();const r=this.#u;if(!e)throw new Error("Missing window element");if(this.#s){if(customElements.get(this.#r)){const l=document.getElementsByTagName(this.#r);for(const h of l)this.#d(e,h.shadowRoot,r,s);return}const o=l=>class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){if(!this.shadowRoot)throw new Error("Missing shadow root");l.#d(e,this.shadowRoot,r,s)}disconnectedCallback(){l.clear()}};customElements.define(this.#r,o(this))}else if(this.#c&&new MutationObserver(l=>{for(const h of l){const{addedNodes:f,removedNodes:c}=h;for(const a of f)a instanceof HTMLElement&&a.matches(this.#c)&&this.#d(e,a,r,s);for(const a of c)this.#E(a)}}).observe(document.body,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),this.#t.length===0)this.#d(e,null,r,s);else for(const o of this.#t)this.#d(e,o,r,s)}#d(t,e,n,s={}){const r=new j(t,e,n,this.#g);r.render().then(()=>{}),this.#n=r.getHtmlCode(s),this.#e.push(r.getCreatedElements())}}function Ie(...i){const t=new ft;return t.state=null,t.template=null,t.useTemplates(...i),t}function ve(i){return i instanceof ft}const Me=function(){let i="en";return St&&(i=document.getElementById("html")?.getAttribute("lang")??i),i},De=async function(i,t){if(typeof i!="string")throw new Error("Translation path must be a string");let e=null;const n=i.match(/^(.*?)([^.\/\\]+)(.\w+)$/um);if(n===null)throw new TypeError(`Incorrect path: ${i}`);const s=n[1]+t+n[3];try{e=(await import(s)).default}catch{s!==i&&(e=(await import(i)).default)}if(!(e instanceof Object))throw new TypeError(`Translation at ${s} must export an object`);return e},Re=async function(...i){const t=Me(),e=[];for(const n of i)e.push(De(n,t));return Promise.all(e)};class Pe{#t;constructor(t){this.#t=t}create(t){return this.#e(g.CREATE,t)}change(t){return this.#e(g.CHANGE,t)}delete(t){return this.#e(g.DELETE,t)}set(t){return this.#e(g.SET,t)}#e(t,e){if(this.#n(e),D(this.#t))yt(this.#t,t,void 0,e);else{const n=Ce();if(!n.receiver)throw new Error("Cannot observe a non-state");yt(n.receiver,t,n.prop,e)}}#n(t){if(!t)throw new Error("You must provide a listener function")}}function ke(i){switch(i){case"create":return g.CREATE;case"change":return g.CHANGE;case"delete":return g.DELETE;case"set":return g.SET;default:return}}function _e(i){return new Pe(i)}function Fe(i,t,e){return xe(i,ke(t),e)}function He(i){return i}const Be={component:Ie,fetchTranslations:Re,isComponent:ve,isState:D,isTemplate:k,on:_e,off:Fe,setState:re,state:Pt,style:He,template:ae,Component:ft};export{ft as Component,Ie as component,Be as default,Re as fetchTranslations,ve as isComponent,D as isState,k as isTemplate,Fe as off,_e as on,Be as paintor,re as setState,Pt as state,He as style,ae as template};
//# sourceMappingURL=bundle.js.map
