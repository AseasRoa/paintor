define(["require","exports"],function(te,F){"use strict";function ne(i){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(i){for(const t in i)if(t!=="default"){const n=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>i[t]})}}return e.default=i,Object.freeze(e)}const d=Object.freeze({CREATE:1,READ:2,UPDATE:3,DELETE:4,ARRAY_SPLICE:5,ARRAY_SWAP:6,ARRAY_COPY_WITHIN:7,ARRAY_SORT:8,ARRAY_PUSH:9}),Te=Object.freeze(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"]),w=Symbol("Subscriptions"),P=Symbol("Access"),$=Symbol("TemplateFunction"),k=Symbol("State");let N={element:null,propertyName:"",subPropertyName:"",bindFunction:null,statementRepaintFunction:null};function H(i,e,t,n,s){N.element=i,N.propertyName=e,N.subPropertyName=t,N.bindFunction=n,N.statementRepaintFunction=s}function v(){N.element=null,N.propertyName="",N.subPropertyName="",N.bindFunction=null,N.statementRepaintFunction=null}class Ne{#e={receiver:[],target:[],callback:()=>{}};callArrayFn(e,t,n,s){switch(this.#e.target=t,this.#e.receiver=n,this.#e.callback=s,e){case"push":return this.#s;case"copyWithin":return this.#n;case"reverse":return this.#i;case"shift":return this.#t;case"sort":return this.#h;case"splice":return this.#r;case"unshift":return this.#f;default:return t[e]}}#n=(...e)=>{const{target:t,receiver:n}=this.#e;let[s,o,l]=e;const{length:r}=t;if(s<0)s+=r;else if(s<-r)s=0;else{if(s>=r)return;s>o&&(l=r-1)}if(o<0)o+=r;else if(o<-r||o===void 0)o=0;else if(o>=r)return;if(l<0)l+=r;else if(l<-r)l=0;else if(l>=r||l===void 0)l=r;else if(l<=o)return;const c=t.copyWithin.apply(t,[s,o,l]);return this.#e.callback(d.ARRAY_COPY_WITHIN,n,[s,o,l]),c};#s=(...e)=>{const{target:t,receiver:n}=this.#e,s=t.push.apply(t,e);return this.#e.callback(d.ARRAY_PUSH,n,e),s};#i=()=>{const{target:e,receiver:t}=this.#e,n=e.reverse.apply(e);for(let s=0,o=e.length;s<o;s++){const l=o-1-s;if(s>=l)break;this.#e.callback(d.ARRAY_SWAP,t,[s,l])}return n};#t=()=>{const{target:e,receiver:t}=this.#e,n=e.shift.apply(e);return this.#e.callback(d.ARRAY_SPLICE,t,[0,1]),n};#h=(...e)=>{const{target:t,receiver:n}=this.#e,s=t.sort.apply(t,e);return this.#e.callback(d.ARRAY_SORT,n,e),s};#r=(...e)=>{const{target:t,receiver:n}=this.#e,s=t.splice.apply(t,e);return this.#e.callback(d.ARRAY_SPLICE,n,e),s};#f=(...e)=>{const{target:t,receiver:n}=this.#e,s=t.unshift.apply(t,e);return this.#e.callback(d.ARRAY_SPLICE,n,[0,0,...e]),s}}class Ce{#e=new Map;get subscriptions(){return this.#e}subscribe(e,t,n,s,o,l,r){(s==="-s-if"||s==="-s-forEach")&&(t=s),this.#e.has(t)||this.#e.set(t,[]);const c=this.#e.get(t)??[];for(const h of c)if(h.element===n&&h.propertyName===s&&h.subPropertyName===o&&h.bindFunction===l&&h.statementRepaintFunction===r)return;const a={element:n,propertyName:s,subPropertyName:o,bindFunction:l,statementRepaintFunction:r,stateSubscription:this};c.push(a),n[w]??=[],n[w].push(a)}unsubscribe(e){if(w in e&&e[w]instanceof Array){const t=e[w];let n=t.length;for(;n--;)t[n].stateSubscription===this&&t.splice(n,1)}this.#e.forEach((t,n)=>{this.#e.set(n,t.filter(s=>s.element!==e))})}}function se(i){return Object.hasOwn(i,w)}function Oe(i,e,t,n){if(w in i&&i[w]instanceof Array){let s=i[w].length;for(;s--;){const o=i[w][s];if(t===void 0||t===o.bindFunction){if(o.element=e,n)for(const l in n)o[l]=n[l];e[w]??=[],e[w].push(o),i[w].splice(s,1)}}}}function we(i){const e=i[w];let t=e.length;for(;t--;)e[t]&&e[t].stateSubscription.unsubscribe(i);delete i[w]}class Ae{#e;#n;constructor(){this.#e=new Ne,this.#n=new Ce}createProxy(e,t=""){if(!(e instanceof Object))throw new Error("Cannot create a Proxy on non-object");const n=this.#s(),s=new Proxy(e,n);for(const o in s){if(!(s[o]instanceof Object))continue;const l=t===""?o:`${t}.${o}`;s[o]=this.createProxy(s[o],l)}return s}#s(){return{get:(t,n,s)=>{if(n===k)return t[n];if(Object.hasOwn(t,n)||n===P)N.element&&N.bindFunction&&this.#n.subscribe(t,n,N.element,N.propertyName,N.subPropertyName,N.bindFunction,N.statementRepaintFunction);else if((t instanceof Map||t instanceof Set)&&t[n]instanceof Function){const o=t[n];return(...r)=>{const c=o.apply(t,r);return t instanceof Set?n==="add"?this.#t(s,n):n==="delete"&&this.#r(s,n):t instanceof Map&&(n==="set"?this.#t(s,n):n==="delete"&&this.#r(s,n)),c}}else if(t instanceof Array&&t[n]instanceof Function&&typeof n=="string")return this.#e.callArrayFn(n,t,s,this.#i);return t[n]},set:(t,n,s,o)=>(n===k||n===P||t instanceof Array&&n==="length"?t[n]=s:Object.hasOwn(t,n)?s instanceof Object?(t[n]=this.createProxy(s),this.#r(o,n),this.#t(o,n)):(t[n]=s,this.#f(o,n,s)):(s instanceof Object?t[n]=this.createProxy(s):t[n]=s,this.#t(o,n)),!0),deleteProperty:(t,n)=>(delete t[n],this.#r(t,n),!0)}}#i=(e,t,n)=>{const s=this.#n.subscriptions.get("-s-forEach");if(s)for(let o=0,l=s.length;o<l;o++){const{statementRepaintFunction:r}=s[o];r&&r(e,t,"",n)}};#t(e,t){this.#h(d.CREATE,e,t)}#h(e,t,n){const s=this.#n.subscriptions.get("-s-forEach");if(s)for(let o=0,l=s.length;o<l;o++){const{statementRepaintFunction:r}=s[o];r&&r(e,t,n)}}#r(e,t){this.#h(d.DELETE,e,t)}#f(e,t,n){if(this.#n.subscriptions.has(t)){const s=this.#n.subscriptions.get(t)??[];for(const o of s){const{element:l,propertyName:r,subPropertyName:c,bindFunction:a,statementRepaintFunction:h}=o;if(Object.hasOwn(l,"--deleted")){this.#n.unsubscribe(l);return}let u=a.call(l,l);r==="style"&&c?l.style[c]=ae(c,u):r==="--if"||r==="--for"||r==="--nest"?h&&h(u):(u instanceof Function&&(u=u()),Y(l,r,u))}}}}let ie=0;const z=function(e){if(!(e instanceof Object))throw new Error("state() only accepts Object, Array, Set or Map as input value.");const n=new Ae().createProxy(e);return ie+=1,n[k]={id:ie,target:e},n},V=function(i){return i instanceof Object&&k in i};function Se(){return typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||this}function re(i,...e){const t=/(%?)(%([ojdsif]))/g;if(e.length>0){const n=(s,o,l,r)=>{let c=e.shift(),a="";switch(r){case"o":Array.isArray(c)&&(a=JSON.stringify(c));break;case"s":a=""+c;break;case"d":a=""+Number(c);break;case"j":a=JSON.stringify(c);break;case"i":a=""+parseInt(""+c,10);break;case"f":a=""+parseFloat(""+c);break}return o?(e.unshift(a),s):a};i=i.replace(t,n)}return e.length>0&&(i+=" "+e.join(" ")),i=i.replace(/%{2,2}/g,"%"),""+i}function L(){if(L.isIt===void 0){const i=new Function("try {return this===window;}catch(e){ return false;}");L.isIt=i()}return L.isIt??!1}L.isIt=void 0;function M(i,e){e.push(i)}function U(i,e){for(const t of i)e.push(t)}function oe(i){return i.toLowerCase().indexOf("on")===0}function _(i){return i===" "||i==="	"||i==="\r"||i===`
`}function Me(i){return/^[a-z][a-z0-9-]+$/.test(i)&&i.includes("-")}function xe(i){return/#[a-z0-9-]+\s*$/.test(i)}function Fe(i){if(i==="true")return!0;if(i==="false")return!1;const e=parseInt(i);return isNaN(e)?!!i:!!e}function _e(i,e,t){if(!(i instanceof window.Node)||typeof e!="string"||typeof t!="function"||oe(e)===!1)return!1;const n=e.toLowerCase().substring(2);return i.addEventListener(n,t),!0}function De(i,e){if(e.length===1)i.appendChild(e[0]);else if(e.length>1){const t=new DocumentFragment;for(const n of e)n&&t.append(n);i.appendChild(t)}}function Le(i,e){for(const t of e)t&&i.appendChild(t)}function le(i,e){i&&(L()&&i instanceof window.Node?De(i,e):Le(i,e))}function ce(i,e,t,n,s,o){if(!(t instanceof Function))throw new TypeError('"handler" argument should be a Function');const l=V(e)?e[k].target:e,r=i===2&&V(l);if(l instanceof Array){r&&e[P];for(const c in l){if(s!==void 0&&s!==c)continue;let a=r&&l[c]instanceof Object?e[c]:l[c];n&&(a=n?.(a));const h=t(a,c);if(o?.(c),h===!1)break}}else if(l instanceof Map||l instanceof Set){r&&e[P];for(const[c,a]of l.entries()){if(s!==void 0&&s!==c)continue;let h=a;n&&(h=n?.(h));const u=t(h,c);if(o?.(c),u===!1)break}}else if(l instanceof Object){r&&e[P];for(const c in l){if(s!==void 0&&s!==c)continue;let a=r&&l[c]instanceof Object?e[c]:l[c];n&&(a=n?.(a));const h=t(a,c);if(o?.(c),h===!1)break}}else throw new TypeError('"data" argument should be an Object or an Array');return!0}function Re(i,e,t){if(typeof i!="number"||typeof e!="number")return new Error('"start" and "end" arguments should be numbers');if(!(t instanceof Function))return new Error('"handler" argument should be a Function');if(e>=i)for(let n=i;n<=e&&t(n)!==!1;n++);else for(let n=i;n>=e&&t(n)!==!1;n--);return!0}function ke(i,e){return i.splice(e,1),i}function ve(i,e){if(!e)return;const{nextSibling:t,parentNode:n}=e;n&&n.insertBefore(i,t)}function Ie(i,e){if(e instanceof Object)for(const t in e){const n=e[t].toString();i.setAttribute(`data-${t}`,n)}}function Y(i,e,t){e in i?t instanceof Array?i[e]=re.apply(null,t):i[e]=t??"":"setAttribute"in i&&i.setAttribute(e,t)}function ae(i,e){let t=e;return(i==="visibility"||i==="backfaceVisibility")&&(e===!0||e===!1||e===void 0||e===null)&&(t=e?"visible":"hidden"),i==="display"&&(e===!0||e===!1||e===void 0||e===null)&&(t=e?"":"none"),i==="flex"&&(e===!0||e===!1||e===void 0||e===null)&&(t=e?1:0),t}function Pe(i,e,t){if(t>=i.length){let n=t-i.length+1;for(;n--;)i.push(void 0)}return i.splice(t,0,i.splice(e,1)[0]),i}const je=(...i)=>{const e=i.length;for(let t=1;t<e;t++)i[t-1].after(i[t])};class B{elements=[];addElement(e){e&&this.elements.push(e)}addElements(e){for(let t of e)this.elements.push(t)}getElements(){return this.elements}hasElement(e){return this.elements.indexOf(e)>-1}importElements(e){const t=e.getElements();for(const n of t)this.addElement(n)}moveElementAfterAnother(e,t){const n=this.elements.indexOf(e),s=this.elements.indexOf(t);if(n===-1||s===-1)throw new Error("Cannot move one element after another, because one element is missing");s-n!==1&&(this.elements=Pe(this.elements,n,s+1))}removeAllElements(){this.elements.length=0}removeTheseElements(e){let t=e.length;for(;t--;){let n=this.elements.length;for(;n--;)if(e[t]===this.elements[n]){this.elements.splice(n,1);continue}}}}class q{tagName="-";parent=this;children=[];attributes={};newChild(e,t){const n=new q;return n.parent=e,n.attributes=t,this.children.push(n),n}}const K=Object.freeze(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","command","keygen","menuitem"]);class $e{#e="";#n="";#s="";#i={};#t;#h;#r=[];#f=this.#N;#u="";#c="";#T={};#a="";#d="";#p="";#C=new q;#o=this.#C;constructor(e,t){this.#r=this.#S(e,t),this.#w()}generate(e){if(this.#a||this.#d)throw new Error("Some HTML tag is not closed");return this.#m(e,this.#C)}#g(e,t){return typeof e=="function"?typeof t=="function"?t:e:typeof e=="string"&&(typeof t=="string"||typeof t=="number"||typeof t=="boolean")?e+t.toString():t}#m(e,t){const n=[];for(const s of t.children){let o=null;s.tagName==="if"?o=e.if(Fe(s.attributes?.condition??""),()=>this.#m(e,s)):s.tagName==="for"?"iterations"in s.attributes?o=e.for(0,parseInt(s.attributes?.iterations??0)-1,(l,r)=>{this.#m(e,s)}):("from"in s.attributes||"to"in s.attributes)&&(o=e.for(parseInt(s.attributes?.from??0),parseInt(s.attributes?.to??0),(l,r)=>{this.#m(e,s)})):s.tagName==="forEach"?"object"in s.attributes&&(o=e.forEach(s.attributes?.object??{},(l,r)=>{this.#m(e,s)})):(o=e.createElement(s.tagName,s.attributes,this.#m(e,s)),n.push(o))}return n}#b(){const e=this.#o,t=this.#i;Object.keys(this.#T).length>0&&(t.style=this.#T);const n=this.#o.newChild(e,t);n.tagName=this.#a,this.#o=n}#S(e,t=[]){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(e[s]),t[s]!==void 0&&n.push(t[s]);return n}#w(){for(let e=0;e<this.#r.length;e++)if(typeof this.#r[e]=="string")for(let t=0;t<this.#r[e].length;t++)this.#t=this.#r[e][t],this.#h=this.#r[e][t-1],this.#f();else this.#t=this.#r[e],this.#h=void 0,this.#f()}#O(e,t){e&&(this.#i[e]=typeof t=="string"?t.trim():t)}#l(e){e===this.#y&&(this.#e="",this.#s="",this.#n=""),this.#f=e}#E(e,t){e&&(this.#T[e]=typeof t=="string"?t.trim():t)}#y(){_(this.#t)||(this.#t==="/"?(K.includes(this.#a)&&this.#b(),this.#l(this.#M)):this.#t===">"?(this.#b(),this.#l(this.#N)):this.#t==="="?this.#l(this.#A):this.#e+=this.#t)}#A(){_(this.#t)||(this.#t==="'"||this.#t==='"'?(this.#n=this.#t,this.#l(this.#e==="style"?this.#F:this.#x)):(this.#n=" ",this.#s=this.#g(this.#s,this.#t),this.#l(this.#x)))}#x(){this.#t===">"&&this.#h!=="/"?(this.#n&&this.#e&&this.#s&&this.#O(this.#e,this.#s),this.#e="",this.#s="",this.#n="",this.#l(this.#N),this.#b()):this.#t===this.#n||this.#n===" "&&_(this.#t)?(this.#O(this.#e,this.#s),this.#l(this.#y)):this.#t instanceof Object?this.#s=this.#t:this.#s+=this.#t}#N(){_(this.#t)||(this.#t==="<"?(this.#a="",this.#i={},this.#l(this.#_)):(this.#h===" "?this.#p=this.#h+this.#t:this.#p=this.#t,this.#a="",this.#i={},this.#b(),this.#l(this.#L)))}#F(){_(this.#t)||(this.#t===">"?this.#l(this.#N):this.#t===this.#n||this.#n===" "&&_(this.#t)?this.#l(this.#y):this.#t===":"?this.#l(this.#D):this.#u+=this.#t)}#D(){this.#t===">"?this.#l(this.#N):this.#t===";"?(this.#E(this.#u,this.#c),this.#u="",this.#c="",this.#l(this.#F)):this.#t===this.#n?(this.#E(this.#u,this.#c),this.#u="",this.#c="",this.#l(this.#y)):this.#c=this.#g(this.#c,this.#t)}#_(){if(_(this.#t))this.#a!==""&&this.#l(this.#y);else if(this.#t==="/"&&K.includes(this.#a))this.#o.tagName||(this.#o=this.#o.parent),this.#b(),this.#l(this.#M);else if(this.#t===">"){if(!this.#a)throw new Error("Expected tag name, found >");this.#o.tagName||(this.#o=this.#o.parent),this.#b(),this.#l(this.#N)}else this.#h==="<"&&this.#t==="/"?(this.#a,this.#d="",this.#l(this.#M)):this.#a+=this.#t}#M(){if(!_(this.#t))if(this.#t===">"){if(this.#o.tagName&&this.#o.tagName!=="-"&&!K.includes(this.#o.tagName)&&this.#o.tagName!==this.#d)throw new Error(`Expected ${this.#o.tagName} tag to be closed, but ${this.#d} found`);this.#a="",this.#d="",this.#o.tagName?this.#o=this.#o.parent:this.#o=this.#o.parent.parent,this.#l(this.#N)}else this.#d+=this.#t}#L(){this.#t==="<"?(this.#i={},this.#o.attributes.textContent=this.#p,this.#l(this.#_)):(this.#p=this.#g(this.#p,this.#t),this.#o.tagName||(this.#o.attributes.textContent=this.#p))}}class he{#e=[new B];#n;#s;#i=!0;#t=null;#h=[];#r=[];#f;constructor(e,t,n,s=[]){this.#f=e,this.#s=e.document,this.#i=this.#s.baseURI==="",this.#n=t,this.#h=n,this.#r=s}createElement(e,...t){const n=e?this.#s.createElement(e):this.#s.createTextNode("");let s=[],o=0;for(const r of t)if(o+=1,typeof r=="string"){const c=this.#s.createTextNode(this.#E(r));M(c,s)}else if(typeof r=="number"){const c=this.#s.createTextNode(r.toString());M(c,s)}else if(r instanceof this.#f.Node)M(r,s);else if(r instanceof Array){if(r.length===0)continue;let c=!1;for(const a of r)if(a instanceof this.#f.Node){c=!0;break}if(c)U(r,s);else{const a=this.#s.createTextNode(this.#a(r));M(a,s)}}else if(r instanceof Error)n.textContent=this.#E(r.message);else if(r instanceof A){const c=this.#i?r.getElementsSr():r.getElements();for(const a of c)for(const h of a)M(h,s)}else if(r instanceof Function)if(r[$]){const{thisLevel:c,upperLevel:a}=this.#d();r(this);const h=this.#e[c].getElements();U(h,s),this.#u({thisLevel:c,upperLevel:a})}else if(this.#i)n.innerHTML=`(${r.toString()})()`;else if(n instanceof HTMLScriptElement){const c=this.#s.createTextNode(`(${r.toString()})()`);n.appendChild(c)}else if("value"in n&&!(n instanceof HTMLLIElement))this.#b(n,{value:r});else{const c=()=>{this.#O("nest",r,!0,(a,h,u,D)=>{if(a instanceof Function||a instanceof A){if(a instanceof A){const y=this.#i?a.getElementsSr():a.getElements();h?(M(u,s),U(y[0],s),M(D,s)):this.#e[0].addElements(y[0])}else if($ in a)if(a(this),h){const y=this.#e.length-1,T=this.#e[y].getElements();M(u,s),U(T,s),M(D,s)}else s.length=0}else h&&u&&(this.#A(u),this.#b(n,{textContent:a}))})};this.#b(n,{textNode:r},c)}else r instanceof Object&&!(r instanceof Function)&&o===1&&this.#b(n,r);const l=this.#e.length-1;if(s.length>0){const r=this.#e[l].getElements(),c=r.indexOf(s[0]);c>-1&&s.length<r.length-c&&(s=r.slice(c))}return le(n,s),this.#e[l].removeTheseElements(s),this.#e[l].addElement(n),n}for(e,t,n){const s=()=>{const o=Re(e,t,n);o instanceof Error&&console.error(o)};return this.#w("for",null,s)}forEach(e,t){return this.#p(1,e,t)}forState(e,t){return this.#p(2,e,t)}getCreatedElements(){return this.#e[0].getElements()}getHtmlCode(e){let t="";if(this.#i){const n=this.#n;n&&(t=n.paintChildren(e))}return t}html(e,...t){const n=t.length===0&&this.#r.length===0?this.#C(e instanceof Array?e[0]:e):this.#o(e instanceof Array?e:[e],...t);for(const s of n)s.tagName===""&&(s.textContent=this.#E(s.textContent));return n}if(e,t,n){const s=o=>{if(o)if(t instanceof A){const l=this.#i?t.getElementsSr():t.getElements(),r=this.#e.length-1;this.#e[r].addElements(l[0])}else t instanceof Function&&t();else if(n instanceof A){const l=this.#i?n.getElementsSr():n.getElements(),r=this.#e.length-1;this.#e[r].addElements(l[0])}else n instanceof Function&&n()};return e instanceof Function?this.#O("if",e,!0,s):this.#w("if",e,s)}async render(){this.#e=[new B];for(const e of this.#h)if(e instanceof Function){let t=e(this);if(t instanceof Promise&&(t=await t),t&&typeof t=="string")this.html(t);else if(t instanceof A){const n=this.#i?t.useTranslations(this.#r).getElementsSr():t.useTranslations(this.#r).getElements();for(const s of n)this.#e[0].addElements(s)}else if(t instanceof Function)t(this);else if(t instanceof Array){let n=!0,s=!0;for(const o of t){if(!(o instanceof A)){n=!1;break}if(!(o instanceof Function)){s=!1;break}}if(n)for(const o of t){if(!(o instanceof A))break;const l=this.#i?o.getElementsSr():o.getElements();for(const r of l)this.#e[0].addElements(r)}else if(s)for(const o of t){if(!(o instanceof Function))break;o(this)}}}else if(e instanceof A){const t=this.#i?e.useTranslations(this.#r).getElementsSr():e.useTranslations(this.#r).getElements();for(const n of t)this.#e[0].addElements(n)}this.#c()}#u({thisLevel:e,upperLevel:t}){const n=this.#e[e].getElements();return this.#e[t].importElements(this.#e[e]),this.#e[e].removeAllElements(),delete this.#e[e],this.#e.pop(),n}#c(){const e=this.#n;e&&le(e,this.getCreatedElements())}#T(e){return!!this.#r?e.map(n=>this.#E(n)):e}#a(e){return this.#E(re.apply(null,this.#T(e)))}#d(){this.#e.push(new B);const e=this.#e.length-1,t=e-1;return{thisLevel:e,upperLevel:t}}#p(e,t,n){const s=l=>this.#E(l);if(V(t)){const l=(r,c,a)=>{const h=[];let u=c.getElements().length;function D(y){const T=c.getElements(),O=u===0?T:T.slice(u);h.push({key:y,elements:O}),u=T.length}return ce(e,r,n,s,a,D),h};return this.#l("forEach",t,l)}const o=l=>{ce(e,l,n,s)};return t instanceof Function?this.#O("forEach",t,!0,o):this.#w("forEach",t,o)}#C(e){let t=[];if(this.#i){const s=this.#s.createElement("");s.innerHTML=e??"",t=[s]}else{this.#t||(this.#t=this.#s.createElement("template"));const s=this.#t;s.innerHTML=e.trim()??"",t=Array.from(s.content.childNodes),s.innerHTML=""}const n=this.#e.length-1;return this.#e[n].addElements(t),t}#o(e,...t){return new $e(e,t).generate(this)}#g(e,t){if(!this.#n?.contains(e))return!1;let n=e;for(const s of t)ve(s,n),n=s;return!0}#m(e){if(e.nodeType!==8)return-1;const n=e.textContent;let s="";if(n)s=n.slice(0,-6)+"-end";else return-1;let o=e.nextSibling,l=0,r=0;for(;o!==null;){if(o.nodeType===8){const a=o.textContent;if(a===n)l+=1;else if(a===s&&(l-=1,l<0))break}const{nextSibling:c}=o;this.#A(o),o.remove(),r+=1,o=c}return r}#b(e,t,n){for(let s in t){let o=t[s];if(this.#i){if(oe(s)&&o instanceof Function){Y(e,s,o);continue}}else if(o instanceof Function&&_e(e,s,o))continue;if(o instanceof Function){const l=o;H(e,s,"",l,null);let r=l(e);if(r instanceof Function&&Object.hasOwn(r,$)||r instanceof A){v(),n&&n();continue}else if(r instanceof Function)r=r();else if(s==="textNode"){v();const c=this.#s.createTextNode(r);e.appendChild(c),Oe(e,c,l,{propertyName:"textContent"});continue}v(),r instanceof Array?r=this.#a(r):typeof r=="string"&&(r=this.#E(r)),s&&Y(e,s,r)}else e instanceof this.#f.HTMLElement&&s==="style"&&o instanceof Object?this.#S(e,o):e instanceof this.#f.HTMLElement&&s==="data"?o instanceof Object&&Ie(e,o):s==="textContent"?o instanceof Array?e[s]=this.#a(o):e[s]=this.#E(o):((s==="innerText"||s==="value"&&e.tagName==="INPUT"&&(e.getAttribute("type")??"").toLowerCase()==="button")&&(o=this.#E(o)),Y(e,s,o))}}#S(e,t){for(const n in t){const s=t[n];let o="";if(s instanceof Function){const l="style",r=s;H(e,l,n,r,null),o=r(e),v()}else o=s;typeof n=="string"&&(e.style[n]=ae(n,o))}}#w(e,t,n){const{thisLevel:s,upperLevel:o}=this.#d();return n(t),this.#u({thisLevel:s,upperLevel:o})}#O(e,t,n,s){const{thisLevel:o,upperLevel:l}=this.#d();if(t instanceof Function){const c=this.#s.createComment(`${e}-begin`),a=this.#s.createComment(`${e}-end`);n&&this.#e[o].addElement(c);const h=T=>{if(this.#i)return;const O=this.#e.length-1;this.#e[O].removeAllElements(),s(T,!1,null,null),this.#g(c,this.#e[O].getElements())||console.error("Element ",c," does not exist anymore")},u=c,D=`--${e}`;H(u,D,"",t,h);const y=t();v(),s(y,!0,c,a),n&&this.#e[o].addElement(a)}else s(t,!1,null,null);return this.#u({thisLevel:o,upperLevel:l})}#l(e,t,n){const{thisLevel:s,upperLevel:o}=this.#d(),l=this.#s.createComment(`${e}-begin`),r=this.#s.createComment(`${e}-end`);this.#e[s].addElement(l);const c=(y,T,O,R)=>{let Z=!1;l.parentElement&&(this.#e.push(new B),Z=!0);const g=this.#e.length-1,f=n(y,this.#e[g],R),E=T instanceof Array;for(const p of f){E?r.renderedElementsMap[R]=p:r.renderedElementsMap.push(p);for(const m of p.elements)g===0&&this.#e[g].moveElementAfterAnother(m,O),O.after(m),O=m}Z&&this.#e.pop()},a=(y,T,O,R)=>{const g=T[k].target;if(g instanceof Object&&!this.#i){if(y===d.CREATE){let f=null;const E=g instanceof Map||g instanceof Set?g.keys():Object.keys(g);for(let m of E){if(m===O)break;f=m}let p=l;if(f!==null){for(const m of r.renderedElementsMap)if(m&&m.key===f){const{elements:S}=m;p=S.length>0?S[S.length-1]:p;break}}c(g,g,p,O)}else y===d.UPDATE&&(a(d.DELETE,T,O,void 0),a(d.CREATE,T,O,void 0));if(y===d.DELETE){let f=r.renderedElementsMap.length;for(;f--;){if(!r.renderedElementsMap[f])continue;const E=g instanceof Array;if(r.renderedElementsMap[f].key===O){for(const p of r.renderedElementsMap[f].elements)se(p)&&we(p),p.remove();E?(r.renderedElementsMap[f].elements.length=0,delete r.renderedElementsMap[f]):r.renderedElementsMap=ke(r.renderedElementsMap,f);break}}}else if(y===d.ARRAY_SPLICE){if(g instanceof Array){let[f,E,...p]=R;if(E===1/0?E=g.length-f:E<0&&(E=0),E>0)for(let b=f,j=f+E;b<j;b++)a(d.DELETE,T,b.toString(),void 0),delete r.renderedElementsMap[b];const m=r.renderedElementsMap.length,S=g.length,ee=S-m;if(ee>0){r.renderedElementsMap.length=S;for(let b=S-1;b>=f+p.length;b--){const j=b-ee;if(j<0)break;r.renderedElementsMap[b]=r.renderedElementsMap[j],r.renderedElementsMap[b].key=b.toString(),delete r.renderedElementsMap[j]}}else if(ee<0){r.renderedElementsMap.splice(f,E);for(let b=S-1;b>=f+p.length;b--)r.renderedElementsMap[b].key=b.toString()}if(p.length>0)for(let b=f;b<f+p.length;b++)a(d.CREATE,T,b.toString(),void 0)}r.renderedElementsMap.length=g.length}else if(y===d.ARRAY_SWAP){const[f,E]=R,p=r.renderedElementsMap[E].elements;r.renderedElementsMap[E].elements=r.renderedElementsMap[f].elements,r.renderedElementsMap[f].elements=p;for(let m=1;m<r.renderedElementsMap.length;m++)je(...r.renderedElementsMap[m-1].elements,...r.renderedElementsMap[m].elements)}else if(y===d.ARRAY_COPY_WITHIN){let[f,E,p]=R;for(let m=E,S=f;m<p;m++,S++)a(d.DELETE,T,S.toString(),void 0),a(d.CREATE,T,S.toString(),void 0)}else if(y===d.ARRAY_SORT)for(let f=0,E=g.length;f<E;f++)a(d.DELETE,T,f.toString(),void 0),a(d.CREATE,T,f.toString(),void 0);else if(y===d.ARRAY_PUSH){const f=g.length;let E=r.renderedElementsMap.length,p=l;for(;E--;){const m=r.renderedElementsMap[E];if(!m)continue;const S=m.elements.length;if(S>0){p=m.elements[S-1];break}}O=(f-1).toString(),c(g,g,p,O)}}},h=`-s-${e}`;H(r,h,"",()=>t,a);const D=n(t,this.#e[s]);return r.renderedElementsMap=D,v(),this.#e[s].addElement(r),this.#u({thisLevel:s,upperLevel:o})}#E(e){if(typeof e=="string"){const t=this.#y(e,this.#r);if(typeof t=="string")return t;const n=Se(),s=this.#y(e,n?.paintorTranslations);if(typeof s=="string")return s}return e}#y(e,t){if(t instanceof Array&&t.length>0){for(const n of t)if(e in n)return n[e]}return!1}#A(e){se(e)&&Object.assign(e,{"--deleted":!0});let t=e.childNodes.length;for(;t--;)this.#A(e.childNodes[t])}}function He(...i){const e=this;return function(...n){return e.call(this,...i,...n)}}const{prototype:X}=he;Object.assign(X.createElement,{bindArgs:He}),Te.forEach(i=>{X[i]=X.createElement.bindArgs(i)});const Ue=Object.freeze(["async","autofocus","autoplay","checked","contenteditable","controls","default","defer","disabled","formNoValidate","frameborder","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","readonly","required","reversed","scoped","selected","typemustmatch"]),Ye=Object.freeze(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","command","keygen","menuitem"]),C=Object.freeze({ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11});class G extends Error{constructor(e,t){super(e),this.name=t??"DOMException"}}class x{nextSibling=null;previousSibling=null;textContent="";#e=[];#n="";#s=1;#i=null;constructor(e,t){this.#s=e,this.#n=t}get baseURI(){return""}get childNodes(){return this.#e}get firstChild(){return this.#e[0]??null}get nodeName(){return this.#n}get nodeType(){return this.#s}get parentNode(){return this.#i}set parentNode(e){this.#i=e}appendChild(e){if(this.nodeType!==C.DOCUMENT_NODE&&this.nodeType!==C.DOCUMENT_FRAGMENT_NODE&&this.nodeType!==C.ELEMENT_NODE)throw new G("This node type does not support this method.");if(this.nodeType===C.DOCUMENT_NODE)throw new G("Failed to execute 'appendChild' on 'Node': Only one element on document allowed.");if(!(e instanceof x)){const n="Failed to execute 'appendChild' on 'Node': parameter 1 is not of type 'Node'.";throw new TypeError(n)}if(this.#e.includes(e))return;if(e===this)throw new G("Failed to execute 'appendChild' on 'Node': The new child element contains the parent.");this.#e.push(e),e.parentNode=this;const t=this.#e.length-2;t>=0&&(this.#e[t].nextSibling=e,e.previousSibling=this.#e[t]??null)}contains(){return!1}insertBefore(e,t){const n=[];for(const s of this.#e)s===t&&n.push(e),n.push(s);return this.#e=n,e}removeChild(e){if(!e)throw new Error("Failed to execute 'removeChild' on 'HTMLElement': parameter 1 is not of type 'HTMLElement'.");if(!this.#e.includes(e))throw new Error("Failed to execute 'removeChild' on 'HTMLElement': The node to be removed is not a child of this node.");return this.#e=this.#e.filter(t=>t!==e),e}paintChildren({indent:e=""}){let t="",n=0;for(const s of this.childNodes){n+=1;const o=n>1;t+=ue(s,e,"",o)}return t}}class J extends x{constructor(){super(C.COMMENT_NODE,"#comment")}}class Q extends x{constructor(){super(C.TEXT_NODE,"#text")}}function fe(i){let e=i;const t={"&":"&amp;","<":"&lt;",">":"&gt;"};return e=e.replace(/[&<>"]/g,n=>{let s=n;return n in t&&(s=t[n]),s}),e}function Be(i){let e="";for(const t of i){const{name:n}=t;let{value:s}=t;Ue.includes(n)?s!==!1&&s!==0&&s!==void 0&&s!==null&&(e+=` ${n}`):(s instanceof Array?s=s.join(","):s===!0?s="true":s===!1?s="false":s===void 0?s="undefined":s===null?s="null":s instanceof Function?s=`return(${s.toString()}).call(this,window.event)`:s=s.toString(),s=s.replace(/\"/g,'\\"'),s=fe(s),e+=` ${n}="${s}"`)}return e}function Ge(i){let e="";return e=i.replace(/([A-Z])/g,(t,n)=>`-${n.toLowerCase()}`),e}function We(i){let e="";for(const t in i){const n=i[t];e+=`${Ge(t)}:${n};`}return e.trim()}function ue(i,e,t,n=!1){let s="",o="",l="";if(e&&(o=t,l=`
`),i instanceof J)s+=`${l}${o}<!--${i.textContent}-->`;else if(i instanceof Q)s+=`${l}${o}${i.textContent}`;else if(i instanceof I){const r=Ye.includes(i.tagName),c=Be(i.attributes);let a="";Object.keys(i.style).length>0&&(a=` style="${We(i.style)}"`),n&&(s+=l),s+=o,i.tagName&&(s+=`<${i.tagName.toLowerCase()}${c}${a}`,s+=r?"":">"),s+=i.textContent;let h="";for(const u of i.childNodes)h+=ue(u,e,t+e,!0);h&&(s+=h+l+o),i.tagName!==""&&(s+=r?"/>":`</${i.tagName.toLowerCase()}>`)}return s}class W extends x{#e=[];#n="";constructor(e,t){super(e,t.toUpperCase()),this.#n=t.toUpperCase()}get attributes(){return this.#e}get children(){return this.childNodes.filter(e=>e instanceof W)}get className(){let e="";for(const t of this.#e)if(t.name==="class"){e=t.value;break}return e}set className(e){this.setAttribute("class",e)}get innerHTML(){return this.textContent}set innerHTML(e){this.textContent=e}get tagName(){return this.#n}append(e){e instanceof x?this.appendChild(e):this.textContent=fe(e.toString())}getAttribute(e){let t="";if(t=e.trim().toLowerCase(),!t)return null;const n=this.#e.findIndex(s=>s.name===t);return n===-1?null:this.#e[n].value}remove(){this.parentNode?.removeChild(this)}setAttribute(e,t){let n="";if(n=e.trim().toLowerCase(),!n)return;const s=t,o=this.#e.findIndex(l=>l.name===n);o===-1?this.#e.push({name:n,value:s}):this.#e[o]={name:n,value:s}}}function ze(i){let e=i;const t={"&":"&amp;","<":"&lt;",">":"&gt;"};return e=e.replace(/[&<>"]/g,n=>{let s=n;return n in t&&(s=t[n]),s}),e}function Ve(i){const e=i.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function qe(i){const e={};return i.split(";").forEach(t=>{const[n,s]=t.split(":");if(!n)return;const o=Ve(n.trim());e[o]=s.trim()}),e}let I=class extends W{#e={};constructor(e){super(C.ELEMENT_NODE,e)}get innerText(){return this.textContent}set innerText(e){this.textContent=ze(e.toString())}get style(){return this.#e}set style(e){if(typeof e=="string"){const t=qe(e);for(const n in t)this.#e[n]=t[n].toString()}}},de=class extends x{constructor(){super(C.DOCUMENT_FRAGMENT_NODE,"#document-fragment")}};class Ke extends x{ELEMENT_NODE=C.ELEMENT_NODE;ATTRIBUTE_NODE=C.ATTRIBUTE_NODE;TEXT_NODE=C.TEXT_NODE;CDATA_SECTION_NODE=C.CDATA_SECTION_NODE;PROCESSING_INSTRUCTION_NODE=C.PROCESSING_INSTRUCTION_NODE;COMMENT_NODE=C.COMMENT_NODE;DOCUMENT_NODE=C.DOCUMENT_NODE;DOCUMENT_TYPE_NODE=C.DOCUMENT_TYPE_NODE;DOCUMENT_FRAGMENT_NODE=C.DOCUMENT_FRAGMENT_NODE;#e;#n=[];constructor(){super(9,"#document");const e=new I("html"),t=new I("head"),n=new I("body");e.appendChild(t),e.appendChild(n),this.#n.push(e),this.#e=n}get body(){return this.#e}get children(){return this.#n}get parentElement(){return null}createDocumentFragment(){return new de}createComment(e=""){const t=new J;return t.textContent=e,t}createElement(e){return new I(e)}createTextNode(e){const t=new Q;return t.textContent=e,t}}class Xe{Comment=J;DocumentFragment=de;Element=W;HTMLElement=I;Node=x;Text=Q;DOMException=G;Error=Error;TypeError=TypeError;document;constructor(){this.document=new Ke}}const Je=L(),Qe=new Xe;class A{state=null;#e=[];#n=[];#s="";#i=!1;#t=!1;#h="";#r="";#f=new Map;#u=[];#c=[];getElements(){return this.#g(null,window,!0),this.#n}getElementsSr(){const e=this.#a();return this.#g("",e,!0),this.#n}html(e){if(this.#i)return this.staticHtml(e);const t=this.#a();return this.#g("",t,!0,e),this.#s}paint(e){if(!Je)throw new Error("You can only use this function in browser environment");if(!e)throw new Error("No container selected.");if(typeof e!="string"&&!(e instanceof HTMLElement)&&!(e instanceof NodeList)&&!(e instanceof Array)&&!(e instanceof HTMLCollection))throw new Error(`Wrong type for the container element. Expected <string> or <Node>, got <${typeof e}>`);this.#g(e,window,!0)}static(e=!0){return this.#i=e,this}staticHtml(e){const t=this.#c[0]??null;if(!this.#f.has(t)){const n=this.#a();this.#g("",n,!0,e),this.#f.set(t,this.#s)}return this.#f.get(t)??""}template(e){}useTemplates(...e){if(e instanceof Array)for(const t of e)if(t instanceof Array)for(const n of t)this.#u.push(n);else this.#u.push(t);return this}useTranslations(...e){return e.map(t=>{t instanceof Array?t.forEach(n=>{this.#c.includes(n)||(this.#c=[...this.#c,n])}):t instanceof Object&&(this.#c.includes(t)||(this.#c=[...this.#c,t]))}),this}#T(){if(this.#e)for(const e of this.#e)for(;e?.firstChild;)e.removeChild(e.firstChild)}#a(){return Qe}#d(e,t,n,s){return this.#n.length=0,this.#s="",this.#p(e,t),this.#o(n),this.#C(s),!0}#p(e,t){const n=t.document.baseURI==="";if(typeof e=="string"){if(this.#h=e,this.#t=!1,Me(e))this.#t=!0;else if(xe(e)||(this.#r=e),this.#e=n?[t.document.createElement("#container")]:t.document.querySelectorAll(e),!this.#e)throw new Error(`Could not find an element by the following query: ${e}`)}else if(e instanceof HTMLElement)this.#e=[e];else if(e instanceof NodeList||e instanceof HTMLCollection)this.#e=e;else if(e instanceof Array){for(const s of e)if(!(s instanceof HTMLElement))throw new Error("All elements in the input array must be DOM elements");this.#e=e}return!0}#C(e){this.template instanceof Function&&(this.state=this.state?z(this.state):this.state,this.#u.push(this.template.bind(this)));for(let t of e)if(!(t instanceof Function)&&!(t instanceof A))throw new Error("The template must be a function");return!0}#o(e){if(!(e instanceof Array))throw new Error("The argument 'translations' must be an Array");return this.#c=e,!0}#g(e,t,n=!0,s={}){this.#d(e,t,this.#c,this.#u),n&&this.#T();const o=this.#u,l=this.#c;if(!t)throw new Error("Missing window element");if(this.#t){const r=c=>class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){if(!this.shadowRoot)throw new Error("Missing shadow root");c.#m(t,this.shadowRoot,o,l,s)}};customElements.define(this.#h,r(this))}else if(this.#r&&new MutationObserver(c=>{for(const a of c){const h=a.addedNodes;for(let u of h)u instanceof HTMLElement&&u.matches(this.#r)&&this.#m(t,u,o,l,s)}}).observe(document.body,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),this.#e.length===0)this.#m(t,null,o,l,s);else for(const r of this.#e)this.#m(t,r,o,l,s)}#m(e,t,n,s,o={}){const l=new he(e,t,n,s);l.render(),this.#s=l.getHtmlCode(o),this.#n.push(l.getCreatedElements())}}const Ze="modulepreload",et=function(i){return"/"+i},me={},Ee=function(e,t,n){return e()},tt=function(){let i="en";return L()&&(i=document.getElementById("html")?.getAttribute("lang")??i),i},nt=async function(i,e){if(typeof i!="string")throw new Error("Translation path must be a string");let t=null;const n=i.match(/^(.*?)([^.\/\\]+)(.\w+)$/m);if(n===null)throw new TypeError(`Incorrect path: ${i}`);const s=n[1]+e+n[3];try{t=(await Ee(()=>new Promise((o,l)=>te([s],r=>o(ne(r)),l)),void 0)).default}catch{s!==i&&(t=(await Ee(()=>new Promise((l,r)=>te([i],c=>l(ne(c)),r)),void 0)).default)}if(!(t instanceof Object))throw new TypeError(`Translation at ${s} must export an object`);return t},pe=async function(...i){const e=tt(),t=[];for(let n of i)t.push(nt(n,e));return Promise.all(t)};function ge(...i){return new A().useTemplates(...i)}function be(i){return i[$]=!0,i}const ye={component:ge,state:z,template:be,fetchTranslations:pe,Component:A};F.Component=A,F.component=ge,F.default=ye,F.fetchTranslations=pe,F.paintor=ye,F.state=z,F.template=be,Object.defineProperties(F,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=paintor.amd.js.map
