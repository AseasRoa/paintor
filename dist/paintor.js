const G=Symbol("symStateId"),H=Symbol("symArrayAccess"),v=Symbol("symObjectAccess"),U=Symbol("symTemplateFunction"),P=Object.freeze({CREATE:1,READ:2,UPDATE:3,DELETE:4});let p={element:null,propertyName:"",subPropertyName:"",bindFunction:null,statementRepaintFunction:null};function M(i,t,e,s,n){p.element=i,p.propertyName=t,p.subPropertyName=e,p.bindFunction=s,p.statementRepaintFunction=n}function A(){p={element:null,propertyName:"",subPropertyName:"",bindFunction:null,statementRepaintFunction:null}}class at{#t=new Map;#n={};subscribe(t,e,s,n,r,l,o){(n==="-s-if"||n==="-s-forEach")&&(e=n),this.#t.has(e)||this.#t.set(e,[]);const h=this.#t.get(e)??[];for(const c of h)if(c.element===s&&c.propertyName===n&&c.subPropertyName===r&&c.bindFunction===l&&c.statementRepaintFunction===o)return;h.push({element:s,propertyName:n,subPropertyName:r,bindFunction:l,statementRepaintFunction:o}),Object.assign(s,{"--subscribed":!0})}unsubscribe(t){this.#t.forEach((e,s)=>{this.#t.set(s,e.filter(n=>n.element!==t))})}createProxy(t,e=""){const s=this.#l(),n=new Proxy(t,s);for(const r in n){if(!(n[r]instanceof Object))continue;const l=e===""?r:`${e}.${r}`;n[r]=this.createProxy(n[r],l)}return this.#n=n,n}#s(t,e,s,n){const r=this.#t.get("-s-forEach");if(r)for(let l=0,o=r.length;l<o;l++){const{statementRepaintFunction:h}=r[l];h&&h(t,e,s,n)}}#i(t,e,s){this.#s(P.CREATE,t,e,s)}#e(t,e,s,n){this.#t.has(s)&&(this.#t.get(s)??[]).forEach(l=>{const{element:o,propertyName:h,subPropertyName:c,bindFunction:a,statementRepaintFunction:f}=l;if(Object.hasOwn(o,"--deleted")){this.unsubscribe(o);return}let u=a.call(o,o);h==="style"&&c?o.style[c]=it(c,u):h==="--if"||h==="--for"||h==="--nest"?f&&f(u):(u instanceof Function&&(u=u()),L(o,h,u))})}#a(t,e,s){this.#s(P.DELETE,t,e,s)}#l(){const t={};return t.get=(e,s,n)=>{if(Object.hasOwn(e,s)||s===v||s===H)p.element&&p.bindFunction&&this.subscribe(e,s,p.element,p.propertyName,p.subPropertyName,p.bindFunction,p.statementRepaintFunction);else if((e instanceof Map||e instanceof Set)&&e[s]instanceof Function){const r=e[s];return(...o)=>{const h=r.apply(e,o);return e instanceof Set?s==="add"?this.#i(e,n,s):s==="delete"&&this.#a(e,n,s):e instanceof Map&&(s==="set"?this.#i(e,n,s):s==="delete"&&this.#a(e,n,s)),h}}return e[s]},t.set=(e,s,n,r)=>(typeof s=="symbol"&&(s===H||s===v||s===G)||e instanceof Array&&s==="length"?e[s]=n:Object.hasOwn(e,s)?(e[s]=n,this.#e(e,r,s,n)):(e[s]=n,this.#i(e,r,s)),!0),t.deleteProperty=(e,s)=>(delete e[s],this.#a(e,e,s),!0),t}}let X=0;const tt=function(t){if(!(t instanceof Object))throw new Error("state() only accepts Object, Array, Set or Map as input value.");const s=new at().createProxy(t);return X+=1,s[G]=X,s},et=function(i){return i instanceof Object&&G in i};function ft(){return typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||this}function st(i,...t){const e=/(%?)(%([ojdsif]))/g;if(t.length>0){const s=(n,r,l,o)=>{let h=t.shift(),c="";switch(o){case"o":Array.isArray(h)&&(c=JSON.stringify(h));break;case"s":c=""+h;break;case"d":c=""+Number(h);break;case"j":c=JSON.stringify(h);break;case"i":c=""+parseInt(""+h,10);break;case"f":c=""+parseFloat(""+h);break}return r?(t.unshift(c),n):c};i=i.replace(e,s)}return t.length>0&&(i+=" "+t.join(" ")),i=i.replace(/%{2,2}/g,"%"),""+i}function w(){if(w.isIt===void 0){const i=new Function("try {return this===window;}catch(e){ return false;}");w.isIt=i()}return w.isIt??!1}w.isIt=void 0;function g(i,t){return t.push(i),t}function F(i,t){for(const e of i)t.push(e);return t}function nt(i){return i.toLowerCase().indexOf("on")===0}function y(i){return i===" "||i==="	"||i==="\r"||i===`
`}function ut(i){return/^[a-z][a-z0-9-]+$/.test(i)&&i.includes("-")}function mt(i){return/#[a-z0-9-]+\s*$/.test(i)}function dt(i){if(i==="true")return!0;if(i==="false")return!1;const t=parseInt(i);return isNaN(t)?!!i:!!t}function Et(i,t,e){if(!(i instanceof window.Node)||typeof t!="string"||typeof e!="function"||nt(t)===!1)return!1;const s=t.toLowerCase().substring(2);return i.addEventListener(s,e),!0}function pt(i,t){if(t.length===1)i.appendChild(t[0]);else if(t.length>1){const e=new DocumentFragment;for(const s of t)s&&e.append(s);i.appendChild(e)}}function gt(i,t){for(const e of t)e&&i.appendChild(e)}function Y(i,t){i&&(w()&&i instanceof window.Node?pt(i,t):gt(i,t))}function J(i,t,e,s,n,r){if(!(e instanceof Function))throw new TypeError('"handler" argument should be a Function');const l=i===2&&et(t);if(t instanceof Map||t instanceof Set){l&&t[v];for(const[o,h]of t.entries()){if(n!==void 0&&n!==o)continue;let c=l?()=>h:h;s&&(c=s?.(c));const a=e(c,o);if(r?.(o),a===!1)break}}else if(t instanceof Array){l&&t[H];for(let o=0,h=t.length;o<h;o++){if(n!==void 0&&n!==o)continue;let c=l?()=>t[o]:t[o];s&&(c=s?.(c));const a=e(c,o);if(r?.(o),a===!1)break}}else if(t instanceof Object){l&&t[v];for(const o in t){if(n!==void 0&&n!==o)continue;let h=l?()=>t[o]:t[o];s&&(h=s?.(h));const c=e(h,o);if(r?.(o),c===!1)break}}else throw new TypeError('"data" argument should be an Object or an Array');return!0}function bt(i,t,e){if(typeof i!="number"||typeof t!="number")return new Error('"start" and "end" arguments should be numbers');if(!(e instanceof Function))return new Error('"handler" argument should be a Function');if(t>=i)for(let s=i;s<=t&&e(s)!==!1;s++);else for(let s=i;s>=t&&e(s)!==!1;s--);return!0}function yt(i,t){return i.filter(function(e,s){return s!==t})}function Tt(i,t){if(!t)return;const{nextSibling:e,parentNode:s}=t;s&&s.insertBefore(i,e)}function Nt(i,t){if(t instanceof Object)for(const e in t){const s=t[e].toString();i.setAttribute(`data-${e}`,s)}}function L(i,t,e){t in i?e instanceof Array?i[t]=st.apply(null,e):i[t]=e:"setAttribute"in i&&i.setAttribute(t,e)}function it(i,t){let e=t;return(i==="visibility"||i==="backfaceVisibility")&&(t===!0||t===!1||t===void 0||t===null)&&(e=t?"visible":"hidden"),i==="display"&&(t===!0||t===!1||t===void 0||t===null)&&(e=t?"":"none"),i==="flex"&&(t===!0||t===!1||t===void 0||t===null)&&(e=t?1:0),e}function Ct(i,t){return i instanceof Map||i instanceof Set?i.has(t):t in i}function wt(i,t,e){if(e>=i.length){let s=e-i.length+1;for(;s--;)i.push(void 0)}return i.splice(e,0,i.splice(t,1)[0]),i}class D{elements=[];addElement(t){t&&this.elements.push(t)}addElements(t){for(let e of t)this.elements.push(e)}getElements(){return this.elements}hasElement(t){return this.elements.indexOf(t)>-1}importElements(t){const e=t.getElements();for(const s of e)this.addElement(s)}moveElementAfterAnother(t,e){const s=this.elements.indexOf(t),n=this.elements.indexOf(e);if(s===-1||n===-1)throw new Error("Cannot move one element after another, because one element is missing");n-s!==1&&(this.elements=wt(this.elements,s,n+1))}removeAllElements(){this.elements.length=0}removeTheseElements(t){let e=t.length;for(;e--;){let s=this.elements.length;for(;s--;)if(t[e]===this.elements[s]){this.elements.splice(s,1);continue}}}}const Ot=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];class V{tagName="-";parent=this;children=[];attributes={};newChild(t,e){const s=new V;return s.parent=t,s.attributes=e,this.children.push(s),s}}const j=Object.freeze(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","command","keygen","menuitem"]);class St{#t="";#n="";#s="";#i={};#e;#a;#l=[];#u=this.#N;#f="";#h="";#T={};#c="";#m="";#p="";#C=new V;#r=this.#C;constructor(t,e){this.#l=this.#x(t,e),this.#O()}generate(t){if(this.#c||this.#m)throw new Error("Some HTML tag is not closed");return this.#d(t,this.#C)}#g(t,e){return typeof t=="function"?typeof e=="function"?e:t:typeof t=="string"&&(typeof e=="string"||typeof e=="number"||typeof e=="boolean")?t+e.toString():e}#d(t,e){const s=[];for(const n of e.children){let r=null;n.tagName==="if"?r=t.if(dt(n.attributes?.condition??""),()=>this.#d(t,n)):n.tagName==="for"?"iterations"in n.attributes?r=t.for(0,parseInt(n.attributes?.iterations??0)-1,(l,o)=>{this.#d(t,n)}):("from"in n.attributes||"to"in n.attributes)&&(r=t.for(parseInt(n.attributes?.from??0),parseInt(n.attributes?.to??0),(l,o)=>{this.#d(t,n)})):n.tagName==="forEach"?"object"in n.attributes&&(r=t.forEach(n.attributes?.object??{},(l,o)=>{this.#d(t,n)})):(r=t.createElement(n.tagName,n.attributes,this.#d(t,n)),s.push(r))}return s}#b(){const t=this.#r,e=this.#i;Object.keys(this.#T).length>0&&(e.style=this.#T);const s=this.#r.newChild(t,e);s.tagName=this.#c,this.#r=s}#x(t,e=[]){const s=[];for(let n=0;n<t.length;n++)t[n]&&s.push(t[n]),e[n]!==void 0&&s.push(e[n]);return s}#O(){for(let t=0;t<this.#l.length;t++)if(typeof this.#l[t]=="string")for(let e=0;e<this.#l[t].length;e++)this.#e=this.#l[t][e],this.#a=this.#l[t][e-1],this.#u();else this.#e=this.#l[t],this.#a=void 0,this.#u()}#w(t,e){t&&(this.#i[t]=typeof e=="string"?e.trim():e)}#o(t){t===this.#y&&(this.#t="",this.#s="",this.#n=""),this.#u=t}#E(t,e){t&&(this.#T[t]=typeof e=="string"?e.trim():e)}#y(){y(this.#e)||(this.#e==="/"?(j.includes(this.#c)&&this.#b(),this.#o(this.#M)):this.#e===">"?(this.#b(),this.#o(this.#N)):this.#e==="="?this.#o(this.#S):this.#t+=this.#e)}#S(){y(this.#e)||(this.#e==="'"||this.#e==='"'?(this.#n=this.#e,this.#o(this.#t==="style"?this.#F:this.#A)):(this.#n=" ",this.#s=this.#g(this.#s,this.#e),this.#o(this.#A)))}#A(){this.#e===">"&&this.#a!=="/"?(this.#n&&this.#t&&this.#s&&this.#w(this.#t,this.#s),this.#t="",this.#s="",this.#n="",this.#o(this.#N),this.#b()):this.#e===this.#n||this.#n===" "&&y(this.#e)?(this.#w(this.#t,this.#s),this.#o(this.#y)):this.#s+=this.#e}#N(){y(this.#e)||(this.#e==="<"?(this.#c="",this.#i={},this.#o(this.#D)):(this.#a===" "?this.#p=this.#a+this.#e:this.#p=this.#e,this.#c="",this.#i={},this.#b(),this.#o(this.#_)))}#F(){y(this.#e)||(this.#e===">"?this.#o(this.#N):this.#e===this.#n||this.#n===" "&&y(this.#e)?this.#o(this.#y):this.#e===":"?this.#o(this.#L):this.#f+=this.#e)}#L(){this.#e===">"?this.#o(this.#N):this.#e===";"?(this.#E(this.#f,this.#h),this.#f="",this.#h="",this.#o(this.#F)):this.#e===this.#n?(this.#E(this.#f,this.#h),this.#f="",this.#h="",this.#o(this.#y)):this.#h=this.#g(this.#h,this.#e)}#D(){if(y(this.#e))this.#c!==""&&this.#o(this.#y);else if(this.#e==="/"&&j.includes(this.#c))this.#r.tagName||(this.#r=this.#r.parent),this.#b(),this.#o(this.#M);else if(this.#e===">"){if(!this.#c)throw new Error("Expected tag name, found >");this.#r.tagName||(this.#r=this.#r.parent),this.#b(),this.#o(this.#N)}else this.#a==="<"&&this.#e==="/"?(this.#c,this.#m="",this.#o(this.#M)):this.#c+=this.#e}#M(){if(!y(this.#e))if(this.#e===">"){if(this.#r.tagName&&this.#r.tagName!=="-"&&!j.includes(this.#r.tagName)&&this.#r.tagName!==this.#m)throw new Error(`Expected ${this.#r.tagName} tag to be closed, but ${this.#m} found`);this.#c="",this.#m="",this.#r.tagName?this.#r=this.#r.parent:this.#r=this.#r.parent.parent,this.#o(this.#N)}else this.#m+=this.#e}#_(){this.#e==="<"?(this.#i={},this.#r.attributes.textContent=this.#p,this.#o(this.#D)):(this.#p=this.#g(this.#p,this.#e),this.#r.tagName||(this.#r.attributes.textContent=this.#p))}}class rt{#t=[new D];#n;#s;#i=!0;#e=null;#a=[];#l=[];#u;constructor(t,e,s,n=[]){this.#u=t,this.#s=t.document,this.#i=this.#s.baseURI==="",this.#n=e,this.#a=s,this.#l=n}createElement(t,...e){const s=t?this.#s.createElement(t):this.#s.createTextNode("");let n=[],r=0;for(const o of e)if(r+=1,typeof o=="string"){const h=this.#s.createTextNode(this.#E(o));n=g(h,n)}else if(typeof o=="number"){const h=this.#s.createTextNode(o.toString());n=g(h,n)}else if(o instanceof this.#u.Node)n=g(o,n);else if(o instanceof Array){if(o.length===0)continue;let h=!1;for(const c of o)if(c instanceof this.#u.Node){h=!0;break}if(h)n=F(o,n);else{const c=this.#s.createTextNode(this.#c(o));n=g(c,n)}}else if(o instanceof Error)s.textContent=this.#E(o.message);else if(o instanceof E){const h=this.#i?o.getElementsSr():o.getElements();for(const c of h)for(const a of c)n=g(a,n)}else if(o instanceof Function)if(o[U]){const{thisLevel:h,upperLevel:c}=this.#m();o(this);const a=this.#t[h].getElements();n=F(a,n),this.#f({thisLevel:h,upperLevel:c})}else if(this.#i)s.innerHTML=`(${o.toString()})()`;else if(s instanceof HTMLScriptElement){const h=this.#s.createTextNode(`(${o.toString()})()`);s.appendChild(h)}else"value"in s&&!(s instanceof HTMLLIElement)?this.#b(s,{value:o}):this.#w("nest",o,!1,(h,c,a,f)=>{if(h instanceof Function||h instanceof E){if(h instanceof E){const u=this.#i?h.getElementsSr():h.getElements();c?(g(a,n),n=F(u[0],n),g(f,n)):this.#t[0].addElements(u[0])}else if(U in h)if(h(this),c){const u=this.#t.length-1,T=this.#t[u].getElements();g(a,n),F(T,n),g(f,n)}else n.length=0}else c&&a&&(this.#S(a),this.#b(s,{textContent:o}))});else o instanceof Object&&!(o instanceof Function)&&r===1&&this.#b(s,o);const l=this.#t.length-1;if(n.length>0){const o=this.#t[l].getElements(),h=o.indexOf(n[0]);h>-1&&n.length<o.length-h&&(n=o.slice(h))}return Y(s,n),this.#t[l].removeTheseElements(n),this.#t[l].addElement(s),s}for(t,e,s){const n=()=>{const r=bt(t,e,s);r instanceof Error&&console.error(r)};return this.#O("for",null,n)}forEach(t,e){return this.#p(1,t,e)}forState(t,e){return this.#p(2,t,e)}getCreatedElements(){return this.#t[0].getElements()}getHtmlCode(t){let e="";if(this.#i){const s=this.#n;s&&(e=s.paintChildren(t))}return e}html(t,...e){const s=e.length===0&&this.#l.length===0?this.#C(t instanceof Array?t[0]:t):this.#r(t instanceof Array?t:[t],...e);for(const n of s)n.tagName===""&&(n.textContent=this.#E(n.textContent));return s}if(t,e,s){const n=r=>{if(r)if(e instanceof E){const l=this.#i?e.getElementsSr():e.getElements(),o=this.#t.length-1;this.#t[o].addElements(l[0])}else e instanceof Function&&e();else if(s instanceof E){const l=this.#i?s.getElementsSr():s.getElements(),o=this.#t.length-1;this.#t[o].addElements(l[0])}else s instanceof Function&&s()};return t instanceof Function?this.#w("if",t,!0,n):this.#O("if",t,n)}async render(){this.#t=[new D];for(const t of this.#a)if(t instanceof Function){let e=t(this);if(e instanceof Promise&&(e=await e),e&&typeof e=="string")this.html(e);else if(e instanceof E){const s=this.#i?e.useTranslations(this.#l).getElementsSr():e.useTranslations(this.#l).getElements();for(const n of s)this.#t[0].addElements(n)}else if(e instanceof Function)e(this);else if(e instanceof Array){let s=!0,n=!0;for(const r of e){if(!(r instanceof E)){s=!1;break}if(!(r instanceof Function)){n=!1;break}}if(s)for(const r of e){if(!(r instanceof E))break;const l=this.#i?r.getElementsSr():r.getElements();for(const o of l)this.#t[0].addElements(o)}else if(n)for(const r of e){if(!(r instanceof Function))break;r(this)}}}else if(t instanceof E){const e=this.#i?t.useTranslations(this.#l).getElementsSr():t.useTranslations(this.#l).getElements();for(const s of e)this.#t[0].addElements(s)}this.#h()}#f({thisLevel:t,upperLevel:e}){const s=this.#t[t].getElements();return this.#t[e].importElements(this.#t[t]),this.#t[t].removeAllElements(),delete this.#t[t],this.#t.pop(),s}#h(){const t=this.#n;t&&Y(t,this.getCreatedElements())}#T(t){return!!this.#l?t.map(s=>this.#E(s)):t}#c(t){return this.#E(st.apply(null,this.#T(t)))}#m(){this.#t.push(new D);const t=this.#t.length-1,e=t-1;return{thisLevel:t,upperLevel:e}}#p(t,e,s){const n=l=>this.#E(l);if(et(e)){const l=(o,h,c)=>{const a=[];let f=h.getElements().length;function u(T){const O=h.getElements(),d=f===0?O:O.slice(f);a.push({key:T,elements:d}),f=O.length}return J(t,o,s,n,c,u),a};return this.#o("forEach",e,l)}const r=l=>{J(t,l,s,n)};return e instanceof Function?this.#w("forEach",e,!0,r):this.#O("forEach",e,r)}#C(t){let e=[];if(this.#i){const n=this.#s.createElement("");n.innerHTML=t??"",e=[n]}else{this.#e||(this.#e=this.#s.createElement("template"));const n=this.#e;n.innerHTML=t.trim()??"",e=Array.from(n.content.childNodes),n.innerHTML=""}const s=this.#t.length-1;return this.#t[s].addElements(e),e}#r(t,...e){return new St(t,e).generate(this)}#g(t,e){if(!this.#n?.contains(t))return!1;let s=t;for(const n of e)Tt(n,s),s=n;return!0}#d(t){if(t.nodeType!==8)return-1;const s=t.textContent;let n="";if(s)n=s.slice(0,-6)+"-end";else return-1;let r=t.nextSibling,l=0,o=0;for(;r!==null;){if(r.nodeType===8){const c=r.textContent;if(c===s)l+=1;else if(c===n&&(l-=1,l<0))break}const{nextSibling:h}=r;this.#S(r),r.remove(),o+=1,r=h}return o}#b(t,e){for(let s in e){let n=e[s];if(this.#i){if(nt(s)&&n instanceof Function){L(t,s,n);continue}}else if(n instanceof Function&&Et(t,s,n))continue;if(n instanceof Function){const r=n;M(t,s,"",r,null);let l=r(t);if(l instanceof Function)l=l();else{const o=this.#s.createTextNode((l??"").toString());t.appendChild(o)}A(),l instanceof Array?l=this.#c(l):typeof l=="string"&&(l=this.#E(l)),s&&L(t,s,l)}else t instanceof this.#u.HTMLElement&&s==="style"&&n instanceof Object?this.#x(t,n):t instanceof this.#u.HTMLElement&&s==="data"?n instanceof Object&&Nt(t,n):s==="textContent"?n instanceof Array?t[s]=this.#c(n):t[s]=this.#E(n):((s==="innerText"||s==="value"&&t.tagName==="INPUT"&&(t.getAttribute("type")??"").toLowerCase()==="button")&&(n=this.#E(n)),L(t,s,n))}}#x(t,e){for(const s in e){const n=e[s];let r="";if(n instanceof Function){const l="style",o=n;M(t,l,s,o,null),r=o(t),A()}else r=n;typeof s=="string"&&(t.style[s]=it(s,r))}}#O(t,e,s){const{thisLevel:n,upperLevel:r}=this.#m();return s(e),this.#f({thisLevel:n,upperLevel:r})}#w(t,e,s,n){const{thisLevel:r,upperLevel:l}=this.#m();if(e instanceof Function){const h=this.#s.createComment(`${t}-begin`),c=this.#s.createComment(`${t}-end`);s&&this.#t[r].addElement(h);const a=O=>{if(this.#i)return;const d=this.#t.length-1;this.#t[d].removeAllElements(),this.#d(h),n(O,!1,null,null),this.#g(h,this.#t[d].getElements())||console.error("Element ",h," does not exist anymore")},f=h,u=`--${t}`;M(f,u,"",e,a);const T=e();A(),n(T,!0,h,c),s&&this.#t[r].addElement(c)}else n(e,!1,null,null);return this.#f({thisLevel:r,upperLevel:l})}#o(t,e,s){const{thisLevel:n,upperLevel:r}=this.#m(),l=this.#s.createComment(`${t}-begin`),o=this.#s.createComment(`${t}-end`);this.#t[n].addElement(l);const h=(f,u,T,O)=>{if(u instanceof Object&&!this.#i)if(f===P.DELETE){let d=o.renderedElementsMap.length;for(;d--;){const N=o.renderedElementsMap[d];Ct(u,N.key)||(N.elements.forEach(I=>{I.remove()}),o.renderedElementsMap=yt(o.renderedElementsMap,d))}}else{let d=l;const N=[],I=u instanceof Map||u instanceof Set||u instanceof Array?u.keys():Object.keys(u);for(let $ of I){if(!($ in u))continue;let K=!1;for(const S of o.renderedElementsMap)if(S.key===$){const{elements:C}=S;d=C.length>0?C[C.length-1]:d,N.push(S),K=!0;break}if(!K){let S=!1;l.parentElement&&(this.#t.push(new D),S=!0);const C=this.#t.length-1,ct=s(T,this.#t[C],$);for(const W of ct){N.push(W);for(const R of W.elements)C===0&&this.#t[C].moveElementAfterAnother(R,d),d.after(R),d=R}S&&this.#t.pop()}}o.renderedElementsMap=N}},c=`-s-${t}`;return M(o,c,"",()=>e,h),o.renderedElementsMap=s(e,this.#t[n]),A(),this.#t[n].addElement(o),this.#f({thisLevel:n,upperLevel:r})}#E(t){if(typeof t=="string"){const e=this.#y(t,this.#l);if(typeof e=="string")return e;const s=ft(),n=this.#y(t,s?.paintorTranslations);if(typeof n=="string")return n}return t}#y(t,e){if(e instanceof Array&&e.length>0){for(const s of e)if(t in s)return s[t]}return!1}#S(t){Object.hasOwn(t,"--subscribed")&&Object.assign(t,{"--deleted":!0});let e=t.childNodes.length;for(;e--;)this.#S(t.childNodes[e])}}function xt(...i){const t=this;return function(...s){return t.call(this,...i,...s)}}const{prototype:B}=rt;Object.assign(B.createElement,{bindArgs:xt});Ot.forEach(i=>{B[i]=B.createElement.bindArgs(i)});const Mt=Object.freeze(["async","autofocus","autoplay","checked","contenteditable","controls","default","defer","disabled","formNoValidate","frameborder","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","readonly","required","reversed","scoped","selected","typemustmatch"]),At=Object.freeze(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","command","keygen","menuitem"]),m=Object.freeze({ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11});class _ extends Error{constructor(t,e){super(t),this.name=e??"DOMException"}}class b{nextSibling=null;previousSibling=null;textContent="";#t=[];#n="";#s=1;#i=null;constructor(t,e){this.#s=t,this.#n=e}get baseURI(){return""}get childNodes(){return this.#t}get firstChild(){return this.#t[0]??null}get nodeName(){return this.#n}get nodeType(){return this.#s}get parentNode(){return this.#i}set parentNode(t){this.#i=t}appendChild(t){if(this.nodeType!==m.DOCUMENT_NODE&&this.nodeType!==m.DOCUMENT_FRAGMENT_NODE&&this.nodeType!==m.ELEMENT_NODE)throw new _("This node type does not support this method.");if(this.nodeType===m.DOCUMENT_NODE)throw new _("Failed to execute 'appendChild' on 'Node': Only one element on document allowed.");if(!(t instanceof b)){const s="Failed to execute 'appendChild' on 'Node': parameter 1 is not of type 'Node'.";throw new TypeError(s)}if(this.#t.includes(t))return;if(t===this)throw new _("Failed to execute 'appendChild' on 'Node': The new child element contains the parent.");this.#t.push(t),t.parentNode=this;const e=this.#t.length-2;e>=0&&(this.#t[e].nextSibling=t,t.previousSibling=this.#t[e]??null)}contains(){return!1}insertBefore(t,e){const s=[];for(const n of this.#t)n===e&&s.push(t),s.push(n);return this.#t=s,t}removeChild(t){if(!t)throw new Error("Failed to execute 'removeChild' on 'HTMLElement': parameter 1 is not of type 'HTMLElement'.");if(!this.#t.includes(t))throw new Error("Failed to execute 'removeChild' on 'HTMLElement': The node to be removed is not a child of this node.");return this.#t=this.#t.filter(e=>e!==t),t}paintChildren({indent:t=""}){let e="",s=0;for(const n of this.childNodes){s+=1;const r=s>1;e+=lt(n,t,"",r)}return e}}class z extends b{constructor(){super(m.COMMENT_NODE,"#comment")}}class q extends b{constructor(){super(m.TEXT_NODE,"#text")}}function ot(i){let t=i;const e={"&":"&amp;","<":"&lt;",">":"&gt;"};return t=t.replace(/[&<>"]/g,s=>{let n=s;return s in e&&(n=e[s]),n}),t}function Ft(i){let t="";for(const e of i){const{name:s}=e;let{value:n}=e;Mt.includes(s)?n!==!1&&n!==0&&n!==void 0&&n!==null&&(t+=` ${s}`):(n instanceof Array?n=n.join(","):n===!0?n="true":n===!1?n="false":n===void 0?n="undefined":n===null?n="null":n instanceof Function?n=`return(${n.toString()}).call(this,window.event)`:n=n.toString(),n=n.replace(/\"/g,'\\"'),n=ot(n),t+=` ${s}="${n}"`)}return t}function Dt(i){let t="";return t=i.replace(/([A-Z])/g,(e,s)=>`-${s.toLowerCase()}`),t}function Lt(i){let t="";for(const e in i){const s=i[e];t+=`${Dt(e)}:${s};`}return t.trim()}function lt(i,t,e,s=!1){let n="",r="",l="";if(t&&(r=e,l=`
`),i instanceof z)n+=`${l}${r}<!--${i.textContent}-->`;else if(i instanceof q)n+=`${l}${r}${i.textContent}`;else if(i instanceof x){const o=At.includes(i.tagName),h=Ft(i.attributes);let c="";Object.keys(i.style).length>0&&(c=` style="${Lt(i.style)}"`),s&&(n+=l),n+=r,i.tagName&&(n+=`<${i.tagName.toLowerCase()}${h}${c}`,n+=o?"":">"),n+=i.textContent;let a="";for(const f of i.childNodes)a+=lt(f,t,e+t,!0);a&&(n+=a+l+r),i.tagName!==""&&(n+=o?"/>":`</${i.tagName.toLowerCase()}>`)}return n}class k extends b{#t=[];#n="";constructor(t,e){super(t,e.toUpperCase()),this.#n=e.toUpperCase()}get attributes(){return this.#t}get children(){return this.childNodes.filter(t=>t instanceof k)}get className(){let t="";for(const e of this.#t)if(e.name==="class"){t=e.value;break}return t}set className(t){this.setAttribute("class",t)}get innerHTML(){return this.textContent}set innerHTML(t){this.textContent=t}get tagName(){return this.#n}append(t){t instanceof b?this.appendChild(t):this.textContent=ot(t.toString())}getAttribute(t){let e="";if(e=t.trim().toLowerCase(),!e)return null;const s=this.#t.findIndex(n=>n.name===e);return s===-1?null:this.#t[s].value}remove(){this.parentNode?.removeChild(this)}setAttribute(t,e){let s="";if(s=t.trim().toLowerCase(),!s)return;const n=e,r=this.#t.findIndex(l=>l.name===s);r===-1?this.#t.push({name:s,value:n}):this.#t[r]={name:s,value:n}}}function _t(i){let t=i;const e={"&":"&amp;","<":"&lt;",">":"&gt;"};return t=t.replace(/[&<>"]/g,s=>{let n=s;return s in e&&(n=e[s]),n}),t}function vt(i){const t=i.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(e=>e[0].toUpperCase()+e.slice(1)).join("")}function kt(i){const t={};return i.split(";").forEach(e=>{const[s,n]=e.split(":");if(!s)return;const r=vt(s.trim());t[r]=n.trim()}),t}let x=class extends k{#t={};constructor(t){super(m.ELEMENT_NODE,t)}get innerText(){return this.textContent}set innerText(t){this.textContent=_t(t.toString())}get style(){return this.#t}set style(t){if(typeof t=="string"){const e=kt(t);for(const s in e)this.#t[s]=e[s].toString()}}},ht=class extends b{constructor(){super(m.DOCUMENT_FRAGMENT_NODE,"#document-fragment")}};class It extends b{ELEMENT_NODE=m.ELEMENT_NODE;ATTRIBUTE_NODE=m.ATTRIBUTE_NODE;TEXT_NODE=m.TEXT_NODE;CDATA_SECTION_NODE=m.CDATA_SECTION_NODE;PROCESSING_INSTRUCTION_NODE=m.PROCESSING_INSTRUCTION_NODE;COMMENT_NODE=m.COMMENT_NODE;DOCUMENT_NODE=m.DOCUMENT_NODE;DOCUMENT_TYPE_NODE=m.DOCUMENT_TYPE_NODE;DOCUMENT_FRAGMENT_NODE=m.DOCUMENT_FRAGMENT_NODE;#t;#n=[];constructor(){super(9,"#document");const t=new x("html"),e=new x("head"),s=new x("body");t.appendChild(e),t.appendChild(s),this.#n.push(t),this.#t=s}get body(){return this.#t}get children(){return this.#n}get parentElement(){return null}createDocumentFragment(){return new ht}createComment(t=""){const e=new z;return e.textContent=t,e}createElement(t){return new x(t)}createTextNode(t){const e=new q;return e.textContent=t,e}}class $t{Comment=z;DocumentFragment=ht;Element=k;HTMLElement=x;Node=b;Text=q;DOMException=_;Error=Error;TypeError=TypeError;document;constructor(){this.document=new It}}const Rt=w(),jt=new $t;class E{state=null;#t=[];#n=[];#s="";#i=!1;#e=!1;#a="";#l="";#u=new Map;#f=[];#h=[];getElements(){return this.#g(null,window,!0),this.#n}getElementsSr(){const t=this.#c();return this.#g("",t,!0),this.#n}html(t){if(this.#i)return this.staticHtml(t);const e=this.#c();return this.#g("",e,!0,t),this.#s}paint(t){if(!Rt)throw new Error("You can only use this function in browser environment");if(!t)throw new Error("No container selected.");if(typeof t!="string"&&!(t instanceof HTMLElement)&&!(t instanceof NodeList)&&!(t instanceof Array)&&!(t instanceof HTMLCollection))throw new Error(`Wrong type for the container element. Expected <string> or <Node>, got <${typeof t}>`);this.#g(t,window,!0)}static(t=!0){return this.#i=t,this}staticHtml(t){const e=this.#h[0]??null;if(!this.#u.has(e)){const s=this.#c();this.#g("",s,!0,t),this.#u.set(e,this.#s)}return this.#u.get(e)??""}template(t){}useTemplates(...t){if(t instanceof Array)for(const e of t)if(e instanceof Array)for(const s of e)this.#f.push(s);else this.#f.push(e);return this}useTranslations(...t){return t.map(e=>{e instanceof Array?e.forEach(s=>{this.#h.includes(s)||(this.#h=[...this.#h,s])}):e instanceof Object&&(this.#h.includes(e)||(this.#h=[...this.#h,e]))}),this}#T(){if(this.#t)for(const t of this.#t)for(;t?.firstChild;)t.removeChild(t.firstChild)}#c(){return jt}#m(t,e,s,n){return this.#n.length=0,this.#s="",this.#p(t,e),this.#r(s),this.#C(n),!0}#p(t,e){const s=e.document.baseURI==="";if(typeof t=="string"){if(this.#a=t,this.#e=!1,ut(t))this.#e=!0;else if(mt(t)||(this.#l=t),this.#t=s?[e.document.createElement("#container")]:e.document.querySelectorAll(t),!this.#t)throw new Error(`Could not find an element by the following query: ${t}`)}else if(t instanceof HTMLElement)this.#t=[t];else if(t instanceof NodeList||t instanceof HTMLCollection)this.#t=t;else if(t instanceof Array){for(const n of t)if(!(n instanceof HTMLElement))throw new Error("All elements in the input array must be DOM elements");this.#t=t}return!0}#C(t){this.template instanceof Function&&(this.state=this.state?tt(this.state):this.state,this.#f.push(this.template.bind(this)));for(let e of t)if(!(e instanceof Function)&&!(e instanceof E))throw new Error("The template must be a function");return!0}#r(t){if(!(t instanceof Array))throw new Error("The argument 'translations' must be an Array");return this.#h=t,!0}#g(t,e,s=!0,n={}){this.#m(t,e,this.#h,this.#f),s&&this.#T();const r=this.#f,l=this.#h;if(!e)throw new Error("Missing window element");if(this.#e){const o=h=>class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){if(!this.shadowRoot)throw new Error("Missing shadow root");h.#d(e,this.shadowRoot,r,l,n)}};customElements.define(this.#a,o(this))}else if(this.#l&&new MutationObserver(h=>{for(const c of h){const a=c.addedNodes;for(let f of a)f instanceof HTMLElement&&f.matches(this.#l)&&this.#d(e,f,r,l,n)}}).observe(document.body,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),this.#t.length===0)this.#d(e,null,r,l,n);else for(const o of this.#t)this.#d(e,o,r,l,n)}#d(t,e,s,n,r={}){const l=new rt(t,e,s,n);l.render(),this.#s=l.getHtmlCode(r),this.#n.push(l.getCreatedElements())}}const Ht="modulepreload",Ut=function(i){return"/"+i},Q={},Z=function(t,e,s){if(!e||e.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(e.map(r=>{if(r=Ut(r),r in Q)return;Q[r]=!0;const l=r.endsWith(".css"),o=l?'[rel="stylesheet"]':"";if(!!s)for(let a=n.length-1;a>=0;a--){const f=n[a];if(f.href===r&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${o}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":Ht,l||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),l)return new Promise((a,f)=>{c.addEventListener("load",a),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},Pt=function(){let i="en";return w()&&(i=document.getElementById("html")?.getAttribute("lang")??i),i},Bt=async function(i,t){if(typeof i!="string")throw new Error("Translation path must be a string");let e=null;const s=i.match(/^(.*?)([^.\/\\]+)(.\w+)$/m);if(s===null)throw new TypeError(`Incorrect path: ${i}`);const n=s[1]+t+s[3];try{e=(await Z(()=>import(n),[])).default}catch{n!==i&&(e=(await Z(()=>import(i),[])).default)}if(!(e instanceof Object))throw new TypeError(`Translation at ${n} must export an object`);return e},Gt=async function(...i){const t=Pt(),e=[];for(let s of i)e.push(Bt(s,t));return Promise.all(e)};function Vt(...i){return new E().useTemplates(...i)}function zt(i){return i[U]=!0,i}const Wt={component:Vt,state:tt,template:zt,fetchTranslations:Gt,Component:E};export{E as Component,Vt as component,Wt as default,Gt as fetchTranslations,Wt as paintor,tt as state,zt as template};
//# sourceMappingURL=paintor.js.map
